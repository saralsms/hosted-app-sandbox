(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Contacts"],{"1a1f":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{staticClass:"mt-xl-n4 mb-4"},[a("Column",{attrs:{md:"6"}},[a("h5",{staticClass:"m-0 text-muted"},[t._t("default")],2)]),a("Column",{attrs:{md:"6"}},[a("FlexBox",{attrs:{justify:"end"}},[t._t("extra")],2)],1)],1)},o=[],n=a("1b32"),i=a("9559"),r=a("27dc"),c={name:"ContentHeader",components:{Row:r["a"],FlexBox:i["a"],Column:n["a"]}},l=c,d=a("2877"),u=Object(d["a"])(l,s,o,!1,null,"a5aed03a",null);e["a"]=u.exports},"77a0":function(t,e,a){},"913d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",[a("ContentHeader",[a("template",{slot:"extra"},[a("Button",{staticClass:"ml-2",attrs:{color:"primary"},on:{click:function(e){t.isCreateFormShown=!0}}},[a("FlexBox",{attrs:{"align-items":"center"}},[a("Icon",{attrs:{type:"si",name:"plus",size:"medium"}}),a("span",{staticClass:"ml-2"},[t._v("Create")])],1)],1)],1)],2),a("ContactsTable",{ref:"contactsTable",attrs:{"is-loading":t.isLoading,contacts:t.contacts,"data-filters":t.dataFilters,pagination:t.pagination},on:{reload:t.fetchData}}),a("CreateContact",{attrs:{visible:t.isCreateFormShown},on:{success:t.onCreateSuccess,close:function(e){t.isCreateFormShown=!1}}})],1)},o=[],n=a("1a1f"),i=a("5d35"),r=a("9559"),c=a("ad4f"),l=a("dc4c"),d=a("7228"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Create a new contact","hide-controls":"","modal-style":"max-width: 700px;","modal-class":"pr-2",visible:t.visible,loading:t.isLoading},on:{closed:t.reset,close:t.close}},[a("ContactForm",{attrs:{error:t.error,"is-loading":t.isLoading},on:{submit:t.createContact,cancel:t.close}})],1)},h=[],m=a("78b5"),C=a("96e9"),p={name:"CreateContact",components:{ContactForm:C["a"],Modal:m["a"]},props:{visible:{type:Boolean,default:!1}},data(){return{error:{},isLoading:!1,isUserFormShown:!0}},methods:{createContact(t){this.isLoading=!0,this.error={},Object(l["c"])(t).then(t=>{this.error={},this.$emit("success",t),this.$toast.success("Contact added successfully"),this.close()}).catch(t=>{"object"===typeof t?this.error=t:this.$toast.error(t)}).finally(()=>{this.isLoading=!1})},close(){this.$emit("close")},reset(){this.contact={},this.error={},this.isLoading=!1,this.isUserFormShown=!0}}},f=p,g=a("2877"),b=Object(g["a"])(f,u,h,!1,null,"0ba8027a",null),w=b.exports,x=a("0814"),v=a("d76a"),F={name:"Contacts",components:{Block:x["a"],CreateContact:w,Button:c["a"],FlexBox:r["a"],Icon:i["a"],ContactsTable:v["a"],ContentHeader:n["a"]},data(){return{isLoading:!1,isCreateFormShown:!1,contacts:[],dataFilters:{status:1,keyword:""},pagination:{pages:1,current:1,perPage:15}}},created(){this.fetchData()},mounted(){this.$bus.on("router-link-clicked",()=>{this.isLoading||this.fetchData()})},beforeDestroy(){this.$bus.removeAllListeners("router-link-clicked")},methods:{fetchData(t){const{status:e,keyword:a}=this.dataFilters;this.isLoading=!0,Object(l["f"])({is_active:e||null,keyword:a||null,page:t||this.pagination.current||null,per_page:this.pagination.perPage,labels:1}).then(({data:t,meta:e})=>{this.contacts=t,this.pagination=Object(d["b"])(e),this.isLoading=!1}).catch(t=>{"request-cancel"!==t&&(this.$toast.error("There was an error while fetching data."),this.isLoading=!1)})},onCreateSuccess(t){this.fetchData(),this.$refs.contactsTable.onViewContact(new Event("CustomEvent",{target:document.createElement("div")}),t)}}},L=F,k=(a("a7cc"),Object(g["a"])(L,s,o,!1,null,"b124cd6a",null));e["default"]=k.exports},a7cc:function(t,e,a){"use strict";a("77a0")}}]);