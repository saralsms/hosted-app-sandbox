(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Labels"],{"020b":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{staticClass:"card-base block custom-box-shadow"},[t._t("default")],2)},i=[],l=a("0814"),n={name:"CardBase",components:{Block:l["a"]}},o=n,r=a("2877"),c=Object(r["a"])(o,s,i,!1,null,"64f32f13",null);e["a"]=c.exports},"05ce":function(t,e,a){"use strict";a("e7ba")},"0af5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("InputBase",{attrs:{title:t.title,required:t.required,info:t.info,error:t.error},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.id,i=e.isInvalid;return[a("select",{ref:"input",staticClass:"form-control",class:{"is-invalid":i},attrs:{id:s,required:t.required,placeholder:t.placeholder,disabled:t.disabled},domProps:{value:t.value},on:{input:t.updateInput}},t._l(t.options,(function(e,s){return a("option",{key:s,attrs:{disabled:e.disabled,hidden:e.hidden},domProps:{selected:e.selected,value:t.getOptionValue(e)}},[t._v(" "+t._s(t.getOptionText(e))+" ")])})),0)]}}])})},i=[],l=a("850b"),n={name:"InputSelect",components:{InputBase:l["a"]},props:{title:{type:String,default:""},options:{type:Array,default:()=>[]},required:{type:Boolean,default:!1},value:{type:[String,Object,Number,Boolean],default:null},optionValue:{type:String,default:""},optionText:{type:String,default:""},error:{type:String,default:""},placeholder:{type:String,default:""},info:{type:String,default:""},disabled:{type:Boolean}},methods:{updateInput(){this.$emit("input",this.$refs.input.value),this.$emit("select",this.$refs.input.value)},getOptionValue(t){return this.optionValue?t[this.optionValue]:t},getOptionText(t){return this.optionText?t[this.optionText]:t}}},o=n,r=a("2877"),c=Object(r["a"])(o,s,i,!1,null,null,null);e["a"]=c.exports},"0f8e":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column-reverse",justify:"between","align-items":"end"}},[a("Block",{staticClass:"p-2"},[t._v(" "+t._s(t.pagination.message)+" ")]),a("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column",justify:"between","align-items":"end"}},[a("InputSelect",{staticClass:"my-2 my-lg-0",attrs:{options:t.perPages},on:{select:function(e){return t.$emit("change")}},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}}),a("nav",{staticClass:"ml-3"},[a("ul",{staticClass:"pagination disable-user-select mb-0"},[a("li",{staticClass:"page-item",class:{disabled:!t.isPreviousable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current-1)}}},[a("span",{staticClass:"page-link"},[t._v("Previous")])]),t._l(t.pages,(function(e,s){return a("li",{key:s,staticClass:"page-item",class:{active:t.current===e}},[a("a",{staticClass:"page-link btn-primary",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCurrent(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!t.isNextable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current+1)}}},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)])],1)],1)},i=[],l=a("2ef0"),n=a("9559"),o=a("0814"),r=a("0af5"),c={name:"Pagination",components:{InputSelect:r["a"],Block:o["a"],FlexBox:n["a"]},props:{visibleLength:{type:Number,default:5},pagination:{type:Object,default(){return{}}}},data(){return{offset:0,perPages:[5,15,25,50,100],pages:[]}},computed:{current(){return this.pagination.current||1},length(){return this.pagination.pages||1},isNextable(){return this.length>this.current},isPreviousable(){return this.current>1}},watch:{length:{handler(){this.unWatchCurrentPageValue();const{visibleLength:t}=this,e=Math.ceil(t/2)+(t%2?0:1);this.offset=t-(t-e+1),this.generatePagination(),this.length>this.visibleLength&&(this.unWatchCurrentPageValue=this.$watch("current",this.generatePagination))},immediate:!0}},methods:{unWatchCurrentPageValue(){},generatePagination(){const{current:t,offset:e,length:a,visibleLength:s}=this;let i=t-e;i<1&&(i=1);let n=i+s;n>a&&(n=a+1,i=n-s,i<1&&(i=1)),this.pages=Object(l["range"])(i,n)},setCurrent(t){let e=t;t<=1?e=1:t>=this.length&&(e=this.length),e!==this.current&&this.$emit("change",e)}}},u=c,d=(a("5148"),a("2877")),h=Object(d["a"])(u,s,i,!1,null,"64c09d8e",null);e["a"]=h.exports},1824:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Confirmation",visible:t.visible,loading:t.loading,"modal-style":"max-width: 450px;"},on:{success:t.onSuccess,close:t.close}},[a("p",{staticClass:"px-4"},[t._v(" Are you sure you want to "+t._s(t.getState)+" "),a("span",[t._v(t._s(t.field))]),t._v("? ")])])},i=[],l=a("78b5"),n={name:"UpdateStatus",components:{Modal:l["a"]},props:{field:{type:void 0,default:""},visible:{type:Boolean,default:!1},status:{type:Boolean,default:!1},state:{type:String,default:null},submission:{type:Function,default(){return Promise.reject(new Error("Unknown error occured"))}}},data(){return{loading:!1}},computed:{getState(){const{state:t}=this;return t||(this.status?"activate":"deactivate")}},methods:{onSuccess(){this.loading=!0,this.submission().then(()=>{this.$toast.success("Status updated successfully."),this.$emit("success"),this.close(!0)}).catch(t=>{this.$toast.error(t.message||t||"There was an error while updating status.")}).finally(()=>{this.loading=!1})},close(t=!1){this.loading&&!t||this.$emit("close")}}},o=n,r=a("2877"),c=Object(r["a"])(o,s,i,!1,null,null,null);e["a"]=c.exports},"1a1f":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{staticClass:"mt-xl-n4 mb-4"},[a("Column",{attrs:{md:"6"}},[a("h5",{staticClass:"m-0 text-muted"},[t._t("default")],2)]),a("Column",{attrs:{md:"6"}},[a("FlexBox",{attrs:{justify:"end"}},[t._t("extra")],2)],1)],1)},i=[],l=a("1b32"),n=a("9559"),o=a("27dc"),r={name:"ContentHeader",components:{Row:o["a"],FlexBox:n["a"],Column:l["a"]}},c=r,u=a("2877"),d=Object(u["a"])(c,s,i,!1,null,"a5aed03a",null);e["a"]=d.exports},5148:function(t,e,a){"use strict";a("b994")},7462:function(t,e,a){"use strict";a("ef64")},"8bd0":function(t,e,a){},"9ea2":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"delete-label-modal",attrs:{title:"Delete this label permanently?",visible:t.visible,loading:t.isLoading,"modal-style":"max-width: 550px;"},on:{close:t.close,success:t.deleteLabel}},[a("Block",{staticClass:"px-4"},[a("p",{staticClass:"mb-3"},[a("span",[t._v("The contacts will be released from the label and won't be affected.")])]),a("Block",{staticClass:"label-details"},[a("table",{staticClass:"w-100"},[a("tbody",[a("tr",[a("th",{staticStyle:{width:"100px"}},[t._v(" Label name: ")]),a("td",[t._v(" "+t._s(t.label.name||" N/A")+" ")])]),a("tr",[a("th",{staticStyle:{width:"70px"}},[t._v(" Contacts: ")]),a("td",[t._v(" "+t._s(t.label.total_contacts||" N/A")+" ")])]),a("tr",[a("th",{staticStyle:{width:"70px"}},[t._v(" Description: ")]),a("td",[a("Block",{staticClass:"description-block mb-3"},[a("read-more",{staticClass:"description-text",attrs:{text:t.label.description||"","max-chars":100,"more-str":"Show More"}})],1)],1)])])])])],1)],1)},i=[],l=a("78b5"),n=a("f85f"),o=a("0814"),r={name:"DeleteLabel",components:{Block:o["a"],Modal:l["a"]},props:{visible:{type:Boolean,default:!1},label:{type:Object,default(){return{}}}},data(){return{isLoading:!1}},methods:{deleteLabel(){this.isLoading=!0,Object(n["e"])(this.label.id).then(()=>{this.$emit("success"),this.$store.dispatch("listLabels",{force:!0}),this.$toast.success("Label deleted successfully!"),this.close()}).catch(t=>{const e=t||"Couldn't delete label.";this.$toast.error(e)}).finally(()=>{this.isLoading=!1,this.close()})},close(){this.isLoading||this.$emit("close")}}},c=r,u=(a("05ce"),a("2877")),d=Object(u["a"])(c,s,i,!1,null,null,null);e["a"]=d.exports},ac13:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{class:t.spanClass,attrs:{title:t.textStatus},on:{click:function(e){return e.stopPropagation(),t.$emit("click")}}},[a("InputSwitch",{attrs:{color:"success"},on:{change:t.onChange},model:{value:t.inputStatus,callback:function(e){t.inputStatus=e},expression:"inputStatus"}})],1)},i=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"css-control css-control-sm css-switch",class:t.spanClass},[a("input",{ref:"input",staticClass:"css-control-input",attrs:{type:"checkbox"},domProps:{checked:t.value},on:{input:t.onInput}}),a("span",{staticClass:"css-control-indicator"}),t._v(" "+t._s(t.title)+" ")])},n=[],o={name:"InputSwitch",props:{title:{type:String,default:""},value:{type:Boolean,default:!0},color:{type:String,default:"primary"}},computed:{spanClass(){return this.color?"css-control-"+this.color:""}},methods:{onInput(){const t=this.$refs.input.checked;this.$emit("input",t),this.$emit("change",t)}}},r=o,c=a("2877"),u=Object(c["a"])(r,l,n,!1,null,null,null),d=u.exports,h={name:"StatusColumn",components:{InputSwitch:d},props:{status:{type:Number,default:0}},data(){return{inputStatus:!1}},computed:{spanClass(){return this.status?"text-success":"text-danger"},textStatus(){return this.status?"active":"inactive"}},watch:{status:{handler(){this.inputStatus=!!this.status},immediate:!0}},methods:{onChange(t){setTimeout(()=>{this.inputStatus=!t,this.$emit("change",t)})}}},p=h,b=Object(c["a"])(p,s,i,!1,null,null,null);e["a"]=b.exports},b881:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Update label","hide-controls":"","modal-style":"max-width: 500px;","modal-class":"pr-2",visible:t.visible},on:{closed:t.reset,close:t.close}},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("LabelForm",{attrs:{error:t.error,"is-loading":t.isSubmitting},on:{submit:t.updateLabel,cancel:t.close},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}})],1)],1)},i=[],l=a("f85f"),n=a("78b5"),o=a("f669"),r=a("c2cd"),c={name:"EditLabel",components:{CardLoader:r["a"],LabelForm:o["a"],Modal:n["a"]},props:{labelId:{type:[Number,String],default:null},visible:{type:Boolean,default:!1}},data(){return{label:{},error:{},isLoading:!1,isSubmitting:!1,isUserFormShown:!0}},watch:{visible(t){t&&this.fetchData()}},methods:{fetchData(){this.isLoading=!0,Object(l["g"])(this.labelId).then(t=>{this.label=t}).catch(()=>{this.close(),this.$toast.error("There was an error while fetching label data!")}).finally(()=>{this.isLoading=!1})},updateLabel(t){this.isSubmitting=!0;const{name:e,description:a}=t;Object(l["k"])(this.labelId,{name:e,description:a}).then(t=>{this.error={},this.close(),this.$emit("success",t),this.$store.dispatch("listLabels",{force:!0}),this.$toast.success("Label updated successfully"),this.close()}).catch(t=>{"object"===typeof t?this.error=t:this.$toast.error(t)}).finally(()=>{this.isSubmitting=!1})},close(){this.isLoading&&this.isSubmitting||this.$emit("close")},reset(){this.label={},this.isLoading=!1,this.isUserFormShown=!0}}},u=c,d=a("2877"),h=Object(d["a"])(u,s,i,!1,null,"7dfea746",null);e["a"]=h.exports},b994:function(t,e,a){},dd08:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group"},[a("input",{ref:"searchInp",staticClass:"form-control",attrs:{type:"search",placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.setValue}}),t._m(0)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("i",{staticClass:"fa fa-search"})])])}],l=a("2ef0"),n={name:"Search",props:{placeholder:{type:String,default:"Search"},value:{type:String,default:""},debounce:{type:Number,default:0}},created(){this.debounce&&(this.onChange=Object(l["debounce"])(this.onChange,this.debounce))},methods:{setValue(){const{value:t}=this.$refs.searchInp;this.$emit("input",t),this.onChange(t)},onChange(t){this.$emit("change",t)}}},o=n,r=a("2877"),c=Object(r["a"])(o,s,i,!1,null,"6ec74c60",null);e["a"]=c.exports},e7ba:function(t,e,a){t.exports={primary:"#FF6C37",inverse:"#343a40",secondary:"#343a40",success:"#9ccc65",info:"#26c6da",warning:"#ffca28",danger:"#ef5350"}},ef64:function(t,e,a){},f55b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",[a("ContentHeader",[a("template",{slot:"extra"},[a("Button",{staticClass:"ml-2 btn-noborder",attrs:{color:"primary"},on:{click:function(e){t.isCreateFormShown=!0}}},[a("FlexBox",{attrs:{"align-items":"center"}},[a("Icon",{attrs:{type:"si",name:"plus",size:"medium"}}),a("span",{staticClass:"ml-2"},[t._v("Create")])],1)],1)],1)],2),a("LabelsTable",{attrs:{"is-loading":t.isLoading,labels:t.labels,"data-filters":t.dataFilters,pagination:t.pagination},on:{reload:t.fetchData,view:t.onViewLabel,merge:t.onMergeLabel,delete:t.onDeleteLabel,edit:t.onEditLabel,compose:function(e){var a=e.label,s=e.index;return t.onCompose(a,s)}}}),a("CreateLabel",{attrs:{visible:t.isCreateFormShown},on:{success:t.onLabelCreated,close:function(e){t.isCreateFormShown=!1}}}),a("MergeLabel",{attrs:{visible:t.isMergeFormShown,label:t.targetLabel},on:{success:t.fetchData,close:function(e){t.isMergeFormShown=!1}}}),a("EditLabel",{attrs:{"label-id":t.targetLabel.id,visible:t.isEditModalShown},on:{success:t.fetchData,close:function(e){t.isEditModalShown=!1}}}),a("DeleteLabel",{attrs:{visible:t.isDeleteModalShown,label:t.targetLabel},on:{success:t.fetchData,close:function(e){t.isDeleteModalShown=!1}}})],1)},i=[],l=a("1a1f"),n=a("9ea2"),o=a("5d35"),r=a("9559"),c=a("ad4f"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Create label","hide-controls":"","modal-style":"max-width: 500px;","modal-class":"pr-2",visible:t.visible,loading:t.isLoading},on:{closed:t.reset,close:t.close}},[a("LabelForm",{attrs:{error:t.error,"is-loading":t.isLoading},on:{submit:t.createLabel,cancel:t.close}})],1)},d=[],h=a("78b5"),p=a("f85f"),b=a("f669"),m={name:"CreateLabel",components:{LabelForm:b["a"],Modal:h["a"]},props:{visible:{type:Boolean,default:!1}},data(){return{error:{},isLoading:!1,isUserFormShown:!0}},methods:{createLabel(t){this.isLoading=!0;const{name:e,description:a}=t;Object(p["c"])({name:e,description:a}).then(t=>{this.error={},this.$emit("success",t),this.$store.dispatch("listLabels",{force:!0}),this.$toast.success("Label added successfully"),this.$emit("close")}).catch(t=>{"object"===typeof t?this.error=t:this.$toast.error(t)}).finally(()=>{this.isLoading=!1})},close(){this.isLoading||this.$emit("close")},reset(){this.label={},this.isLoading=!1,this.isUserFormShown=!0}}},f=m,g=a("2877"),v=Object(g["a"])(f,u,d,!1,null,"08ef5ca0",null),C=v.exports,x=a("7228"),y=a("0814"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Select a source label to merge "+t.label.name+".","hide-controls":"","modal-style":"max-width: 500px;","modal-class":"pr-2",visible:t.visible,loading:t.isLoading},on:{closed:t.reset,close:t.close}},[a("Block",{staticClass:"px-4"},[a("p",{staticClass:"text-primary mb-3"},[t._v(" After this process, "),a("span",{staticStyle:{"white-space":"nowrap"}},[t._v("label "),a("b",[t._v(t._s(t.label.name))])]),t._v(" will be removed automatically. ")]),a("InputSelect",{attrs:{title:"Target Label","option-value":"id","option-text":"name",options:t.whitelistLabels},on:{select:function(e){return t.$emit("reload")}},model:{value:t.targetId,callback:function(e){t.targetId=e},expression:"targetId"}}),a("FlexBox",{staticClass:"pb-2",attrs:{justify:"end"}},[a("Button",{staticClass:"mr-2",attrs:{color:"primary",disabled:t.isEmpty(t.targetId)||t.isSubmitting,loading:t.isSubmitting},on:{click:t.onSubmit}},[t._v(" Confirm ")]),a("Button",{attrs:{color:"secondary"},on:{click:t.close}},[t._v(" Cancel ")])],1)],1)],1)},L=[],w=(a("ddb0"),a("2f62")),_=a("0af5"),$={name:"MergeLabel",components:{Button:c["a"],FlexBox:r["a"],InputSelect:_["a"],Block:y["a"],Modal:h["a"]},props:{visible:{type:Boolean,default:!1},label:{type:Object,default(){return{}}}},data(){return{error:{},isLoading:!1,isSubmitting:!1,targetId:null}},computed:{...Object(w["c"])(["labels"]),whitelistLabels(){const{labels:t=[],label:e}=this,a=t.filter(({id:t})=>t!==e.id);return[{name:"Select a target label",value:"",disabled:!0},...a]}},created(){this.isLoading=!0,this.listLabels({is_active:1}).catch(t=>this.$toast.error(t.message||t)).finally(()=>{this.isLoading=!1})},methods:{...Object(w["b"])(["listLabels"]),onSubmit(){this.isSubmitting=!0,Object(p["j"])(this.label.id,this.targetId).then(()=>{this.error={},this.$emit("success"),this.$store.dispatch("listLabels",{force:!0}),this.$toast.success("Label merged successfully"),this.$emit("close")}).catch(t=>{"object"===typeof t?this.error=t:this.$toast.error(t)}).finally(()=>{this.isSubmitting=!1})},close(){this.isLoading||this.$emit("close")},reset(){this.label={},this.isLoading=!1,this.isUserFormShown=!0}}},k=$,B=Object(g["a"])(k,S,L,!1,null,"3158e130",null),j=B.exports,F=a("b881"),I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{staticClass:"mb-4"},[a("UpdateStatus",{attrs:{visible:t.isStatusModalShown,field:"label:<b>"+t.targetContact.name+"</b>",status:t.targetContact.status,submission:t.updateStatus},on:{success:t.setStatus,close:function(e){t.isStatusModalShown=!1}}}),a("CardBase",{staticClass:"p-4 mb-3"},[a("Row",[a("Block",{staticClass:"col-md-3"},[a("InputSelect",{attrs:{title:"Status","option-value":"value","option-text":"name",options:t.statuses},on:{select:function(e){return t.$emit("reload")}},model:{value:t.dataFilters.status,callback:function(e){t.$set(t.dataFilters,"status",e)},expression:"dataFilters.status"}})],1),a("Block",{staticClass:"col-md-6 offset-md-3"},[a("Search",{staticClass:"mt-4 pt-1",attrs:{debounce:500},on:{change:t.onSearch},model:{value:t.dataFilters.keyword,callback:function(e){t.$set(t.dataFilters,"keyword",e)},expression:"dataFilters.keyword"}})],1)],1)],1),a("CardBase",{class:t.isLoading?"":"with-table"},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("Block",{staticClass:"table-responsive collapsible"},[t.labels.length?a("table",{staticClass:"table table-hover m-0"},[a("thead",{staticClass:"bg-gray-lighter"},[a("tr",[a("th",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v(" # ")]),a("th",{staticClass:"pl-4",staticStyle:{width:"30%"}},[a("span",{staticClass:"d-none d-sm-inline"},[t._v("Label Name")])]),a("th",{staticStyle:{width:"100px"}},[t._v(" Contacts ")]),a("th",[t._v(" Description ")]),a("th",{staticClass:"text-center",staticStyle:{width:"100px"}},[t._v(" Status ")]),a("th",{staticStyle:{width:"170px"}})])]),a("tbody",t._l(t.labels,(function(e,s){return a("tr",{key:e.id,staticClass:"cursor-pointer",attrs:{title:"view label in detail"},on:{click:function(a){return t.$emit("view",e.id)}}},[a("td",{staticClass:"text-center"},[a("span",{staticClass:"hidden-info"},[t._v("#")]),a("span",[t._v(t._s(s+1))])]),a("td",{staticClass:"pl-4 ml-4"},[a("span",{staticClass:"hidden-info"},[t._v("Name")]),a("span",{staticClass:"field-data"},[t._v(t._s(e.name))])]),a("td",{staticClass:"px-3 px-lg-4"},[a("span",{staticClass:"hidden-info"},[t._v("Total Contacts:")]),a("span",[t._v(t._s(e.total_contacts||0))])]),a("td",{staticClass:"pr-5"},[a("span",{staticClass:"hidden-info"},[t._v("Description:")]),a("span",{staticClass:"description"},[t._v(t._s(e.description||" N/A"))])]),a("td",{staticClass:"text-center"},[a("span",{staticClass:"hidden-info"},[t._v("Status:")]),a("StatusColumn",{attrs:{status:e.is_active},on:{change:function(a){return t.onStatusUpdate(e,a)}}})],1),a("td",[a("span",{staticClass:"hidden-info"}),a("FlexBox",{attrs:{"align-items":"center",justify:"end"}},[a("Button",{staticClass:"view-button mr-2 p-2 d-none text-gray-800",attrs:{color:"secondary",title:"View label"},on:{click:function(a){return t.$emit("view",e.id)}}},[a("Icon",{attrs:{name:"file-text-o",size:"regular"}})],1),a("Button",{staticClass:"p-2 mx-1 text-dark",attrs:{color:"light",title:"compose message for all contacts of "+e.name},on:{click:function(a){return t.$emit("compose",{label:e,index:s})}}},[a("CardLoader",{attrs:{opacity:"0","is-loading":e.isComposing,"loader-size":"20"}},[a("Icon",{class:{invisible:e.isComposing},attrs:{type:"si",name:"envelope-letter",size:"medium"}})],1)],1),a("Button",{staticClass:"p-2 mx-1 text-dark",attrs:{color:"secondary",title:"merge Label"},on:{click:function(a){return t.$emit("merge",e)}}},[a("Icon",{attrs:{name:"compress",size:"regular"}})],1),a("Button",{staticClass:"p-2 mx-1 text-dark",attrs:{color:"light",title:"edit label"},on:{click:function(a){return t.$emit("edit",e)}}},[a("Icon",{attrs:{type:"fa",name:"pencil",size:"regular"}})],1),a("Button",{staticClass:"p-2 mx-1 text-danger",attrs:{color:"light",title:"delete label"},on:{click:function(a){return t.$emit("delete",e)}}},[a("Icon",{attrs:{type:"fa",name:"trash",size:"regular"}})],1)],1)],1)])})),0)]):a("Block",{staticClass:"min-height-300 d-flex flex-row justify-content-center align-items-center"},[a("h4",{staticClass:"text-gray-dark font-w300"},[t._v(" Labels not Found ")])])],1)],1)],1),a("Pagination",{staticClass:"my-2 my-lg-0",attrs:{pagination:t.pagination},on:{change:t.changePagination}})],1)},O=[],M=a("2ef0"),D=a("020b"),E=a("ac13"),P=a("0f8e"),T=a("c2cd"),N=a("1824"),V=a("dd08"),A=a("27dc"),U={name:"LabelsTable",components:{Block:y["a"],FlexBox:r["a"],Button:c["a"],Row:A["a"],Search:V["a"],UpdateStatus:N["a"],Icon:o["a"],InputSelect:_["a"],CardBase:D["a"],Pagination:P["a"],CardLoader:T["a"],StatusColumn:E["a"]},props:{labels:{type:Array,default(){return[]}},dataFilters:{type:Object,default(){return{}}},pagination:{type:Object,default(){return{}}},isLoading:{type:Boolean}},data(){return{targetContact:{},isStatusModalShown:!1,statuses:[{name:"All",value:null},{name:"Active",value:1},{name:"Inactive",value:0}]}},methods:{updateStatus(){const{id:t,status:e}=this.targetContact;return Object(p["l"])(t,e)},setStatus(){const t=this.targetContact,e=Object(M["findIndex"])(this.labels,["id",t.id]);this.labels[e].is_active=t.status?1:0},onStatusUpdate(t,e){this.targetContact={...t,status:e},this.isStatusModalShown=!0},onSearch(){this.pagination.current=1,this.$emit("reload")},changePagination(t){this.pagination.current=t,this.$emit("reload",t)}}},z=U,q=(a("7462"),Object(g["a"])(z,I,O,!1,null,"518ec928",null)),R=q.exports,H={name:"Labels",components:{MergeLabel:j,Block:y["a"],CreateLabel:C,Button:c["a"],FlexBox:r["a"],Icon:o["a"],DeleteLabel:n["a"],EditLabel:F["a"],LabelsTable:R,ContentHeader:l["a"]},data(){return{isLoading:!1,isCreateFormShown:!1,isMergeFormShown:!1,isViewModalShown:!1,isEditModalShown:!1,isDeleteModalShown:!1,targetLabel:{},labels:[],dataFilters:{status:1,keyword:""},pagination:{pages:1,current:1,perPage:15}}},created(){this.fetchData()},mounted(){this.$bus.on("router-link-clicked",()=>{this.isLoading||this.fetchData()})},beforeDestroy(){this.$bus.removeAllListeners("router-link-clicked")},methods:{fetchData(t){const{status:e,keyword:a}=this.dataFilters;this.isLoading=!0,Object(p["i"])({is_active:e||null,keyword:a||null,page:t||null,per_page:this.pagination.perPage}).then(({data:t,meta:e})=>{this.labels=t.map(t=>({...t,isComposing:!1})),this.pagination=Object(x["b"])(e),this.isLoading=!1}).catch(t=>{"request-cancel"!==t&&(this.$toast.error("There was an error while fetching data."),this.isLoading=!1)})},onLabelCreated({id:t}){this.$router.push("/labels/"+t)},onViewLabel(t){this.$router.push("/labels/"+t)},onMergeLabel(t){this.targetLabel=t,this.isMergeFormShown=!0},onEditLabel(t){this.targetLabel=t,this.isEditModalShown=!0},onDeleteLabel(t){this.targetLabel=t,this.isDeleteModalShown=!0},onCompose(t,e){this.labels[e].isComposing=!0,Object(p["f"])(t.id,{per_page:0}).then(({data:t})=>{this.$bus.emit("compose",{action:"New",recipients:t})}).catch(t=>{this.$toast.error(t)}).finally(()=>{this.labels[e].isComposing=!1})}}},W=H,J=Object(g["a"])(W,s,i,!1,null,null,null);e["default"]=J.exports},f669:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CardLoader",{attrs:{"is-loading":t.isFetchingData}},[a("Form",{staticClass:"px-2 pb-2",on:{submit:t.onSubmit}},[a("table",{staticClass:"table-borderless w-100"},[a("tr",[a("th",{staticStyle:{width:"60px"},attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"user",size:"large",color:"muted"}})],1)],1),a("td",{attrs:{colspan:"2"}},[a("InputText",{attrs:{required:"",type:"text",title:"Label Name",error:t.error.name},model:{value:t.label.name,callback:function(e){t.$set(t.label,"name",e)},expression:"label.name"}})],1)]),a("tr",[a("th",{attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{staticClass:"fa-rotate-90",attrs:{name:"file",size:"regular",color:"muted"}})],1)],1),a("td",{attrs:{colspan:"2"}},[a("InputTextArea",{attrs:{title:"Description",rows:"3",error:t.error.description},model:{value:t.label.description,callback:function(e){t.$set(t.label,"description",e)},expression:"label.description"}})],1)])]),a("FlexBox",{staticClass:"px-2",attrs:{justify:"end"}},[a("Button",{staticClass:"mr-2",attrs:{type:"submit",color:"primary",disabled:t.isLoading,loading:t.isLoading}},[t._v(" Save ")]),a("Button",{attrs:{color:"secondary"},on:{click:function(e){return t.$emit("cancel")}}},[t._v(" Cancel ")])],1)],1)],1)},i=[],l=a("6436"),n=a("7fb4"),o=a("5d35"),r=a("9559"),c=a("c6b1"),u=a("ad4f"),d=a("c2cd"),h={name:"LabelForm",components:{CardLoader:d["a"],Button:u["a"],InputTextArea:c["a"],FlexBox:r["a"],Icon:o["a"],InputText:n["a"],Form:l["a"]},props:{value:{type:Object,default(){return{}}},error:{type:Object,default(){return{}}},isLoading:{type:Boolean}},data(){return{isFetchingData:!1,label:{name:"",description:""}}},computed:{},watch:{value:{handler(){const{value:t,label:e}=this;this.label={...e,...t}},immediate:!0}},methods:{onSubmit(){this.$emit("submit",this.label)}}},p=h,b=(a("fc7d"),a("2877")),m=Object(b["a"])(p,s,i,!1,null,"756a1623",null);e["a"]=m.exports},fc7d:function(t,e,a){"use strict";a("8bd0")}}]);