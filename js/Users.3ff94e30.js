(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Users"],{"00dc":function(t,e,s){"use strict";s("7b23")},"0f8e":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column-reverse",justify:"between","align-items":"end"}},[s("Block",{staticClass:"p-2"},[t._v(" "+t._s(t.pagination.message)+" ")]),s("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column",justify:"between","align-items":"end"}},[s("InputSelect",{staticClass:"my-2 my-lg-0",attrs:{options:t.perPages},on:{select:function(e){return t.$emit("change")}},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}}),s("nav",{staticClass:"ml-3"},[s("ul",{staticClass:"pagination disable-user-select mb-0"},[s("li",{staticClass:"page-item",class:{disabled:!t.isPreviousable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current-1)}}},[s("span",{staticClass:"page-link"},[t._v("Previous")])]),t._l(t.pages,(function(e,a){return s("li",{key:a,staticClass:"page-item",class:{active:t.current===e}},[s("a",{staticClass:"page-link btn-primary",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.setCurrent(e)}}},[t._v(t._s(e))])])})),s("li",{staticClass:"page-item",class:{disabled:!t.isNextable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current+1)}}},[s("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)])],1)],1)},i=[],r=s("2ef0"),n=s("9559"),o=s("0814"),l=s("0af5"),c={name:"Pagination",components:{InputSelect:l["a"],Block:o["a"],FlexBox:n["a"]},props:{visibleLength:{type:Number,default:5},pagination:{type:Object,default(){return{}}}},data(){return{offset:0,perPages:[5,15,25,50,100],pages:[]}},computed:{current(){return this.pagination.current||1},length(){return this.pagination.pages||1},isNextable(){return this.length>this.current},isPreviousable(){return this.current>1}},watch:{length:{handler(){this.unWatchCurrentPageValue();const{visibleLength:t}=this,e=Math.ceil(t/2)+(t%2?0:1);this.offset=t-(t-e+1),this.generatePagination(),this.length>this.visibleLength&&(this.unWatchCurrentPageValue=this.$watch("current",this.generatePagination))},immediate:!0}},methods:{unWatchCurrentPageValue(){},generatePagination(){const{current:t,offset:e,length:s,visibleLength:a}=this;let i=t-e;i<1&&(i=1);let n=i+a;n>s&&(n=s+1,i=n-a,i<1&&(i=1)),this.pages=Object(r["range"])(i,n)},setCurrent(t){let e=t;t<=1?e=1:t>=this.length&&(e=this.length),e!==this.current&&this.$emit("change",e)}}},d=c,u=(s("5148"),s("2877")),m=Object(u["a"])(d,a,i,!1,null,"64c09d8e",null);e["a"]=m.exports},"311b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Credit Balance",visible:t.visible,loading:t.isSubmitting,disabled:!t.validated},on:{success:t.submit,close:t.close,closed:t.reset}},[s("Block",{staticClass:"px-4"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("ForeShadow",{attrs:{visible:t.isLoading}},[s("table",{staticClass:"table-borderless w-100"},[s("tr",[s("th",{attrs:{scope:"row"}},[s("Icon",{attrs:{name:"building-o",size:"large",color:"muted"}})],1),s("td",[s("InputSelect",{attrs:{options:t.userOptions,"option-value":"id","option-text":"info",title:"User",disabled:t.disableUserInput,required:""},model:{value:t.credit.user,callback:function(e){t.$set(t.credit,"user",e)},expression:"credit.user"}})],1)]),s("tr",[s("th",{staticStyle:{width:"40px"},attrs:{scope:"row"}},[s("Icon",{attrs:{name:"database",size:"large",color:"muted"}})],1),s("td",[s("InputNumber",{attrs:{required:"",type:"text",title:"Amount",error:t.error.amount},model:{value:t.credit.amount,callback:function(e){t.$set(t.credit,"amount",e)},expression:"credit.amount"}})],1)]),s("tr",[s("th",{attrs:{scope:"row"}},[s("Icon",{attrs:{name:"cc-mastercard",size:"medium",color:"muted"}})],1),s("td",[s("InputSelect",{staticClass:"flex-auto",attrs:{title:"Method",options:["API","BANK","CARD","CASH","TRIAL","QR","WALLET"],required:"",type:"text",error:t.error.credit_method},model:{value:t.credit.method,callback:function(e){t.$set(t.credit,"method",e)},expression:"credit.method"}})],1)]),s("tr",[s("th",{attrs:{scope:"row"}},[s("Icon",{staticClass:"fa-rotate-90",attrs:{name:"file",size:"large",color:"muted"}})],1),s("td",{attrs:{colspan:"2"}},[s("InputTextArea",{staticClass:"mb-2",attrs:{rows:"2",title:"Description"},model:{value:t.credit.description,callback:function(e){t.$set(t.credit,"description",e)},expression:"credit.description"}})],1)])])])],1)])],1)},i=[],r=(s("ddb0"),s("78b5")),n=s("d855"),o=s("5d35"),l=s("e1778"),c=s("0af5"),d=s("c6b1"),u=s("0814"),m=s("c652"),p={name:"CreditBalance",components:{InputNumber:m["a"],Block:u["a"],InputTextArea:d["a"],InputSelect:c["a"],Icon:o["a"],Modal:r["a"],ForeShadow:n["a"]},props:{users:{type:Array,default:()=>[]},user:{type:Object,default(){return{}}},disableUserInput:{type:Boolean},visible:{type:Boolean},isLoading:{type:Boolean}},data(){return{credit:{amount:null,method:"CASH",user:null,description:""},error:{},isSubmitting:!1}},computed:{userOptions(){return[{id:null,info:"~ Select User ~",selected:!0},...this.users]},validated(){const{amount:t,user:e,method:s}=this.credit;return e&&s&&t}},watch:{visible:{handler(t){t&&(this.credit.user=this.user.id)},immediate:!0,deep:!0}},methods:{submit(){this.isSubmitting=!0;const{credit:t}=this,{amount:e,method:s,user:a,description:i}=t;Object(l["a"])({user_id:parseInt(a,0),payment_method:s,amount:parseFloat(e),description:i}).then(()=>{this.$toast.success("Amount credited successfully."),this.$emit("success"),this.close()}).catch(t=>{"string"===typeof t?this.$toast.error(t):this.error=t}).finally(()=>{this.isSubmitting=!1})},close(){this.$emit("close"),this.reset()},reset(){this.credit={amount:0,method:"CASH",user:null,description:""},this.isSubmitting=!1}}},h=p,g=s("2877"),b=Object(g["a"])(h,a,i,!1,null,null,null);e["a"]=b.exports},"3d73":function(t,e,s){},"40b1":function(t,e,s){"use strict";s("c893")},5148:function(t,e,s){"use strict";s("b994")},"784e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Block",[s("UsersTable",{attrs:{"is-loading":t.isLoading,users:t.userList,"data-filters":t.dataFilters,pagination:t.pagination},on:{view:t.onViewOrganization,reload:t.fetchData,credit:t.onCreditBalance,editRate:t.onEditRate}}),s("ViewUser",{attrs:{visible:t.isViewModalShown,user:t.targetUser},on:{credit:t.onCreditBalance,editRate:t.onEditRate,editKyc:t.onEditKyc,editSenderId:t.onEditSenderId,getTempPass:t.onGetTempPass,close:function(e){t.isViewModalShown=!1}}}),s("CreditBalance",{attrs:{user:t.targetUser,users:t.users,"disable-user-input":"",visible:t.isCreditFormShown,"is-loading":t.isLoading},on:{success:t.fetchData,close:function(e){t.isCreditFormShown=!1}}}),s("EditRate",{attrs:{visible:t.isEditRateModalShown,user:t.targetUser},on:{success:t.fetchData,close:function(e){t.isEditRateModalShown=!1}}}),s("EditKycDetails",{attrs:{visible:t.isEditKycModalShown,user:t.targetUser},on:{success:function(e){return t.fetchData(t.pagination.current,e)},close:function(e){t.isEditKycModalShown=!1}}}),s("EditSenderID",{attrs:{visible:t.isEditSenderIdModalShown,user:t.targetUser},on:{success:function(e){return t.fetchData(t.pagination.current,e)},close:function(e){t.isEditSenderIdModalShown=!1}}}),s("GetTemporaryPassword",{attrs:{visible:t.isGetTempPasswordModalShown,user:t.targetUser},on:{success:function(e){return t.fetchData(t.pagination.current,e)},close:function(e){t.isGetTempPasswordModalShown=!1}}})],1)},i=[],r=s("2f62"),n=s("0814"),o=s("2612"),l=s("7228"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Edit credit rate for user",visible:t.visible,loading:t.isLoading,disabled:!t.validated,"modal-class":"","modal-style":"max-width: 400px;"},on:{close:t.close,success:t.submit}},[s("Block",{staticClass:"px-4"},[s("table",{staticClass:"w-100 mb-3"},[s("tbody",[s("tr",[s("th",{staticStyle:{width:"110px"}},[t._v(" Name: ")]),s("td",[t._v(" "+t._s(t.user.name||t.user.first_name+" "+t.user.last_name||" N/A")+" ")])]),s("tr",[s("th",{staticStyle:{width:"70px"}},[t._v(" Balance: ")]),s("td",[s("span",{staticClass:"text-currency"},[t._v(t._s(t.currencyFormat(t.user.amount||0)))])])]),s("tr",[s("th",{staticStyle:{width:"70px"}},[t._v(" Current Rate: ")]),s("td",[s("span",{staticClass:"text-currency"},[t._v(t._s(t.currencyFormat(t.user.rate||0)))])])]),s("tr",[s("th",{staticStyle:{width:"70px"}},[t._v(" New Rate: ")]),s("td",[s("InputNumber",{staticClass:"mb-0",attrs:{required:""},model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}})],1)])])])])],1)},d=[],u=s("78b5"),m=s("c652"),p={name:"EditRate",components:{InputNumber:m["a"],Block:n["a"],Modal:u["a"]},props:{visible:{type:Boolean,default:!1},user:{type:Object,default:()=>({})}},data(){return{isLoading:!1,rate:0}},computed:{validated(){const{rate:t,user:e}=this,s=Number(t),a=Number(e.rate);return s&&s!==a}},watch:{"user.rate":{handler(t){this.rate=t||0},immediate:!0}},methods:{onClose(){this.isLoading||this.$emit("close")},submit(){this.isLoading=!0,Object(o["e"])(this.user.id,this.rate).then(()=>{this.$toast.success("Rate edited successfully!"),this.$emit("success")}).catch(t=>{t?this.$toast.error(t):this.$toast.error("There was an error while editing rate!")}).finally(()=>{this.isLoading=!1,this.close()})},close(){this.isLoading||this.$emit("close")}}},h=p,g=(s("a123"),s("2877")),b=Object(g["a"])(h,c,d,!1,null,"e87a1e98",null),_=b.exports,f=s("311b"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Add a new user","hide-close-button":!1,"hide-controls":"","modal-style":"max-width: 700px;",visible:t.visible,loading:t.isLoading},on:{close:t.close}},[s("template",{slot:"header"},[s("FlexBox",{attrs:{"align-items":"center"}},[s("Block",[s("AvatarImage",{attrs:{path:t.user.photo_url,size:"medium"}})],1),s("FlexBox",{staticClass:"ml-4",attrs:{direction:"column"}},[s("h5",{staticClass:"mb-1"},[s("FlexBox",[s("Block",{staticClass:"mr-2"},[t.user.organization_name?s("span",[t._v(t._s(t.user.organization_name))]):s("i",[t._v("N/A")])]),t.user.is_kyc_verified?t._e():s("Block",[s("Icon",{attrs:{title:"Not verified",type:"si",name:"info",size:"regular",weight:"bold",color:"danger"}})],1)],1)],1),s("FlexBox",[s("Icon",{staticClass:"mr-2",attrs:{name:"map-marker",size:"small",color:"muted"}}),s("Block",[t.user.address?s("span",[t._v(t._s(t.user.address))]):s("i",[t._v("Address not set "),s("Icon",{attrs:{type:"si",name:"info",color:"danger",weight:"bold"}})],1)])],1),s("FlexBox",[s("Icon",{staticClass:"mr-1",attrs:{name:"phone",color:"muted",size:"small"}}),t.user.phone?s("span",[t._v(" "+t._s(t.user.phone)+" ")]):s("i",[t._v("Phone not set "),s("Icon",{attrs:{type:"si",name:"info",size:"small",color:"danger",weight:"bold"}})],1)],1)],1)],1)],1),s("FlexBox",{staticClass:"border",attrs:{"align-items":"stretch",justify:"center"}},[s("Block",[s("Button",{staticClass:"action-button border-right border-left user-menu",attrs:{title:"Credit balance",color:"light"},on:{click:function(e){return t.$emit("credit",Object.assign({},t.user))}}},[s("FlexBox",{attrs:{direction:"column","align-items":"center"}},[s("Icon",{attrs:{type:"si",name:"plus",size:"regular"}}),s("span",{staticClass:"mt-1"},[t._v("Credit")])],1)],1),s("Button",{staticClass:"action-button border-right user-menu",attrs:{title:"edit credit rate",color:"light"},on:{click:function(e){return t.$emit("editRate",Object.assign({},t.user))}}},[s("FlexBox",{attrs:{direction:"column","align-items":"center"}},[s("Icon",{attrs:{type:"fa",name:"sort-numeric-desc",size:"regular"}}),s("span",{staticClass:"mt-1"},[t._v("Rate")])],1)],1),s("Button",{staticClass:"action-button border-right user-menu",attrs:{title:"edit KYC details",color:"light"},on:{click:function(e){return t.$emit("editKyc",Object.assign({},t.user))}}},[s("FlexBox",{attrs:{direction:"column","align-items":"center"}},[s("Icon",{attrs:{name:"shield",size:"regular"}}),s("span",{staticClass:"mt-1"},[t._v("KYC")])],1)],1),s("Button",{staticClass:"action-button border-right user-menu",attrs:{title:"edit sender id",color:"light"},on:{click:function(e){return t.$emit("editSenderId",Object.assign({},t.user))}}},[s("FlexBox",{attrs:{direction:"column","align-items":"center"}},[s("Icon",{attrs:{name:"tty",size:"regular"}}),s("span",{staticClass:"mt-1"},[t._v("Sender")])],1)],1),s("Button",{staticClass:"action-button border-right user-menu",attrs:{title:"Generate Temporary password",color:"light"},on:{click:function(e){return t.$emit("getTempPass",Object.assign({},t.user))}}},[s("FlexBox",{attrs:{direction:"column","align-items":"center"}},[s("Icon",{attrs:{name:"key",size:"regular"}}),s("span",{staticClass:"mt-1"},[t._v("Password")])],1)],1)],1)],1),s("div",{staticClass:"scrollable bg-gray-lighter",staticStyle:{"max-height":"300px"}},[s("FlexBox",{staticClass:"mx-4 mb-3",attrs:{wrap:"wrap"}},[s("FlexBox",{staticClass:"m-2",attrs:{"align-items":"stretch",flex:"auto"}},[s("Block",{staticClass:"p-3"},[s("table",{staticClass:"table-borderless"},[s("tr",[s("th",{attrs:{scope:"row"}},[t._v(" Admin: ")]),s("td",[t._v(" "+t._s(t.user.first_name)+" "+t._s(t.user.last_name)+" ")])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v(" Email: ")]),s("td",[s("a",{staticClass:"link",attrs:{href:"mailto:"+t.user.email}},[t._v(" "+t._s(t.user.email)+" ")]),t.user.is_email_verified?s("Icon",{attrs:{type:"si",title:"Verified email",name:"check",color:"success",weight:"bold"}}):s("Icon",{attrs:{type:"si",title:"Email not verified",name:"info",color:"danger",weight:"bold"}})],1)]),s("tr",[s("th",[t._v(" Joined on: ")]),s("td",[t._v(" "+t._s(t.duration(t.user.created_at,!1))+" ")])]),s("tr",[s("th",[t._v(" KYC Status: ")]),s("td",[t.user.is_kyc_verified?s("span",[t._v(" Verified "),s("Icon",{attrs:{type:"si",name:"check",color:"success",weight:"bold"}})],1):s("span",[t._v(" Not verified "),s("Icon",{attrs:{type:"si",name:"info",color:"danger",weight:"bold"}})],1)])]),s("tr",[s("th",[t._v(" Registration number: ")]),s("td",[t._v(" "+t._s(t.user.registration_number||"N/A")+" ")])]),s("tr",[s("th",[t._v(" PAN number: ")]),s("td",[t._v(" "+t._s(t.user.pan_number||"N/A")+" ")])])])])],1),s("FlexBox",{staticClass:"m-2",attrs:{"align-items":"stretch",flex:"auto"}},[s("Block",{staticClass:"p-3 flex-auto"},[s("p",{staticClass:"font-weight-bold mb-2"},[t._v(" Sender IDs: ")]),s("table",{staticClass:"providers"},[s("tbody",[t.user.sender_id_ntc?s("tr",[s("th",{staticClass:"font-weight-normal text-uppercase",attrs:{scope:"row"}},[t._v(" Ntc: ")]),s("td",[t._v(t._s(t.user.sender_id_ntc))])]):t._e(),t.user.sender_id_ncell?s("tr",[s("th",{staticClass:"font-weight-normal text-uppercase",attrs:{scope:"row"}},[t._v(" Ncell: ")]),s("td",[t._v(t._s(t.user.sender_id_ncell))])]):t._e(),t.user.sender_id_smartcell?s("tr",[s("th",{staticClass:"font-weight-normal text-uppercase",staticStyle:{width:"110px"},attrs:{scope:"row"}},[t._v(" Smartcell: ")]),s("td",[t._v(t._s(t.user.sender_id_smartcell))])]):t._e()])])])],1)],1)],1)],2)},y=[],w=s("fce3"),x=s("9559"),C=s("5d35"),S=s("ad4f"),k={name:"ViewUser",components:{Button:S["a"],Icon:C["a"],Block:n["a"],FlexBox:x["a"],AvatarImage:w["a"],Modal:u["a"]},props:{user:{type:Object,default(){return{labels:[]}}},userId:{type:[Number,String],default:null},visible:{type:Boolean,default:!1}},data(){return{isLoading:!1}},methods:{close(){this.isLoading||this.$emit("close")}}},B=k,I=(s("d54c"),Object(g["a"])(B,v,y,!1,null,"830bc658",null)),$=I.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Edit Sender ID","hide-controls":"","modal-style":"max-width: 500px;",visible:t.visible},on:{close:t.close}},[s("Block",{staticClass:"px-4 pb-2"},[s("Form",{on:{submit:t.onSubmit}},[s("InputText",{attrs:{title:"NTC"},model:{value:t.sender_ids.sender_id_ntc,callback:function(e){t.$set(t.sender_ids,"sender_id_ntc",e)},expression:"sender_ids.sender_id_ntc"}}),s("InputText",{attrs:{title:"NCELL"},model:{value:t.sender_ids.sender_id_ncell,callback:function(e){t.$set(t.sender_ids,"sender_id_ncell",e)},expression:"sender_ids.sender_id_ncell"}}),s("InputText",{attrs:{title:"SMARTCELL"},model:{value:t.sender_ids.sender_id_smartcell,callback:function(e){t.$set(t.sender_ids,"sender_id_smartcell",e)},expression:"sender_ids.sender_id_smartcell"}}),s("FlexBox",{attrs:{justify:"end"}},[s("Button",{staticClass:"mr-2",attrs:{type:"submit",color:"primary",disabled:!t.canUpdate||t.isSubmitting,loading:t.isSubmitting}},[t._v(" Update ")]),s("Button",{attrs:{color:"secondary"},on:{click:t.close}},[t._v(" Cancel ")])],1)],1)],1)],1)},j=[],E=s("7fb4"),O=s("6436"),L={name:"EditSenderID",components:{Block:n["a"],Form:O["a"],Button:S["a"],InputText:E["a"],FlexBox:x["a"],Modal:u["a"]},props:{user:{type:Object,default(){return{}}},visible:{type:Boolean,default:!1}},data(){return{sender_ids:{sender_id_ncell:"",sender_id_ntc:"",sender_id_smartcell:""},error:{},isSubmitting:!1,isUserFormShown:!0}},computed:{canUpdate(){const{user:t,sender_ids:e}=this,{sender_id_ncell:s,sender_id_ntc:a,sender_id_smartcell:i}=e;return e.sender_id_ncell&&a&&i&&(t.sender_id_ncell!==s||t.sender_id_ntc!==a||t.sender_id_smartcell!==i)}},watch:{visible:{handler(t){if(t){const{sender_id_ncell:t,sender_id_ntc:e,sender_id_smartcell:s}=this.user;this.sender_ids={sender_id_ncell:t,sender_id_ntc:e,sender_id_smartcell:s}}},immediate:!0}},methods:{onSubmit(){this.isSubmitting=!0;const{user:t,sender_ids:e}=this;Object(o["f"])(this.user.id,e).then(()=>{this.error={},this.$emit("success",{...t,...e}),this.$toast.success("Sender IDs updated successfully."),this.close()}).catch(t=>{"object"===typeof t?this.error=t:this.$toast.error(t)}).finally(()=>{this.isSubmitting=!1})},close(){this.$emit("close"),this.sender_ids={sender_id_ncell:"",sender_id_ntc:"",sender_id_smartcell:""}}}},U=L,P=Object(g["a"])(U,F,j,!1,null,"311f3d1e",null),M=P.exports,z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Edit KYC Details","hide-controls":"","modal-style":"max-width: 500px;",visible:t.visible},on:{close:t.close}},[s("Block",{staticClass:"px-4 pb-2"},[s("Form",{on:{submit:t.onSubmit}},[s("InputText",{attrs:{error:t.error.organization_name,title:"Organization name"},model:{value:t.kyc.organization_name,callback:function(e){t.$set(t.kyc,"organization_name",e)},expression:"kyc.organization_name"}}),s("InputText",{attrs:{error:t.error.registration_number,title:"Registration number"},model:{value:t.kyc.registration_number,callback:function(e){t.$set(t.kyc,"registration_number",e)},expression:"kyc.registration_number"}}),s("InputText",{attrs:{error:t.error.pan_number,title:"PAN number"},model:{value:t.kyc.pan_number,callback:function(e){t.$set(t.kyc,"pan_number",e)},expression:"kyc.pan_number"}}),s("FlexBox",{attrs:{justify:"end"}},[s("Button",{staticClass:"mr-2",attrs:{type:"submit",color:"primary",disabled:!t.canUpdate||t.isSubmitting,loading:t.isSubmitting}},[t._v(" Update ")]),s("Button",{attrs:{color:"secondary"},on:{click:t.close}},[t._v(" Cancel ")])],1)],1)],1)],1)},T=[],N={name:"EditKycDetails",components:{Block:n["a"],Form:O["a"],Button:S["a"],InputText:E["a"],FlexBox:x["a"],Modal:u["a"]},props:{user:{type:Object,default(){return{}}},visible:{type:Boolean,default:!1}},data(){return{kyc:{organization_name:"",registration_number:"",pan_number:""},error:{},isSubmitting:!1,isUserFormShown:!0}},computed:{canUpdate(){const{user:t,kyc:e}=this,{organization_name:s,registration_number:a,pan_number:i}=e;return s&&a&&i&&(t.organization_name!==s||t.registration_number!==a||t.pan_number!==i)}},watch:{visible:{handler(t){if(t){const{organization_name:t,registration_number:e,pan_number:s}=this.user;this.kyc={organization_name:t,registration_number:e,pan_number:s}}},immediate:!0}},methods:{onSubmit(){this.isSubmitting=!0,Object(o["c"])(this.user.id,this.kyc).then(t=>{this.error={},this.$emit("success",{...t}),this.$toast.success("KYC updated successfully."),this.close()}).catch(t=>{"object"===typeof t?this.error=t:this.$toast.error(t)}).finally(()=>{this.isSubmitting=!1})},close(){this.$emit("close"),this.kyc={organization_name:"",registration_number:"",pan_number:""}}}},A=N,D=Object(g["a"])(A,z,T,!1,null,"0f458353",null),R=D.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{visible:t.visible,title:"Generate temporary password","modal-style":"max-width: 450px","hide-controls":""}},[s("Block",{staticClass:"px-4 pb-2"},[s("CardLoader",{attrs:{"is-loading":t.isLoading}},[t.isLoading?s("p",{staticClass:"py-4"},[t._v(" Generating a temporary password... ")]):t.password?s("Block",[s("div",{staticClass:"input-group input-group-lg"},[s("input",{staticClass:"form-control border",attrs:{id:"token",readonly:""},domProps:{value:t.password}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-secondary",attrs:{id:"clip",type:"button","data-clipboard-target":"#token"}},[s("Icon",{attrs:{name:"clipboard"}})],1)])]),s("p",{staticClass:" mt-2 mb-3 text-primary"},[t._v(" Make sure to copy this password. It won't be shown again after you close this modal or leave this page. ")])]):s("p",{staticClass:"py-4"},[t._v(" There was an error while generating temporary password! ")])],1),s("FlexBox",{attrs:{justify:"end"}},[s("Button",{staticClass:"ml-2",attrs:{color:"secondary"},on:{click:t.close}},[t._v(" Close ")])],1)],1)],1)},V=[],G=s("b311"),q=s.n(G),Y=s("c2cd"),W={name:"GetTemporaryPassword",components:{CardLoader:Y["a"],Icon:C["a"],Button:S["a"],FlexBox:x["a"],Block:n["a"],Modal:u["a"]},props:{visible:{type:Boolean,default:!1},user:{type:Object,default:()=>({})}},data(){return{isLoading:!1,password:""}},watch:{visible:{handler(t){t&&this.getTempPass()},immediate:!0}},mounted(){this.clipboard=new q.a("#clip")},methods:{getTempPass(){this.isLoading=!0,Object(o["a"])(this.user.id).then(({mimic_password:t})=>{this.password=t}).catch(t=>{t?this.$toast.error(t):this.$toast.error("There was an error while generating temporary password!")}).finally(()=>{this.isLoading=!1})},close(){this.isLoading||(this.password=null,this.$emit("close"))}}},H=W,J=Object(g["a"])(H,K,V,!1,null,"100dbde4",null),Q=J.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Column",{staticClass:"mb-4"},[s("UpdateStatus",{attrs:{field:t.targetUser.organization_name||t.targetUser.email,status:t.targetUser.status,visible:t.isStatusModalShown,submission:t.updateStatus},on:{success:t.setStatus,close:function(e){t.isStatusModalShown=!1}}}),s("CardBase",{staticClass:"p-4 mb-3"},[s("Row",[s("Column",{attrs:{md:"3"}},[s("InputSelect",{attrs:{title:"Status","option-value":"value","option-text":"name",options:t.statuses},on:{select:function(e){return t.$emit("reload")}},model:{value:t.dataFilters.status,callback:function(e){t.$set(t.dataFilters,"status",e)},expression:"dataFilters.status"}})],1),s("Column",{attrs:{md:"3"}}),s("Column",{attrs:{md:"6"}},[s("Search",{staticClass:"mt-4 pt-1",attrs:{debounce:500},on:{change:t.onSearch},model:{value:t.dataFilters.keyword,callback:function(e){t.$set(t.dataFilters,"keyword",e)},expression:"dataFilters.keyword"}})],1)],1)],1),s("CardBase",[s("CardLoader",{attrs:{"is-loading":t.isLoading}},[s("Block",{staticClass:"table-responsive"},[t.users.length?s("table",{staticClass:"table table-hover m-0"},[s("thead",{staticClass:"bg-gray-lighter"},[s("tr",[s("th",{staticStyle:{width:"60px"}},[t._v(" # ")]),s("th",{staticStyle:{width:"60px"}}),s("th",[t._v(" Admin ")]),s("th",[t._v(" Organization ")]),s("th",[t._v(" Email ")]),s("th",[t._v(" Phone ")]),s("th",[t._v(" Balance ")]),s("th",[t._v(" Rate ")]),s("th",[t._v(" Last online ")]),s("th",{staticClass:"text-center"},[t._v(" Status ")]),s("th",{staticStyle:{width:"100px"}})])]),s("tbody",t._l(t.users,(function(e){return s("tr",{key:e.id,staticClass:"cursor-pointer",on:{click:function(s){return t.$emit("view",e)}}},[s("td",[t._v(" "+t._s(e.id)+" ")]),s("td",[s("ImageColumn",{attrs:{url:e.photo_url,icon:"fa fa-building-o"}})],1),s("td",[t._v(" "+t._s(e.first_name+" "+e.last_name)+" ")]),s("td",{staticClass:"description",staticStyle:{"min-width":"200px"}},[s("FlexBox",[s("Block",{staticClass:"mr-2"},[e.organization_name?s("span",[t._v(t._s(e.organization_name))]):s("i",[t._v("N/A")])]),e.is_kyc_verified?t._e():s("Block",[s("Icon",{attrs:{title:"Not verified",type:"si",name:"info",size:"regular",weight:"bold",color:"danger"}})],1)],1)],1),s("td",[e.email?s("a",{staticClass:"link",attrs:{href:"mailto:"+e.email}},[t._v(" "+t._s(e.email)+" ")]):s("span",[t._v("N/A")])]),s("td",[e.phone?s("a",{staticClass:"link",attrs:{href:"tel:"+e.phone},on:{click:function(t){t.stopPropagation()}}},[t._v(" "+t._s(e.phone)+" ")]):s("span",[t._v("N/A")])]),s("td",[t._v(" "+t._s(t.currencyFormat(e.amount)||0)+" ")]),s("td",[t._v(" "+t._s(t.currencyFormat(e.rate)||0)+" ")]),s("td",[t._v(" "+t._s(e.last_online)+" ")]),s("td",{staticClass:"text-center"},[s("StatusColumn",{attrs:{status:e.is_active},on:{change:function(s){return t.onStatusUpdate(e,s)}}})],1),s("td",[s("FlexBox",{attrs:{"align-items":"center",justify:"center"}},[s("Button",{staticClass:"p-2 mx-1 text-primary",attrs:{color:"light",title:"credit balance"},on:{click:function(s){return t.$emit("credit",e)}}},[s("Icon",{attrs:{type:"si",name:"plus",size:"regular"}})],1),s("Button",{staticClass:"p-2 mx-1",attrs:{color:"light",title:"edit credit rate"},on:{click:function(s){return t.$emit("editRate",e)}}},[s("Icon",{attrs:{type:"fa",name:"sort-numeric-desc",size:"regular"}})],1)],1)],1)])})),0)]):s("Block",{staticClass:"min-height-300 d-flex flex-row justify-content-center align-items-center"},[s("h4",{staticClass:"text-gray-dark font-w300"},[t._v(" users not Found ")])])],1)],1)],1),s("Pagination",{staticClass:"my-2 my-lg-0",attrs:{pagination:t.pagination},on:{change:t.changePagination}})],1)},Z=[],tt=s("2ef0"),et=s("020b"),st=s("0af5"),at=s("dd08"),it=s("ac13"),rt=s("0f8e"),nt=s("b30d"),ot=s("27dc"),lt=s("1b32"),ct=s("1824"),dt={name:"UsersTable",components:{UpdateStatus:ct["a"],FlexBox:x["a"],Button:S["a"],Block:n["a"],Column:lt["a"],Row:ot["a"],Icon:C["a"],ImageColumn:nt["a"],CardBase:et["a"],InputSelect:st["a"],Search:at["a"],CardLoader:Y["a"],Pagination:rt["a"],StatusColumn:it["a"]},props:{users:{type:Array,default:null},dataFilters:{type:Object,default(){return{}}},pagination:{type:Object,default(){return{}}},isLoading:{type:Boolean}},data(){return{targetUser:{},isStatusModalShown:!1,statuses:[{name:"All",value:""},{name:"Active",value:1},{name:"Inactive",value:0}]}},methods:{setStatus(){const t=this.targetUser,e=Object(tt["findIndex"])(this.users,["id",t.id]);this.users[e].is_active=t.status?1:0},updateStatus(){const{id:t,status:e}=this.targetUser;return Object(o["g"])(t,e)},onStatusUpdate(t,e){this.targetUser={...t,status:e},this.isStatusModalShown=!0},onSearch(){this.pagination.current=1,this.$emit("reload")},changePagination(t){this.pagination.current=t,this.$emit("reload",t)}}},ut=dt,mt=Object(g["a"])(ut,X,Z,!1,null,null,null),pt=mt.exports,ht={name:"Users",components:{GetTemporaryPassword:Q,EditKycDetails:R,EditSenderID:M,ViewUser:$,CreditBalance:f["a"],EditRate:_,Block:n["a"],UsersTable:pt},data(){return{isViewModalShown:!1,isCreditFormShown:!1,isEditRateModalShown:!1,isEditSenderIdModalShown:!1,isEditKycModalShown:!1,isDeleteModalShown:!1,isGetTempPasswordModalShown:!1,targetUser:{},isLoading:!1,dataFilters:{status:1,keyword:""},pagination:{pages:1,current:1,perPage:15},userList:[]}},computed:{...Object(r["c"])(["users"])},created(){this.fetchData(),this.$store.dispatch("listUsers")},mounted(){this.$bus.on("router-link-clicked",()=>{this.isLoading||this.fetchData()})},beforeDestroy(){this.$bus.removeAllListeners("router-link-clicked")},methods:{fetchData(t,e={}){this.isEmpty(e)||(this.targetUser=e),this.isLoading=!0;const{status:s,keyword:a}=this.dataFilters;Object(o["b"])({page:t,is_active:s||null,keyword:a||null,per_page:this.pagination.perPage}).then(({data:t,meta:e})=>{this.userList=t,this.pagination=Object(l["b"])(e),this.isLoading=!1}).catch(t=>{"request-cancel"!==t&&(this.$toast.error("There was an error while fetching data."),this.isLoading=!1)})},onViewOrganization({...t}){this.targetUser=t,this.isViewModalShown=!0},onCreditBalance({...t}){this.targetUser=t,this.isCreditFormShown=!0},onEditRate({...t}){this.targetUser=t,this.isEditRateModalShown=!0},onEditKyc({...t}){this.targetUser=t,this.isEditKycModalShown=!0},onEditSenderId({...t}){this.targetUser=t,this.isEditSenderIdModalShown=!0},onGetTempPass({...t}){this.targetUser=t,this.isGetTempPasswordModalShown=!0}}},gt=ht,bt=Object(g["a"])(gt,a,i,!1,null,null,null);e["default"]=bt.exports},"7b23":function(t,e,s){},a123:function(t,e,s){"use strict";s("a42b")},a42b:function(t,e,s){},b30d:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"image-wrapper bg-gray d-flex justify-content-center align-items-center rounded-circle"},[t.url&&t.showImage?s("img",{staticClass:"img-fluid rounded-circle",attrs:{alt:"",src:t.url},on:{error:function(e){t.showImage=!1}}}):s("Icon",{attrs:{type:t.iconType,name:t.icon}})],1)},i=[],r=s("5d35"),n={name:"ImageColumn",components:{Icon:r["a"]},props:{url:{type:String,default:""},iconType:{type:String,default:"si"},icon:{type:String,default:"user"}},data(){return{showImage:!0}},watch:{url:{handler(){this.showImage=!0}}}},o=n,l=(s("40b1"),s("2877")),c=Object(l["a"])(o,a,i,!1,null,"76c50589",null);e["a"]=c.exports},b994:function(t,e,s){},c652:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("InputBase",{attrs:{title:t.title,required:t.required,error:t.error,"label-class":t.labelClass},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.id,i=e.isInvalid;return[s("input",{ref:"input",staticClass:"form-control",class:{"is-invalid":i,"input-lg":"lg"===t.size},attrs:{id:a,type:"number",min:t.min,max:t.max,step:t.step,required:!!t.required,placeholder:t.placeholder,disabled:t.disabled,autofocus:t.autofocus},domProps:{value:t.value},on:{input:t.updateInput}})]}}])})},i=[],r=s("850b"),n={name:"InputNumber",components:{InputBase:r["a"]},props:{title:{type:String,default:""},value:{type:[Number,String],default:0},required:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},error:{type:String,default:""},size:{type:String,default:""},min:{type:Number,default:null},max:{type:Number,default:null},step:{type:Number,default:null},labelClass:{type:String,default:""}},methods:{updateInput(){const{value:t}=this.$refs.input;this.$emit("input",t),this.$emit("change",t)}}},o=n,l=s("2877"),c=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=c.exports},c893:function(t,e,s){},d54c:function(t,e,s){"use strict";s("3d73")},d855:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Block",{class:{"position-relative":t.visible}},[t._t("default"),t.visible?s("Block",{staticClass:"drop-shadow"}):t._e()],2)},i=[],r=s("0814"),n={name:"ForeShadow",components:{Block:r["a"]},props:{visible:{type:Boolean,default:!1}}},o=n,l=(s("00dc"),s("2877")),c=Object(l["a"])(o,a,i,!1,null,"d9579a32",null);e["a"]=c.exports},e1778:function(t,e,s){"use strict";s.d(e,"d",(function(){return i})),s.d(e,"c",(function(){return r})),s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return o}));var a=s("9819");function i(t){const{cancelPrevious:e=!0}=t;return Object(a["a"])({url:"deposits",method:"get",params:t,cancelPrevious:e})}function r(t){return Object(a["a"])({url:"deposits/balance",method:"get",params:t})}function n(t){return Object(a["a"])({url:"deposits",method:"post",data:t})}function o(t){return Object(a["a"])({url:"deposits/aggregate",method:"get",params:t})}}}]);