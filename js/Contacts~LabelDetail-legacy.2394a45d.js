(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Contacts~LabelDetail"],{"020b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{staticClass:"card-base block custom-box-shadow"},[t._t("default")],2)},s=[],o=a("0814"),i={name:"CardBase",components:{Block:o["a"]}},c=i,l=a("2877"),r=Object(l["a"])(c,n,s,!1,null,"64f32f13",null);e["a"]=r.exports},"0af5":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("InputBase",{attrs:{title:t.title,required:t.required,info:t.info,error:t.error},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.id,s=e.isInvalid;return[a("select",{ref:"input",staticClass:"form-control",class:{"is-invalid":s},attrs:{id:n,required:t.required,placeholder:t.placeholder,disabled:t.disabled},domProps:{value:t.value},on:{input:t.updateInput}},t._l(t.options,(function(e,n){return a("option",{key:n,attrs:{disabled:e.disabled,hidden:e.hidden},domProps:{selected:e.selected,value:t.getOptionValue(e)}},[t._v(" "+t._s(t.getOptionText(e))+" ")])})),0)]}}])})},s=[],o=(a("a9e3"),a("850b")),i={name:"InputSelect",components:{InputBase:o["a"]},props:{title:{type:String,default:""},options:{type:Array,default:function(){return[]}},required:{type:Boolean,default:!1},value:{type:[String,Object,Number,Boolean],default:null},optionValue:{type:String,default:""},optionText:{type:String,default:""},error:{type:String,default:""},placeholder:{type:String,default:""},info:{type:String,default:""},disabled:{type:Boolean}},methods:{updateInput:function(){this.$emit("input",this.$refs.input.value),this.$emit("select",this.$refs.input.value)},getOptionValue:function(t){return this.optionValue?t[this.optionValue]:t},getOptionText:function(t){return this.optionText?t[this.optionText]:t}}},c=i,l=a("2877"),r=Object(l["a"])(c,n,s,!1,null,null,null);e["a"]=r.exports},"0ed0":function(t,e,a){},"0f8e":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column-reverse",justify:"between","align-items":"end"}},[a("Block",{staticClass:"p-2"},[t._v(" "+t._s(t.pagination.message)+" ")]),a("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column",justify:"between","align-items":"end"}},[a("InputSelect",{staticClass:"my-2 my-lg-0",attrs:{options:t.perPages},on:{select:function(e){return t.$emit("change")}},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}}),a("nav",{staticClass:"ml-3"},[a("ul",{staticClass:"pagination disable-user-select mb-0"},[a("li",{staticClass:"page-item",class:{disabled:!t.isPreviousable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current-1)}}},[a("span",{staticClass:"page-link"},[t._v("Previous")])]),t._l(t.pages,(function(e,n){return a("li",{key:n,staticClass:"page-item",class:{active:t.current===e}},[a("a",{staticClass:"page-link btn-primary",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCurrent(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!t.isNextable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current+1)}}},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)])],1)],1)},s=[],o=(a("a9e3"),a("2ef0")),i=a("9559"),c=a("0814"),l=a("0af5"),r={name:"Pagination",components:{InputSelect:l["a"],Block:c["a"],FlexBox:i["a"]},props:{visibleLength:{type:Number,default:5},pagination:{type:Object,default:function(){return{}}}},data:function(){return{offset:0,perPages:[5,15,25,50,100],pages:[]}},computed:{current:function(){return this.pagination.current||1},length:function(){return this.pagination.pages||1},isNextable:function(){return this.length>this.current},isPreviousable:function(){return this.current>1}},watch:{length:{handler:function(){this.unWatchCurrentPageValue();var t=this.visibleLength,e=Math.ceil(t/2)+(t%2?0:1);this.offset=t-(t-e+1),this.generatePagination(),this.length>this.visibleLength&&(this.unWatchCurrentPageValue=this.$watch("current",this.generatePagination))},immediate:!0}},methods:{unWatchCurrentPageValue:function(){},generatePagination:function(){var t=this.current,e=this.offset,a=this.length,n=this.visibleLength,s=t-e;s<1&&(s=1);var i=s+n;i>a&&(i=a+1,s=i-n,s<1&&(s=1)),this.pages=Object(o["range"])(s,i)},setCurrent:function(t){var e=t;t<=1?e=1:t>=this.length&&(e=this.length),e!==this.current&&this.$emit("change",e)}}},u=r,d=(a("5148"),a("2877")),p=Object(d["a"])(u,n,s,!1,null,"64c09d8e",null);e["a"]=p.exports},1824:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Confirmation",visible:t.visible,loading:t.loading,"modal-style":"max-width: 450px;"},on:{success:t.onSuccess,close:t.close}},[a("p",{staticClass:"px-4"},[t._v(" Are you sure you want to "+t._s(t.getState)+" "),a("span",[t._v(t._s(t.field))]),t._v("? ")])])},s=[],o=(a("d3b7"),a("78b5")),i={name:"UpdateStatus",components:{Modal:o["a"]},props:{field:{type:void 0,default:""},visible:{type:Boolean,default:!1},status:{type:Boolean,default:!1},state:{type:String,default:null},submission:{type:Function,default:function(){return Promise.reject(new Error("Unknown error occured"))}}},data:function(){return{loading:!1}},computed:{getState:function(){var t=this.state;return t||(this.status?"activate":"deactivate")}},methods:{onSuccess:function(){var t=this;this.loading=!0,this.submission().then((function(){t.$toast.success("Status updated successfully."),t.$emit("success"),t.close(!0)})).catch((function(e){t.$toast.error(e.message||e||"There was an error while updating status.")})).finally((function(){t.loading=!1}))},close:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading&&!t||this.$emit("close")}}},c=i,l=a("2877"),r=Object(l["a"])(c,n,s,!1,null,null,null);e["a"]=r.exports},"2c75":function(t,e,a){},"36f5":function(t,e,a){"use strict";a("8299")},"40b1":function(t,e,a){"use strict";a("c893")},5148:function(t,e,a){"use strict";a("b994")},5168:function(t,e,a){"use strict";a("2c75")},"5c00":function(t,e,a){"use strict";a("7213")},7213:function(t,e,a){},8299:function(t,e,a){},8579:function(t,e,a){"use strict";a("9b18")},"96e9":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CardLoader",{attrs:{"is-loading":t.isFetchingData}},[a("Form",{staticClass:"px-2 pl-3 pb-2",on:{submit:t.onSubmit}},[a("Block",{staticClass:"w-100"},[a("Row",[a("Column",{attrs:{sm:"2"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("ImageInput",{attrs:{image:t.contact.photo_url},on:{success:t.onPhotoUpload}})],1)],1),a("Column",{attrs:{sm:"10"}},[a("InputText",{attrs:{type:"text",title:"Full Name",error:t.error.name},model:{value:t.contact.name,callback:function(e){t.$set(t.contact,"name",e)},expression:"contact.name"}})],1)],1),a("Row",[a("Column",{staticClass:"d-none d-sm-block",attrs:{sm:"2"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"id-card-o",size:"large",color:"muted"}})],1)],1),a("Column",{attrs:{sm:"5"}},[a("InputPhone",{attrs:{error:t.error.phone,required:"",title:"Mobile Number"},model:{value:t.contact.phone,callback:function(e){t.$set(t.contact,"phone",e)},expression:"contact.phone"}})],1),a("Column",{staticClass:"d-none d-sm-block",attrs:{sm:"5"}},[a("InputText",{attrs:{type:"text",title:"Email",error:t.error.email},model:{value:t.contact.email,callback:function(e){t.$set(t.contact,"email",e)},expression:"contact.email"}})],1)],1),a("Row",[a("Column",{staticClass:"d-none d-sm-block",attrs:{sm:"2"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"map",size:"large",color:"muted"}})],1)],1),a("Column",{attrs:{sm:"5"}},[a("InputText",{attrs:{type:"text",title:"Address",error:t.error.address},model:{value:t.contact.address,callback:function(e){t.$set(t.contact,"address",e)},expression:"contact.address"}})],1),a("Column",{staticClass:"d-none d-sm-block",attrs:{sm:"5"}},[a("DatePicker",{attrs:{title:"Date of Birth",error:t.error.dob},model:{value:t.contact.dob,callback:function(e){t.$set(t.contact,"dob",e)},expression:"contact.dob"}})],1)],1),a("Row",[a("Column",{staticClass:"d-none d-sm-block",attrs:{sm:"2"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{staticClass:"fa-flip-horizontal",attrs:{name:"tags",size:"large",color:"muted"}})],1)],1),a("Column",{attrs:{sm:"10"}},[a("InputBase",{attrs:{title:"Labels"}},[a("MultiSelect",{attrs:{multiple:!0,"close-on-select":!0,label:"name","track-by":"id",placeholder:"Select labels",limit:2,options:t.labels},model:{value:t.contact.labels,callback:function(e){t.$set(t.contact,"labels",e)},expression:"contact.labels"}})],1)],1)],1),a("Row",[a("Column",{staticClass:"d-none d-sm-block",attrs:{sm:"2"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{staticClass:"fa-rotate-90",attrs:{name:"file",size:"large",color:"muted"}})],1)],1),a("Column",{staticClass:"d-none d-sm-block",attrs:{sm:"10"}},[a("InputTextArea",{attrs:{title:"Description",rows:"3",error:t.error.description},model:{value:t.contact.description,callback:function(e){t.$set(t.contact,"description",e)},expression:"contact.description"}})],1)],1)],1),a("FlexBox",{staticClass:"px-2",attrs:{justify:"end"}},[a("Button",{staticClass:"mr-2",attrs:{type:"submit",color:"primary",disabled:t.isLoading,loading:t.isLoading}},[t._v(" Save ")]),a("Button",{attrs:{color:"secondary"},on:{click:function(e){return t.$emit("cancel")}}},[t._v(" Cancel ")])],1)],1)],1)},s=[],o=(a("4160"),a("d81d"),a("d3b7"),a("159b"),a("53ca")),i=a("5530"),c=a("2f62"),l=a("2ef0"),r=a("6436"),u=a("8c7b"),d=a("7fb4"),p=a("5d35"),h=a("9559"),m=a("822e"),f=a("c6b1"),b=a("ad4f"),g=a("c2cd"),v=a("850b"),C=a("8d2a"),x=a("0022"),y=a("27dc"),w=a("1b32"),_=a("0814"),S={name:"ContactForm",components:{Block:_["a"],Row:y["a"],Column:w["a"],DatePicker:x["a"],MultiSelect:C["a"],InputBase:v["a"],CardLoader:g["a"],Button:b["a"],InputTextArea:f["a"],InputPhone:m["a"],FlexBox:h["a"],Icon:p["a"],InputText:d["a"],ImageInput:u["a"],Form:r["a"]},props:{value:{type:Object,default:function(){return{}}},error:{type:Object,default:function(){return{}}},isLoading:{type:Boolean}},data:function(){return{resultLabels:[],contact:{name:"",photo:"",photo_url:"",phone:"",email:"",dob:"",labels:[],description:""},isFetchingData:!0}},computed:Object(i["a"])({},Object(c["c"])(["labels"])),watch:{value:{handler:function(){var t=this.value,e=this.contact;this.contact=Object(i["a"])(Object(i["a"])({},e),t)},immediate:!0},labels:{handler:function(t){var e=this.contact.labels;this.resultLabels=t.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{is_selected:!!Object(l["find"])(e,(function(t){return"object"===Object(o["a"])(t)?t.id:t}))})}))}}},created:function(){var t=this;this.listLabels({}).finally((function(){t.isFetchingData=!1}))},methods:Object(i["a"])(Object(i["a"])({},Object(c["b"])(["listLabels"])),{},{onPhotoUpload:function(t){this.contact.photo=t.filename,this.contact.photo_url=t.url},onSubmit:function(){var t=this.contact,e=[];t.labels.forEach((function(t){return e.push(t.id)})),this.$emit("submit",Object(i["a"])(Object(i["a"])({},t),{},{labels:Object(l["sortedUniq"])(e)}))}})},k=S,B=(a("5168"),a("2877")),$=Object(B["a"])(k,n,s,!1,null,"5288759e",null);e["a"]=$.exports},"9b18":function(t,e,a){},a5d1:function(t,e,a){"use strict";a("c1b4")},ac13:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{class:t.spanClass,attrs:{title:t.textStatus},on:{click:function(e){return e.stopPropagation(),t.$emit("click")}}},[a("InputSwitch",{attrs:{color:"success"},on:{change:t.onChange},model:{value:t.inputStatus,callback:function(e){t.inputStatus=e},expression:"inputStatus"}})],1)},s=[],o=(a("a9e3"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"css-control css-control-sm css-switch",class:t.spanClass},[a("input",{ref:"input",staticClass:"css-control-input",attrs:{type:"checkbox"},domProps:{checked:t.value},on:{input:t.onInput}}),a("span",{staticClass:"css-control-indicator"}),t._v(" "+t._s(t.title)+" ")])}),i=[],c={name:"InputSwitch",props:{title:{type:String,default:""},value:{type:Boolean,default:!0},color:{type:String,default:"primary"}},computed:{spanClass:function(){return this.color?"css-control-".concat(this.color):""}},methods:{onInput:function(){var t=this.$refs.input.checked;this.$emit("input",t),this.$emit("change",t)}}},l=c,r=a("2877"),u=Object(r["a"])(l,o,i,!1,null,null,null),d=u.exports,p={name:"StatusColumn",components:{InputSwitch:d},props:{status:{type:Number,default:0}},data:function(){return{inputStatus:!1}},computed:{spanClass:function(){return this.status?"text-success":"text-danger"},textStatus:function(){return this.status?"active":"inactive"}},watch:{status:{handler:function(){this.inputStatus=!!this.status},immediate:!0}},methods:{onChange:function(t){var e=this;setTimeout((function(){e.inputStatus=!t,e.$emit("change",t)}))}}},h=p,m=Object(r["a"])(h,n,s,!1,null,null,null);e["a"]=m.exports},b30d:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image-wrapper bg-gray d-flex justify-content-center align-items-center rounded-circle"},[t.url&&t.showImage?a("img",{staticClass:"img-fluid rounded-circle",attrs:{alt:"",src:t.url},on:{error:function(e){t.showImage=!1}}}):a("Icon",{attrs:{type:t.iconType,name:t.icon}})],1)},s=[],o=a("5d35"),i={name:"ImageColumn",components:{Icon:o["a"]},props:{url:{type:String,default:""},iconType:{type:String,default:"si"},icon:{type:String,default:"user"}},data:function(){return{showImage:!0}},watch:{url:{handler:function(){this.showImage=!0}}}},c=i,l=(a("40b1"),a("2877")),r=Object(l["a"])(c,n,s,!1,null,"76c50589",null);e["a"]=r.exports},b994:function(t,e,a){},c1b4:function(t,e,a){},c893:function(t,e,a){},d046:function(t,e,a){},d76a:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{staticClass:"mb-4"},[a("ViewContact",{attrs:{contact:t.targetContact,visible:t.isViewModalShown},on:{edit:t.onEditContact,delete:t.onDeleteContact,compose:t.onCompose,"remove-label":t.onRemoveLabel,close:function(e){t.isViewModalShown=!1}}}),a("EditContact",{attrs:{"contact-id":t.targetContact.id,visible:t.isEditModalShown},on:{success:t.onContactEdited,close:function(e){t.isEditModalShown=!1}}}),a("DeleteContact",{attrs:{visible:t.isDeleteModalShown,contact:t.targetContact},on:{success:t.onContactDeleted,close:function(e){t.isDeleteModalShown=!1}}}),a("UpdateStatus",{attrs:{visible:t.isStatusModalShown,field:"contact:<b>"+t.targetContact.name+"</b>",status:t.targetContact.status,submission:t.updateStatus},on:{success:t.setStatus,close:function(e){t.isStatusModalShown=!1}}}),a("RemoveLabel",{attrs:{visible:t.isRemoveLabelModalShown,label:t.targetLabel,contact:t.targetContact},on:{success:t.onLabelRemoved,close:function(e){t.isRemoveLabelModalShown=!1}}}),a("CardBase",{staticClass:"p-4 mb-3"},[a("Row",[a("Column",{attrs:{md:"3"}},[t.hideStatus?t._e():a("InputSelect",{attrs:{title:"Status","option-value":"value","option-text":"name",options:t.statuses},on:{select:function(e){return t.$emit("reload")}},model:{value:t.dataFilters.status,callback:function(e){t.$set(t.dataFilters,"status",e)},expression:"dataFilters.status"}})],1),a("Column",{class:t.hideStatus?"col-12":"col-md-6 offset-md-3"},[a("Search",{class:{"mt-4 pt-1":!t.hideStatus},attrs:{placeholder:"Search contacts",debounce:500},on:{change:t.onSearch},model:{value:t.dataFilters.keyword,callback:function(e){t.$set(t.dataFilters,"keyword",e)},expression:"dataFilters.keyword"}})],1)],1)],1),a("CardBase",{class:t.isLoading?"":"with-table"},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("Block",{staticClass:"table-responsive collapsible"},[t.contacts.length?a("table",{staticClass:"table table-hover m-0 cursor-pointer"},[a("thead",{staticClass:"bg-gray-lighter"},[a("tr",[a("th",{staticClass:"text-center d-none d-sm-table-cell",staticStyle:{width:"50px"}},[t._v(" # ")]),a("th",{staticStyle:{width:"60px"}},[t._v(" Photo ")]),a("th",{staticClass:"pl-lg-4 wrappable",staticStyle:{"min-width":"30%"}},[t._v(" Full Name ")]),a("th",[t._v(" Address ")]),a("th",{staticStyle:{width:"120px"}},[t._v(" Phone ")]),a("th",{staticStyle:{width:"100px"}},[t._v(" Operator ")]),a("th",{staticClass:"d-none d-xl-table-cell",staticStyle:{width:"20%"}},[t._v(" Labels ")]),a("th",{staticClass:"text-center"},[t._v(" Status ")]),a("th",{staticStyle:{width:"130px"}})])]),a("tbody",t._l(t.contacts,(function(e,n){return a("tr",{key:n,attrs:{title:"view contact in detail"},on:{click:function(a){return t.onViewContact(a,e)}}},[a("td",{staticClass:"text-center"},[a("span",{staticClass:"hidden-info"},[t._v("#")]),a("span",[t._v(t._s(n+1))])]),a("td",[a("span",{staticClass:"hidden-info"},[t._v("Avatar:")]),a("ImageColumn",{attrs:{url:e.photo_url}})],1),a("td",{staticClass:"pl-lg-4"},[a("span",{staticClass:"hidden-info"},[t._v("Full Name:")]),a("span",{staticClass:"field-data"},[t._v(t._s(e.name||"N/A"))])]),a("td",{staticClass:"pr-5"},[a("span",{staticClass:"hidden-info"},[t._v("Address:")]),a("span",{staticClass:"field-data",staticStyle:{"max-width":"150px"}},[t._v(t._s(e.address||"N/A"))])]),a("td",[a("span",{staticClass:"hidden-info"},[t._v("Phone:")]),a("span",[a("a",{staticClass:"link",attrs:{href:"tel:"+e.phone},on:{click:function(t){t.stopPropagation()}}},[t._v(" "+t._s(e.phone)+" ")]),"INVALID"===e.phone_status?a("Icon",{attrs:{title:"Phone number appears to be invalid!",type:"si",name:"info",color:"danger",size:"regular"}}):t._e()],1)]),a("td",{staticClass:"pr-5"},[a("span",{staticClass:"hidden-info"},[t._v("Operator:")]),a("span",{staticStyle:{"max-width":"150px"}},[e.operator?[a("Badge",{attrs:{color:e.operator.toLowerCase()}},[t._v(t._s(e.operator))])]:[t._v("N/A")]],2)]),a("td",{staticClass:"d-none d-xl-table-cell"},[e.labels&&e.labels.length?[t._l(e.labels,(function(n,s){return[n.id?a("LabelBadge",{key:s,attrs:{label:n,removable:!0},on:{remove:function(a){return t.onRemoveLabel(n,e)}}}):t._e()]}))]:t._e()],2),a("td",{staticClass:"text-center"},[a("span",{staticClass:"hidden-info"},[t._v("Status:")]),a("StatusColumn",{attrs:{status:e.is_active},on:{change:function(a){return t.onStatusUpdate(e,a)}}})],1),a("td",[a("span",{staticClass:"hidden-info"}),a("FlexBox",{attrs:{"align-items":"center",justify:"center"}},[a("Button",{staticClass:"view-button mr-2 p-2 d-none text-gray-800",attrs:{color:"secondary",title:"View contact"},on:{click:function(a){return t.onViewContact(a,e)}}},[a("Icon",{attrs:{name:"file-text-o",size:"regular"}})],1),a("Button",{staticClass:"p-2 mx-1 text-dark",attrs:{color:"light",title:"compose message for "+e.name},on:{click:function(a){return t.onCompose({name:e.name,phone:e.phone})}}},[a("Icon",{attrs:{type:"si",name:"envelope-letter",size:"regular"}})],1),a("Button",{staticClass:"p-2 mx-1 text-dark",attrs:{color:"light",title:"edit contact"},on:{click:function(a){return t.onEditContact(e)}}},[a("Icon",{attrs:{type:"fa",name:"pencil",size:"regular"}})],1),a("Button",{staticClass:"p-2 mx-1 text-danger",attrs:{color:"light",title:"delete contact"},on:{click:function(a){return t.onDeleteContact(e)}}},[a("Icon",{attrs:{type:"fa",name:"trash",size:"regular"}})],1)],1)],1)])})),0)]):a("Block",{staticClass:"min-height-300 d-flex flex-row justify-content-center align-items-center"},[a("h4",{staticClass:"text-gray-dark font-w300"},[t._v(" Contacts not found ")])])],1)],1)],1),a("Pagination",{staticClass:"my-2 my-lg-0",attrs:{pagination:t.pagination},on:{change:t.changePagination}})],1)},s=[],o=(a("4de4"),a("5530")),i=a("2ef0"),c=a("dc4c"),l=a("020b"),r=a("b30d"),u=a("0af5"),d=a("ac13"),p=a("0f8e"),h=a("c2cd"),m=a("5d35"),f=a("1824"),b=a("dd08"),g=a("27dc"),v=a("9559"),C=a("ad4f"),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Add a new contact","hide-close-button":!1,"hide-controls":"","modal-style":"max-width: 700px;",visible:t.visible,loading:t.isLoading},on:{close:t.close}},[a("template",{slot:"header"},[a("FlexBox",{attrs:{wrap:"wrap"}},[a("Block",{staticClass:"mr-4 mb-2"},[a("AvatarImage",{attrs:{path:t.contact.photo_url,size:"small"}})],1),a("FlexBox",{attrs:{direction:"column"}},[a("h4",{staticClass:"m-0"},[t._v(" "+t._s(t.contact.name)+" ")]),a("Block",{staticClass:"py-2"},[t.contact.labels&&t.contact.labels.length?[t._l(t.contact.labels,(function(e,n){return[e.id?a("LabelBadge",{key:n,attrs:{label:e,removable:""},on:{remove:function(a){return t.$emit("remove-label",e,t.contact)}}}):t._e()]}))]:t._e()],2)],1)],1)],1),a("template",{slot:"options"},[a("Button",{staticClass:"p-2 action-button compose",attrs:{title:"compose message for "+t.contact.name},on:{click:function(e){return t.$emit("compose",t.contact)}}},[a("Icon",{attrs:{type:"si",name:"envelope-letter",size:"medium"}})],1),a("Button",{staticClass:"p-2 action-button edit",attrs:{title:"edit"},on:{click:function(e){return t.$emit("edit",t.contact)}}},[a("Icon",{attrs:{type:"fa",name:"pencil",size:"medium"}})],1),a("Button",{staticClass:"p-2 action-button delete",attrs:{title:"delete"},on:{click:function(e){return t.$emit("delete",t.contact)}}},[a("Icon",{attrs:{type:"fa",name:"trash",size:"large"}})],1)],1),a("div",{staticClass:"scrollable bg-gray-lighter",staticStyle:{"max-height":"300px"}},[a("Block",{staticClass:"mx-4 p-2 mb-3"},[a("h5",[t._v(" Contact Details ")]),a("table",{staticClass:"table-borderless w-100"},[a("tbody",[a("tr",[a("th",{staticStyle:{width:"50px"},attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"phone",size:"large",color:"muted"}})],1)],1),a("td",[a("a",{staticClass:"link",attrs:{href:"tel:"+t.contact.phone}},[t._v(" "+t._s(t.contact.phone)+" ")]),"INVALID"===t.contact.phone_status?a("Icon",{attrs:{title:"Phone number appears to be invalid!",type:"si",name:"info",color:"danger",size:"regular"}}):t._e()],1)]),t.contact.email?a("tr",[a("th",{attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"envelope",size:"regular",color:"muted"}})],1)],1),a("td",[a("a",{staticClass:"link",attrs:{href:"mailto:"+t.contact.email}},[t._v(" "+t._s(t.contact.email)+" ")])])]):t._e(),t.contact.address?a("tr",[a("th",{attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"map",size:"regular",color:"muted"}})],1)],1),a("td",[t._v(" "+t._s(t.contact.address)+" ")])]):t._e(),t.contact.dob?a("tr",[a("th",{attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"birthday-cake",size:"regular",color:"muted"}})],1)],1),a("td",[t._v(" "+t._s(t.duration(t.contact.dob))+" ")])]):t._e(),t.contact.description?a("tr",[a("th",{attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"file",size:"regular",color:"muted fa-rotate-90"}})],1)],1),a("td",[a("p",[t._v(t._s(t.contact.description))])])]):t._e()])])])],1)],2)},y=[],w=(a("a9e3"),a("78b5")),_=a("fce3"),S=a("0814"),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Badge",{staticClass:"label-badge"},[a("RouterLink",{attrs:{to:"/labels/"+t.label.id}},[t._v(" "+t._s(t.label.name)+" ")]),t.removable?a("FlexBox",[a("span",{staticClass:"vertical-separator"}),a("i",{on:{click:function(e){return e.stopPropagation(),t.onRemoveLabel(e)}}},[t._v("Ã—")])]):t._e()],1)},B=[],$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"badge",class:t.badgeColor,on:{click:function(e){return e.stopPropagation(),t.onClick(e)}}},[t._t("default")],2)},L=[],j={name:"Badge",props:{color:{type:String,default:"primary"}},computed:{badgeColor:function(){var t=this.color;return t?"badge-".concat(t):""}},methods:{onClick:function(t){this.$emit("click",t)}}},I=j,O=(a("8579"),a("2877")),F=Object(O["a"])(I,$,L,!1,null,"4dd7e3a4",null),P=F.exports,M={name:"LabelBadge",components:{FlexBox:v["a"],Badge:P},props:{label:{type:Object,default:function(){return{}}},removable:{type:Boolean}},methods:{onRemoveLabel:function(){this.$emit("remove",this.label.id)}}},E=M,D=(a("36f5"),Object(O["a"])(E,k,B,!1,null,"1549ab42",null)),V=D.exports,N={name:"ViewContact",components:{LabelBadge:V,Button:C["a"],Icon:m["a"],Block:S["a"],FlexBox:v["a"],AvatarImage:_["a"],Modal:w["a"]},props:{contact:{type:Object,default:function(){return{labels:[]}}},contactId:{type:[Number,String],default:null},visible:{type:Boolean,default:!1}},data:function(){return{isLoading:!1}},methods:{close:function(){this.isLoading||this.$emit("close")}}},R=N,A=(a("f308"),Object(O["a"])(R,x,y,!1,null,"4f1eba63",null)),z=A.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Edit contact",visible:t.visible,"hide-controls":"","modal-style":"max-width: 700px;","modal-class":"pr-2"},on:{closed:t.reset,close:t.close}},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("ContactForm",{attrs:{error:t.error,"is-loading":t.isSubmitting},on:{submit:t.updateContact,cancel:t.close},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}})],1)],1)},U=[],q=(a("d3b7"),a("53ca")),W=a("96e9"),J={name:"EditContact",components:{CardLoader:h["a"],ContactForm:W["a"],Modal:w["a"]},props:{contactId:{type:[Number,String],default:null},visible:{type:Boolean,default:!1}},data:function(){return{contact:{},error:{},isLoading:!1,isSubmitting:!1,isUserFormShown:!0}},watch:{visible:function(t){t&&this.fetchData()}},methods:{fetchData:function(){var t=this;this.isLoading=!0,Object(c["e"])(this.contactId).then((function(e){t.contact=e})).catch((function(){t.close(),t.$toast.error("There was an error while fetching contact data!")})).finally((function(){t.isLoading=!1}))},updateContact:function(t){var e=this;this.isSubmitting=!0;var a=t.dob;Object(c["g"])(this.contactId,Object(o["a"])(Object(o["a"])({},t),{},{dob:a?this.getDate(a):""})).then((function(t){e.error={},e.close(),e.$emit("success",t||e.contact),e.$toast.success("Contact updated successfully"),e.close()})).catch((function(t){"object"===Object(q["a"])(t)?e.error=t:e.$toast.error(t)})).finally((function(){e.isSubmitting=!1}))},close:function(){this.isLoading&&this.isSubmitting||this.$emit("close")},reset:function(){this.contact={},this.isLoading=!1,this.isUserFormShown=!0}}},G=J,H=Object(O["a"])(G,T,U,!1,null,"e3bf3712",null),K=H.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Confirmation",visible:t.visible,loading:t.isLoading,"modal-style":"max-width: 400px;"},on:{close:t.close,success:t.deleteContact}},[a("Block",{staticClass:"px-4"},[a("p",{staticClass:"mb-3"},[t._v(" Delete this contact permanently? ")]),a("Block",{staticClass:"contact-details"},[a("table",{staticClass:"w-100"},[a("tbody",[a("tr",[a("th",{staticStyle:{width:"70px"}},[t._v(" Name: ")]),a("td",[t._v(" "+t._s(t.contact.name||" N/A")+" ")])]),a("tr",[a("th",[t._v("Phone:")]),a("td",[a("a",{staticClass:"link",attrs:{href:"tel:"+t.contact.phone},on:{click:function(t){t.stopPropagation()}}},[t._v(" "+t._s(t.contact.phone)+" ")])])])])])])],1)],1)},X=[],Y={name:"DeleteContact",components:{Block:S["a"],Modal:w["a"]},props:{visible:{type:Boolean,default:!1},contact:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1}},methods:{deleteContact:function(){var t=this;this.isLoading=!0,Object(c["d"])(this.contact.id).then((function(){t.$toast.success("Contact deleted successfully!"),t.$emit("success"),t.close()})).catch((function(e){var a=e||"Couldn't delete contact.";t.$toast.error(a)})).finally((function(){t.isLoading=!1,t.close()}))},close:function(){this.isLoading||this.$emit("close")}}},Z=Y,tt=(a("a5d1"),Object(O["a"])(Z,Q,X,!1,null,"cb9a7a82",null)),et=tt.exports,at=a("1b32"),nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Confirmation",visible:t.visible,loading:t.isLoading,"modal-style":"max-width: 450px;"},on:{close:t.onClose,success:t.remove}},[a("Block",{staticClass:"px-4"},[a("p",{staticClass:"mb-3"},[t._v(" Remove label:"),a("LabelBadge",{attrs:{label:t.label}}),t._v(" from this contact? ")],1),a("Block",{staticClass:"contact-details"},[a("table",{staticClass:"w-100"},[a("tbody",[a("tr",[a("th",{staticClass:"font-weight-normal text-muted",staticStyle:{width:"70px"}},[t._v(" Name: ")]),a("td",[t._v(" "+t._s(t.contact.name||" N/A")+" ")])]),a("tr",[a("th",{staticClass:"font-weight-normal text-muted"},[t._v(" Phone: ")]),a("td",[a("a",{staticClass:"link",attrs:{href:"tel:"+t.contact.phone},on:{click:function(t){t.stopPropagation()}}},[t._v(" "+t._s(t.contact.phone)+" ")])])])])])])],1)],1)},st=[],ot=a("f85f"),it={name:"RemoveLabel",components:{LabelBadge:V,Block:S["a"],Modal:w["a"]},props:{visible:{type:Boolean,default:!1},label:{type:Object,default:function(){return{}}},contact:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1}},methods:{remove:function(){var t=this;this.isLoading=!0,Object(ot["d"])(this.label.id,this.contact.id).then((function(){t.$bus.emit("reload-contacts-table"),t.$emit("success"),t.$toast.success("Label removed from contact successfully!")})).catch((function(e){var a=e||"Couldn't delete label.";t.$toast.error(a)})).finally((function(){t.isLoading=!1,t.onClose()}))},onClose:function(){this.isLoading||this.$emit("close")}}},ct=it,lt=(a("5c00"),Object(O["a"])(ct,nt,st,!1,null,"00d3a049",null)),rt=lt.exports,ut={name:"ContactsTable",components:{Badge:P,Block:S["a"],RemoveLabel:rt,LabelBadge:V,Column:at["a"],DeleteContact:et,EditContact:K,ViewContact:z,Button:C["a"],FlexBox:v["a"],Row:g["a"],Search:b["a"],UpdateStatus:f["a"],Icon:m["a"],InputSelect:u["a"],CardBase:l["a"],Pagination:p["a"],CardLoader:h["a"],ImageColumn:r["a"],StatusColumn:d["a"]},props:{contacts:{type:Array,default:function(){return[]}},dataFilters:{type:Object,default:function(){return{}}},pagination:{type:Object,default:function(){return{}}},isLoading:{type:Boolean},hideStatus:{type:Boolean}},data:function(){return{targetLabel:{},targetContact:{},isViewModalShown:!1,isEditModalShown:!1,isDeleteModalShown:!1,isStatusModalShown:!1,isRemoveLabelModalShown:!1,statuses:[{name:"All",value:null},{name:"Active",value:1},{name:"Inactive",value:0}]}},methods:{onCompose:function(t){this.isViewModalShown=!1,this.$bus.emit("compose",{action:"New",recipients:Array.isArray(t)?t:[t]})},onViewContact:function(t,e){var a=t.target;a&&"a"===a.tagName.toLocaleLowerCase()||(this.isEditModalShown=!1,this.isDeleteModalShown=!1,this.targetContact=e,this.isViewModalShown=!0)},onEditContact:function(t){this.targetContact=t,this.isEditModalShown=!0},onContactEdited:function(t){this.$emit("reload"),this.onViewContact(new Event("CustomEvent",{target:document.createElement("div")}),t)},onDeleteContact:function(t){this.targetContact=t,this.isDeleteModalShown=!0},onContactDeleted:function(){this.isViewModalShown=!1,this.$emit("reload")},onRemoveLabel:function(t,e){this.targetLabel=t,this.targetContact=e,this.isRemoveLabelModalShown=!0},onLabelRemoved:function(){if(this.$emit("reload"),this.isViewModalShown){var t=this.targetContact,e=this.targetLabel;this.targetContact.labels=t.labels.filter((function(t){return t.id!==e.id}))}this.targetLabel={}},updateStatus:function(){var t=this.targetContact,e=t.id,a=t.status;return Object(c["h"])(e,a)},setStatus:function(){if(this.hideStatus)this.$emit("reload");else{var t=this.targetContact,e=Object(i["findIndex"])(this.contacts,["id",t.id]);this.contacts[e].is_active=t.status?1:0}},onStatusUpdate:function(t,e){this.targetContact=Object(o["a"])(Object(o["a"])({},t),{},{status:e}),this.isStatusModalShown=!0},onSearch:function(){this.pagination.current=1,this.$emit("reload")},changePagination:function(t){this.pagination.current=t,this.$emit("reload")}}},dt=ut,pt=(a("d970"),Object(O["a"])(dt,n,s,!1,null,"ed2f4c6a",null));e["a"]=pt.exports},d970:function(t,e,a){"use strict";a("0ed0")},dd08:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group"},[a("input",{ref:"searchInp",staticClass:"form-control",attrs:{type:"search",placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.setValue}}),t._m(0)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("i",{staticClass:"fa fa-search"})])])}],o=(a("a9e3"),a("2ef0")),i={name:"Search",props:{placeholder:{type:String,default:"Search"},value:{type:String,default:""},debounce:{type:Number,default:0}},created:function(){this.debounce&&(this.onChange=Object(o["debounce"])(this.onChange,this.debounce))},methods:{setValue:function(){var t=this.$refs.searchInp.value;this.$emit("input",t),this.onChange(t)},onChange:function(t){this.$emit("change",t)}}},c=i,l=a("2877"),r=Object(l["a"])(c,n,s,!1,null,"6ec74c60",null);e["a"]=r.exports},f308:function(t,e,a){"use strict";a("d046")}}]);