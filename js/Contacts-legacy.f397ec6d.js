(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Contacts"],{"1a1f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{staticClass:"mt-xl-n4 mb-4"},[a("Column",{attrs:{md:"6"}},[a("h5",{staticClass:"m-0 text-muted"},[t._t("default")],2)]),a("Column",{attrs:{md:"6"}},[a("FlexBox",{attrs:{justify:"end"}},[t._t("extra")],2)],1)],1)},o=[],s=a("1b32"),c=a("9559"),i=a("27dc"),r={name:"ContentHeader",components:{Row:i["a"],FlexBox:c["a"],Column:s["a"]}},l=r,u=a("2877"),d=Object(u["a"])(l,n,o,!1,null,"a5aed03a",null);e["a"]=d.exports},"77a0":function(t,e,a){},"913d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",[a("ContentHeader",[a("template",{slot:"extra"},[a("Button",{staticClass:"ml-2",attrs:{color:"primary"},on:{click:function(e){t.isCreateFormShown=!0}}},[a("FlexBox",{attrs:{"align-items":"center"}},[a("Icon",{attrs:{type:"si",name:"plus",size:"medium"}}),a("span",{staticClass:"ml-2"},[t._v("Create")])],1)],1)],1)],2),a("ContactsTable",{ref:"contactsTable",attrs:{"is-loading":t.isLoading,contacts:t.contacts,"data-filters":t.dataFilters,pagination:t.pagination},on:{reload:t.fetchData}}),a("CreateContact",{attrs:{visible:t.isCreateFormShown},on:{success:t.onCreateSuccess,close:function(e){t.isCreateFormShown=!1}}})],1)},o=[],s=a("1a1f"),c=a("5d35"),i=a("9559"),r=a("ad4f"),l=a("dc4c"),u=a("7228"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Create a new contact","hide-controls":"","modal-style":"max-width: 700px;","modal-class":"pr-2",visible:t.visible,loading:t.isLoading},on:{closed:t.reset,close:t.close}},[a("ContactForm",{attrs:{error:t.error,"is-loading":t.isLoading},on:{submit:t.createContact,cancel:t.close}})],1)},f=[],m=(a("d3b7"),a("53ca")),h=a("78b5"),C=a("96e9"),p={name:"CreateContact",components:{ContactForm:C["a"],Modal:h["a"]},props:{visible:{type:Boolean,default:!1}},data:function(){return{error:{},isLoading:!1,isUserFormShown:!0}},methods:{createContact:function(t){var e=this;this.isLoading=!0,this.error={},Object(l["c"])(t).then((function(t){e.error={},e.$emit("success",t),e.$toast.success("Contact added successfully"),e.close()})).catch((function(t){"object"===Object(m["a"])(t)?e.error=t:e.$toast.error(t)})).finally((function(){e.isLoading=!1}))},close:function(){this.$emit("close")},reset:function(){this.contact={},this.error={},this.isLoading=!1,this.isUserFormShown=!0}}},b=p,g=a("2877"),w=Object(g["a"])(b,d,f,!1,null,"0ba8027a",null),v=w.exports,x=a("0814"),F=a("d76a"),L={name:"Contacts",components:{Block:x["a"],CreateContact:v,Button:r["a"],FlexBox:i["a"],Icon:c["a"],ContactsTable:F["a"],ContentHeader:s["a"]},data:function(){return{isLoading:!1,isCreateFormShown:!1,contacts:[],dataFilters:{status:1,keyword:""},pagination:{pages:1,current:1,perPage:15}}},created:function(){this.fetchData()},mounted:function(){var t=this;this.$bus.on("router-link-clicked",(function(){t.isLoading||t.fetchData()}))},beforeDestroy:function(){this.$bus.removeAllListeners("router-link-clicked")},methods:{fetchData:function(t){var e=this,a=this.dataFilters,n=a.status,o=a.keyword;this.isLoading=!0,Object(l["f"])({is_active:n||null,keyword:o||null,page:t||this.pagination.current||null,per_page:this.pagination.perPage,labels:1}).then((function(t){var a=t.data,n=t.meta;e.contacts=a,e.pagination=Object(u["b"])(n),e.isLoading=!1})).catch((function(t){"request-cancel"!==t&&(e.$toast.error("There was an error while fetching data."),e.isLoading=!1)}))},onCreateSuccess:function(t){this.fetchData(),this.$refs.contactsTable.onViewContact(new Event("CustomEvent",{target:document.createElement("div")}),t)}}},k=L,y=(a("a7cc"),Object(g["a"])(k,n,o,!1,null,"b124cd6a",null));e["default"]=y.exports},a7cc:function(t,e,a){"use strict";a("77a0")}}]);