(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Feedbacks"],{"020b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{staticClass:"card-base block custom-box-shadow"},[t._t("default")],2)},i=[],s=a("0814"),r={name:"CardBase",components:{Block:s["a"]}},l=r,o=a("2877"),c=Object(o["a"])(l,n,i,!1,null,"64f32f13",null);e["a"]=c.exports},"0af5":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("InputBase",{attrs:{title:t.title,required:t.required,info:t.info,error:t.error},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.id,i=e.isInvalid;return[a("select",{ref:"input",staticClass:"form-control",class:{"is-invalid":i},attrs:{id:n,required:t.required,placeholder:t.placeholder,disabled:t.disabled},domProps:{value:t.value},on:{input:t.updateInput}},t._l(t.options,(function(e,n){return a("option",{key:n,attrs:{disabled:e.disabled,hidden:e.hidden},domProps:{selected:e.selected,value:t.getOptionValue(e)}},[t._v(" "+t._s(t.getOptionText(e))+" ")])})),0)]}}])})},i=[],s=(a("a9e3"),a("850b")),r={name:"InputSelect",components:{InputBase:s["a"]},props:{title:{type:String,default:""},options:{type:Array,default:function(){return[]}},required:{type:Boolean,default:!1},value:{type:[String,Object,Number,Boolean],default:null},optionValue:{type:String,default:""},optionText:{type:String,default:""},error:{type:String,default:""},placeholder:{type:String,default:""},info:{type:String,default:""},disabled:{type:Boolean}},methods:{updateInput:function(){this.$emit("input",this.$refs.input.value),this.$emit("select",this.$refs.input.value)},getOptionValue:function(t){return this.optionValue?t[this.optionValue]:t},getOptionText:function(t){return this.optionText?t[this.optionText]:t}}},l=r,o=a("2877"),c=Object(o["a"])(l,n,i,!1,null,null,null);e["a"]=c.exports},"0f8e":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column-reverse",justify:"between","align-items":"end"}},[a("Block",{staticClass:"p-2"},[t._v(" "+t._s(t.pagination.message)+" ")]),a("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column",justify:"between","align-items":"end"}},[a("InputSelect",{staticClass:"my-2 my-lg-0",attrs:{options:t.perPages},on:{select:function(e){return t.$emit("change")}},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}}),a("nav",{staticClass:"ml-3"},[a("ul",{staticClass:"pagination disable-user-select mb-0"},[a("li",{staticClass:"page-item",class:{disabled:!t.isPreviousable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current-1)}}},[a("span",{staticClass:"page-link"},[t._v("Previous")])]),t._l(t.pages,(function(e,n){return a("li",{key:n,staticClass:"page-item",class:{active:t.current===e}},[a("a",{staticClass:"page-link btn-primary",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCurrent(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!t.isNextable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current+1)}}},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)])],1)],1)},i=[],s=(a("a9e3"),a("2ef0")),r=a("9559"),l=a("0814"),o=a("0af5"),c={name:"Pagination",components:{InputSelect:o["a"],Block:l["a"],FlexBox:r["a"]},props:{visibleLength:{type:Number,default:5},pagination:{type:Object,default:function(){return{}}}},data:function(){return{offset:0,perPages:[5,15,25,50,100],pages:[]}},computed:{current:function(){return this.pagination.current||1},length:function(){return this.pagination.pages||1},isNextable:function(){return this.length>this.current},isPreviousable:function(){return this.current>1}},watch:{length:{handler:function(){this.unWatchCurrentPageValue();var t=this.visibleLength,e=Math.ceil(t/2)+(t%2?0:1);this.offset=t-(t-e+1),this.generatePagination(),this.length>this.visibleLength&&(this.unWatchCurrentPageValue=this.$watch("current",this.generatePagination))},immediate:!0}},methods:{unWatchCurrentPageValue:function(){},generatePagination:function(){var t=this.current,e=this.offset,a=this.length,n=this.visibleLength,i=t-e;i<1&&(i=1);var r=i+n;r>a&&(r=a+1,i=r-n,i<1&&(i=1)),this.pages=Object(s["range"])(i,r)},setCurrent:function(t){var e=t;t<=1?e=1:t>=this.length&&(e=this.length),e!==this.current&&this.$emit("change",e)}}},u=c,d=(a("5148"),a("2877")),f=Object(d["a"])(u,n,i,!1,null,"64c09d8e",null);e["a"]=f.exports},"2df3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",[a("FeedbacksTable",{attrs:{"is-loading":t.isLoading,feedbacks:t.feedbacks,pagination:t.pagination},on:{view:t.onViewFeedback,reload:t.fetchData}}),a("ViewFeedback",{attrs:{visible:t.isViewModalShown,feedback:t.targetFeedback},on:{close:function(e){t.isViewModalShown=!1}}})],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Column",{staticClass:"mb-4"},[a("CardBase",[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("Block",{staticClass:"table-responsive"},[t.feedbacks.length?a("table",{staticClass:"table table-hover m-0"},[a("thead",{staticClass:"bg-gray-lighter"},[a("tr",[a("th",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v(" # ")]),a("th",{staticStyle:{width:"20%"}},[t._v(" Name ")]),a("th",{staticStyle:{width:"200px"}},[t._v(" Email ")]),a("th",{staticStyle:{width:"180px"}},[t._v(" Phone ")]),a("th",[t._v(" Message ")]),a("th",{staticStyle:{"min-width":"150px"}})])]),a("tbody",t._l(t.feedbacks,(function(e,n){return a("tr",{key:e.id,staticClass:"cursor-pointer",attrs:{title:"view feedback in detail"},on:{click:function(a){return t.onViewFeedback(e)}}},[a("td",{staticClass:"text-center"},[t._v(" "+t._s(n+1)+" ")]),a("td",[t._v(" "+t._s(e.first_name+" "+e.last_name)+" ")]),a("td",[e.email?a("a",{staticClass:"link",attrs:{href:"mailto:"+e.email}},[t._v(" "+t._s(e.email)+" ")]):a("span",[t._v("N/A")])]),a("td",[e.phone?a("a",{staticClass:"link",attrs:{href:"tel:"+e.phone},on:{click:function(t){t.stopPropagation()}}},[t._v(" "+t._s(e.phone)+" ")]):a("span",[t._v("N/A")])]),a("td",{staticClass:"message"},[t._v(" "+t._s(e.body||"N/A")+" ")]),a("td",{staticClass:"text-right"},[t._v(" "+t._s(t.duration(e.created_at))+" ")])])})),0)]):a("Block",{staticClass:"min-height-300 d-flex flex-row justify-content-center align-items-center"},[a("h4",{staticClass:"text-gray-dark font-w300"},[t._v(" Feedbacks not Found ")])])],1)],1)],1),a("Pagination",{staticClass:"my-2 my-lg-0",attrs:{pagination:t.pagination},on:{change:t.changePagination}})],1)},r=[],l=a("020b"),o=a("c2cd"),c=a("0f8e"),u=a("1b32"),d=a("0814"),f={name:"FeedbacksTable",components:{Block:d["a"],Column:u["a"],CardBase:l["a"],CardLoader:o["a"],Pagination:c["a"]},props:{feedbacks:{type:Array,default:null},pagination:{type:Object,default:function(){return{}}},isLoading:{type:Boolean}},data:function(){return{targetUser:{},isStatusModalShown:!1,statuses:[{name:"All",value:""},{name:"Active",value:1},{name:"Inactive",value:0}]}},methods:{onViewFeedback:function(t){this.$emit("view",t)},changePagination:function(t){this.pagination.current=t,this.fetchData(t)}}},p=f,h=(a("40f6"),a("2877")),g=Object(h["a"])(p,s,r,!1,null,"585600be",null),b=g.exports,m=a("83a9"),v=a("7228"),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Feedback Details","hide-close-button":!1,"hide-controls":"","modal-style":"max-width: 700px;",visible:t.visible},on:{close:t.close}},[a("SimpleBar",{staticClass:"bg-gray-lighter overflow-auto",staticStyle:{"max-height":"300px"}},[a("Block",{staticClass:"pt-2"},[a("table",{staticClass:"table-borderless w-100"},[a("tbody",[a("tr",[a("th",{staticStyle:{width:"50px"},attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"user",size:"large",color:"muted"}})],1)],1),a("td",[t._v(" "+t._s(t.feedback.first_name+" "+t.feedback.last_name)+" ")])]),a("tr",[a("th",{staticStyle:{width:"50px"},attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"phone",size:"large",color:"muted"}})],1)],1),a("td",[a("a",{staticClass:"link",attrs:{href:"tel:"+t.feedback.phone}},[t._v(" "+t._s(t.feedback.phone)+" ")])])]),t.feedback.email?a("tr",[a("th",{attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"envelope",size:"regular",color:"muted"}})],1)],1),a("td",[a("a",{staticClass:"link",attrs:{href:"mailto:"+t.feedback.email}},[t._v(" "+t._s(t.feedback.email)+" ")])])]):t._e(),t.feedback.address?a("tr",[a("th",{attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"map",size:"regular",color:"muted"}})],1)],1),a("td",[t._v(" "+t._s(t.feedback.address)+" ")])]):t._e(),t.feedback.body?a("tr",[a("th",{attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"file",size:"regular",color:"muted fa-rotate-90"}})],1)],1),a("td",[a("p",[t._v(t._s(t.feedback.body))])])]):t._e()])])])],1)],1)},_=[],w=a("8d3b"),x=a("78b5"),y=a("9559"),C=a("5d35"),B={name:"ViewFeedback",components:{Block:d["a"],Icon:C["a"],FlexBox:y["a"],Modal:x["a"],SimpleBar:w["a"]},props:{feedback:{type:Object,default:function(){return{labels:[]}}},visible:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("close")}}},F=B,S=(a("5814"),Object(h["a"])(F,k,_,!1,null,"5b33f200",null)),P=S.exports,j={name:"Feedbacks",components:{Block:d["a"],ViewFeedback:P,FeedbacksTable:b},data:function(){return{pagination:{pages:1,current:1,perPage:15},feedbacks:[],targetFeedback:{},isLoading:!1,isViewModalShown:!1}},created:function(){this.fetchData()},mounted:function(){var t=this;this.$bus.on("router-link-clicked",(function(){t.isLoading||t.fetchData()}))},beforeDestroy:function(){this.$bus.removeAllListeners("router-link-clicked")},methods:{fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isLoading=!0,Object(m["a"])({page:e,per_page:this.pagination.perPage}).then((function(e){var a=e.data,n=e.meta;t.feedbacks=a,t.pagination=Object(v["b"])(n),t.isLoading=!1})).catch((function(e){"request-cancel"!==e&&(t.$toast.error("There was an error while fetching data."),t.isLoading=!1)}))},onViewFeedback:function(t){this.targetFeedback=t,this.isViewModalShown=!0}}},V=j,$=Object(h["a"])(V,n,i,!1,null,"129dac9b",null);e["default"]=$.exports},"40f6":function(t,e,a){"use strict";a("ad24")},5148:function(t,e,a){"use strict";a("b994")},5814:function(t,e,a){"use strict";a("d785")},ad24:function(t,e,a){},b994:function(t,e,a){},d785:function(t,e,a){}}]);