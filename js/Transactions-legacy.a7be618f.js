(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Transactions"],{"020b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{staticClass:"card-base block custom-box-shadow"},[t._t("default")],2)},i=[],s=a("0814"),r={name:"CardBase",components:{Block:s["a"]}},l=r,o=a("2877"),c=Object(o["a"])(l,n,i,!1,null,"64f32f13",null);e["a"]=c.exports},"0af5":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("InputBase",{attrs:{title:t.title,required:t.required,info:t.info,error:t.error},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.id,i=e.isInvalid;return[a("select",{ref:"input",staticClass:"form-control",class:{"is-invalid":i},attrs:{id:n,required:t.required,placeholder:t.placeholder,disabled:t.disabled},domProps:{value:t.value},on:{input:t.updateInput}},t._l(t.options,(function(e,n){return a("option",{key:n,attrs:{disabled:e.disabled,hidden:e.hidden},domProps:{selected:e.selected,value:t.getOptionValue(e)}},[t._v(" "+t._s(t.getOptionText(e))+" ")])})),0)]}}])})},i=[],s=(a("a9e3"),a("850b")),r={name:"InputSelect",components:{InputBase:s["a"]},props:{title:{type:String,default:""},options:{type:Array,default:function(){return[]}},required:{type:Boolean,default:!1},value:{type:[String,Object,Number,Boolean],default:null},optionValue:{type:String,default:""},optionText:{type:String,default:""},error:{type:String,default:""},placeholder:{type:String,default:""},info:{type:String,default:""},disabled:{type:Boolean}},methods:{updateInput:function(){this.$emit("input",this.$refs.input.value),this.$emit("select",this.$refs.input.value)},getOptionValue:function(t){return this.optionValue?t[this.optionValue]:t},getOptionText:function(t){return this.optionText?t[this.optionText]:t}}},l=r,o=a("2877"),c=Object(o["a"])(l,n,i,!1,null,null,null);e["a"]=c.exports},"0f8e":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column-reverse",justify:"between","align-items":"end"}},[a("Block",{staticClass:"p-2"},[t._v(" "+t._s(t.pagination.message)+" ")]),a("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column",justify:"between","align-items":"end"}},[a("InputSelect",{staticClass:"my-2 my-lg-0",attrs:{options:t.perPages},on:{select:function(e){return t.$emit("change")}},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}}),a("nav",{staticClass:"ml-3"},[a("ul",{staticClass:"pagination disable-user-select mb-0"},[a("li",{staticClass:"page-item",class:{disabled:!t.isPreviousable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current-1)}}},[a("span",{staticClass:"page-link"},[t._v("Previous")])]),t._l(t.pages,(function(e,n){return a("li",{key:n,staticClass:"page-item",class:{active:t.current===e}},[a("a",{staticClass:"page-link btn-primary",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCurrent(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!t.isNextable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current+1)}}},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)])],1)],1)},i=[],s=(a("a9e3"),a("2ef0")),r=a("9559"),l=a("0814"),o=a("0af5"),c={name:"Pagination",components:{InputSelect:o["a"],Block:l["a"],FlexBox:r["a"]},props:{visibleLength:{type:Number,default:5},pagination:{type:Object,default:function(){return{}}}},data:function(){return{offset:0,perPages:[5,15,25,50,100],pages:[]}},computed:{current:function(){return this.pagination.current||1},length:function(){return this.pagination.pages||1},isNextable:function(){return this.length>this.current},isPreviousable:function(){return this.current>1}},watch:{length:{handler:function(){this.unWatchCurrentPageValue();var t=this.visibleLength,e=Math.ceil(t/2)+(t%2?0:1);this.offset=t-(t-e+1),this.generatePagination(),this.length>this.visibleLength&&(this.unWatchCurrentPageValue=this.$watch("current",this.generatePagination))},immediate:!0}},methods:{unWatchCurrentPageValue:function(){},generatePagination:function(){var t=this.current,e=this.offset,a=this.length,n=this.visibleLength,i=t-e;i<1&&(i=1);var r=i+n;r>a&&(r=a+1,i=r-n,i<1&&(i=1)),this.pages=Object(s["range"])(i,r)},setCurrent:function(t){var e=t;t<=1?e=1:t>=this.length&&(e=this.length),e!==this.current&&this.$emit("change",e)}}},u=c,d=(a("5148"),a("2877")),p=Object(d["a"])(u,n,i,!1,null,"64c09d8e",null);e["a"]=p.exports},5148:function(t,e,a){"use strict";a("b994")},a181:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",[a("TransactionsTable",{attrs:{"is-loading":t.isLoading,transactions:t.transactions,"data-filters":t.dataFilters,pagination:t.pagination},on:{reload:t.fetchData}})],1)},i=[],s=a("5530"),r=a("9819");function l(t){var e=t.cancelPrevious,a=void 0===e||e;return Object(r["a"])({url:"transactions",method:"get",params:t,cancelPrevious:a})}var o=a("7228"),c=a("0814"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{staticClass:"mb-4"},[a("CardBase",{staticClass:"p-4 mb-3"},[a("Row",[a("Column",{attrs:{md:"3"}},[a("InputSelect",{attrs:{title:"Activity","option-value":"value","option-text":"name",options:t.statuses},on:{select:function(e){return t.$emit("reload")}},model:{value:t.dataFilters.activity,callback:function(e){t.$set(t.dataFilters,"activity",e)},expression:"dataFilters.activity"}})],1),a("Column",{attrs:{md:"3"}},[a("DateRangePicker",{attrs:{title:"Date Range"},on:{change:function(e){return t.$emit("reload")}},model:{value:t.dataFilters.dateRange,callback:function(e){t.$set(t.dataFilters,"dateRange",e)},expression:"dataFilters.dateRange"}})],1),a("Column",{attrs:{md:"6"}},[a("Search",{staticClass:"mt-4 pt-1",attrs:{debounce:500},on:{change:t.onSearch},model:{value:t.dataFilters.keyword,callback:function(e){t.$set(t.dataFilters,"keyword",e)},expression:"dataFilters.keyword"}})],1)],1)],1),a("CardBase",{class:t.isLoading?"":"with-table"},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("Block",{staticClass:"table-responsive collapsible"},[t.transactions.length?a("table",{staticClass:"table m-0"},[a("thead",{staticClass:"bg-gray-lighter"},[a("tr",[a("th",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v(" # ")]),a("th",{staticClass:"pl-4 ml-4",staticStyle:{width:"20%"}},[t._v(" Activity ")]),a("th",{staticClass:"text-right"},[t._v(" Debit ")]),a("th",{staticClass:"text-right"},[t._v(" Credit ")]),a("th",{staticClass:"text-right"},[t._v(" Balance ")]),a("th",{staticClass:"pl-4",staticStyle:{width:"30%"}},[t._v(" Remark ")]),a("th",{staticClass:"text-right"},[t._v(" Created ")])])]),a("tbody",t._l(t.transactions,(function(e){return a("tr",{key:e.id,attrs:{title:e.remark}},[a("td",{staticClass:"text-center"},[a("span",{staticClass:"hidden-info"},[t._v("#")]),a("span",[t._v(t._s(e.id))])]),a("td",{staticClass:"pl-4 ml-4"},[a("span",{staticClass:"hidden-info"},[t._v("Activity:")]),a("span",[t._v(t._s(e.activity||"N/A"))])]),a("td",{staticClass:"text-right"},[a("span",{staticClass:"hidden-info"},[t._v("Debit:")]),t._v(" "+t._s(e.debit||"N/A")+" ")]),a("td",{staticClass:"text-right"},[a("span",{staticClass:"hidden-info"},[t._v("Credit:")]),t._v(" "+t._s(e.credit||"N/A")+" ")]),a("td",{staticClass:"text-right"},[a("span",{staticClass:"hidden-info"},[t._v("Balance:")]),t._v(" "+t._s(e.balance||"N/A")+" ")]),a("td",{staticClass:"pl-4"},[a("span",{staticClass:"hidden-info"},[t._v("Remark:")]),a("span",{staticClass:"description"},[t._v(" "+t._s(e.remark||"N/A")+" ")])]),a("td",{staticClass:"text-right"},[a("span",{staticClass:"hidden-info"},[t._v("Created:")]),a("span",[t._v(t._s(t.duration(e.created_at)))])])])})),0)]):a("Block",{staticClass:"min-height-300 d-flex flex-row justify-content-center align-items-center"},[a("h4",{staticClass:"text-gray-dark font-w300"},[t._v(" Transactions not Found ")])])],1)],1)],1),a("Pagination",{staticClass:"my-2 my-lg-0",attrs:{pagination:t.pagination},on:{change:t.changePagination}})],1)},d=[],p=a("020b"),h=a("0af5"),f=a("0f8e"),g=a("c2cd"),m=a("dd08"),v=a("27dc"),b=a("1b32"),C=a("d9e1"),_={name:"TransactionsTable",components:{DateRangePicker:C["a"],Block:c["a"],Row:v["a"],Column:b["a"],Search:m["a"],InputSelect:h["a"],CardBase:p["a"],Pagination:f["a"],CardLoader:g["a"]},props:{transactions:{type:Array,default:function(){return[]}},dataFilters:{type:Object,default:function(){return{}}},pagination:{type:Object,default:function(){return{}}},isLoading:{type:Boolean}},data:function(){return{targetContact:{},isStatusModalShown:!1,statuses:[{name:"All",value:null},{name:"MESSAGE_SENT",value:"MESSAGE_SENT"},{name:"MESSAGE_REFUND",value:"MESSAGE_REFUND"},{name:"DEPOSIT",value:"DEPOSIT"},{name:"DEPOSIT_REFUND",value:"DEPOSIT_REFUND"},{name:"CASHBACK",value:"CASHBACK"}]}},methods:{onSearch:function(){this.pagination.current=1,this.$emit("reload")},changePagination:function(t){this.pagination.current=t,this.$emit("reload",t)}}},y=_,k=a("2877"),x=Object(k["a"])(y,u,d,!1,null,"9cfa21ba",null),S=x.exports,P={name:"Transactions",components:{Block:c["a"],TransactionsTable:S},data:function(){return{isLoading:!1,targetTransaction:{},transactions:[],dataFilters:{status:null,keyword:"",dateRange:{from:"",to:""}},pagination:{pages:1,current:1,perPage:15}}},computed:{filters:function(){var t=this.dataFilters,e=t.dateRange,a=t.keyword,n=t.activity,i=this.pagination,r=i.current,l=i.perPage,o={page:r,per_page:l,keyword:a||null,activity:n||null},c=e.from,u=e.to;return(c||u)&&(o=Object(s["a"])(Object(s["a"])({},o),{},{start_date:c||null,end_date:u||null})),o}},created:function(){this.fetchData()},mounted:function(){var t=this;this.$bus.on("router-link-clicked",(function(){t.isLoading||t.fetchData()}))},beforeDestroy:function(){this.$bus.removeAllListeners("router-link-clicked")},methods:{fetchData:function(t){var e=this;this.isLoading=!0,l(Object(s["a"])(Object(s["a"])({},this.filters),{},{page:t})).then((function(t){var a=t.data,n=t.meta;e.transactions=a,e.pagination=Object(o["b"])(n),e.isLoading=!1})).catch((function(t){"request-cancel"!==t&&(e.$toast.error("There was an error while fetching data."),e.isLoading=!1)}))}}},w=P,$=Object(k["a"])(w,n,i,!1,null,null,null);e["default"]=$.exports},b994:function(t,e,a){},d9e1:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("InputBase",{attrs:{title:t.title},scopedSlots:t._u([{key:"default",fn:function(e){return[a("RangePicker",{staticClass:"w-100",attrs:{ranges:{Today:[t.moment(),t.moment()],"This Month":[t.moment(),t.moment().endOf("month")]}},on:{change:t.onChange}})]}}])})},i=[],s=(a("9980"),a("0bb7")),r=a("c1df"),l=a.n(r),o=a("2ef0"),c=a("850b"),u={name:"DateRangePicker",components:{InputBase:c["a"],RangePicker:s["a"].RangePicker},props:{title:{type:String,default:""},value:{type:Object,default:function(){return{type:"period",from:"",to:""}}}},data:function(){return{from:null,to:null}},watch:{value:{handler:function(t){var e=t.from,a=t.to;this.from=e?l()(e,"YYYY-MM-DD"):this.from,this.to=e?l()(a,"YYYY-MM-DD"):this.to},immediate:!0,deep:!0}},created:function(){this.debounce&&(this.onChange=Object(o["debounce"])(this.onChange,this.debounce))},methods:{moment:l.a,onChange:function(t,e){this.$emit("input",{from:e[0],to:e[1]}),this.$emit("change")}}},d=u,p=a("2877"),h=Object(p["a"])(d,n,i,!1,null,"2d659a7f",null);e["a"]=h.exports},dd08:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group"},[a("input",{ref:"searchInp",staticClass:"form-control",attrs:{type:"search",placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.setValue}}),t._m(0)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("i",{staticClass:"fa fa-search"})])])}],s=(a("a9e3"),a("2ef0")),r={name:"Search",props:{placeholder:{type:String,default:"Search"},value:{type:String,default:""},debounce:{type:Number,default:0}},created:function(){this.debounce&&(this.onChange=Object(s["debounce"])(this.onChange,this.debounce))},methods:{setValue:function(){var t=this.$refs.searchInp.value;this.$emit("input",t),this.onChange(t)},onChange:function(t){this.$emit("change",t)}}},l=r,o=a("2877"),c=Object(o["a"])(l,n,i,!1,null,"6ec74c60",null);e["a"]=c.exports}}]);