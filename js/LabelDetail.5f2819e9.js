(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["LabelDetail"],{"03fa":function(t,e,s){},"05ce":function(t,e,s){"use strict";s("e7ba")},"10db3":function(t,e,s){},"243a":function(t,e,s){"use strict";s("dd70")},"841c":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Block",[s("Block",{staticStyle:{"margin-bottom":"0 !important"}},[s("h5",{staticClass:"d-flex"},[s("FlexBox",{staticClass:"flex-auto align-items-center"},[s("RouterLink",{attrs:{to:"/labels"}},[t._v(" Labels ")]),s("Icon",{attrs:{name:"angle-double-right px-2"}}),s("Block",{attrs:{position:"relative"}},[s("Skeleton",{style:t.isLoading?"width: 200px; position: absolute; top: -22px":"",attrs:{loading:t.isLoading,active:t.isLoading,paragraph:!1}},[t._v(" "+t._s(t.label.name)+" ")])],1)],1),s("Block",{class:{hidden:t.isLoading}},[s("FlexBox",{staticClass:"w-max"},[s("Button",{staticClass:"p-2 mx-1 text-dark",attrs:{color:"light",title:"add contacts"},on:{click:function(e){t.isAddContactsModalShown=!0}}},[s("Icon",{attrs:{type:"si",name:"user-follow",size:"medium"}})],1),s("Button",{staticClass:"p-2 mx-1 text-dark",attrs:{color:"light",title:"Import contacts to "+t.label.name},on:{click:function(e){t.isImportFormShown=!0}}},[s("Icon",{attrs:{type:"si",name:"cloud-upload",size:"medium"}})],1),s("Button",{staticClass:"p-2 mx-1 text-dark",attrs:{color:"light",title:"compose message for all contacts of "+t.label.name},on:{click:t.onCompose}},[s("CardLoader",{attrs:{opacity:"0","is-loading":t.isComposing,"loader-size":"20"}},[s("Icon",{class:{invisible:t.isComposing},attrs:{type:"si",name:"envelope-letter",size:"medium"}})],1)],1),s("Button",{staticClass:"p-2 mx-1 text-dark",attrs:{color:"light",title:"edit label"},on:{click:function(e){t.isEditModalShown=!0}}},[s("Icon",{attrs:{type:"fa",name:"pencil",size:"medium"}})],1),s("Button",{staticClass:"p-2 mx-1 text-danger",attrs:{color:"light",title:"edit label"},on:{click:function(e){t.isDeleteModalShown=!0}}},[s("Icon",{attrs:{type:"fa",name:"trash",size:"medium"}})],1)],1)],1)],1)]),t.label.description?s("p",[t._v(" "+t._s(t.label.description)+" ")]):t._e(),s("ImportContact",{attrs:{label:t.label,visible:t.isImportFormShown},on:{success:t.onImportSuccess,close:function(e){t.isImportFormShown=!1}}}),s("ContactsTable",{attrs:{"is-loading":t.isLoading||t.isFiltering,contacts:t.contacts,"data-filters":t.filters,pagination:t.pagination,"hide-status":""},on:{reload:function(e){return t.fetchData(!0,e)}}}),s("AddContacts",{attrs:{visible:t.isAddContactsModalShown,"label-id":t.label.id,"exclude-contacts":t.contacts.map((function(t){return t.phone}))},on:{success:t.fetchData,close:function(e){t.isAddContactsModalShown=!1}}}),s("EditLabel",{attrs:{"label-id":t.label.id,visible:t.isEditModalShown},on:{success:t.fetchData,close:function(e){t.isEditModalShown=!1}}}),s("DeleteLabel",{attrs:{visible:t.isDeleteModalShown,label:t.label},on:{success:t.onDeleteLabel,close:function(e){t.isDeleteModalShown=!1}}})],1)},i=[],o=(s("b2a3"),s("03fa"),s("6042")),l=s.n(o),n=s("41b2"),r=s.n(n),c=s("1098"),d=s.n(c),u=s("4d26"),h=s.n(u),p=s("4d91"),m=s("daa3"),f=s("4df5"),b={prefixCls:p["a"].string,size:p["a"].oneOfType([p["a"].oneOf(["large","small","default"]),p["a"].number]),shape:p["a"].oneOf(["circle","square"])},g=p["a"].shape(b).loose,v={props:Object(m["k"])(b,{size:"large"}),render:function(){var t,e,s=arguments[0],a=this.$props,i=a.prefixCls,o=a.size,n=a.shape,r=h()((t={},l()(t,i+"-lg","large"===o),l()(t,i+"-sm","small"===o),t)),c=h()((e={},l()(e,i+"-circle","circle"===n),l()(e,i+"-square","square"===n),e)),d="number"===typeof o?{width:o+"px",height:o+"px",lineHeight:o+"px"}:{};return s("span",{class:h()(i,r,c),style:d})}},x=v,y={prefixCls:p["a"].string,width:p["a"].oneOfType([p["a"].number,p["a"].string])},C=p["a"].shape(y),w={props:y,render:function(){var t=arguments[0],e=this.$props,s=e.prefixCls,a=e.width,i="number"===typeof a?a+"px":a;return t("h3",{class:s,style:{width:i}})}},k=w,S=s("9b57"),L=s.n(S),_=p["a"].oneOfType([p["a"].number,p["a"].string]),$={prefixCls:p["a"].string,width:p["a"].oneOfType([_,p["a"].arrayOf(_)]),rows:p["a"].number},B=p["a"].shape($),F={props:$,methods:{getWidth:function(t){var e=this.width,s=this.rows,a=void 0===s?2:s;return Array.isArray(e)?e[t]:a-1===t?e:void 0}},render:function(){var t=this,e=arguments[0],s=this.$props,a=s.prefixCls,i=s.rows,o=[].concat(L()(Array(i))).map((function(s,a){var i=t.getWidth(a);return e("li",{key:a,style:{width:"number"===typeof i?i+"px":i}})}));return e("ul",{class:a},[o])}},D=F,I=s("db14"),O={active:p["a"].bool,loading:p["a"].bool,prefixCls:p["a"].string,children:p["a"].any,avatar:p["a"].oneOfType([p["a"].string,g,p["a"].bool]),title:p["a"].oneOfType([p["a"].bool,p["a"].string,C]),paragraph:p["a"].oneOfType([p["a"].bool,p["a"].string,B])};function j(t){return t&&"object"===("undefined"===typeof t?"undefined":d()(t))?t:{}}function M(t,e){return t&&!e?{shape:"square"}:{shape:"circle"}}function A(t,e){return!t&&e?{width:"38%"}:t&&e?{width:"50%"}:{}}function E(t,e){var s={};return t&&e||(s.width="61%"),s.rows=!t&&e?3:2,s}var T={name:"ASkeleton",props:Object(m["k"])(O,{avatar:!1,title:!0,paragraph:!0}),inject:{configProvider:{default:function(){return f["a"]}}},render:function(){var t=arguments[0],e=this.$props,s=e.prefixCls,a=e.loading,i=e.avatar,o=e.title,n=e.paragraph,c=e.active,d=this.configProvider.getPrefixCls,u=d("skeleton",s);if(a||!Object(m["j"])(this,"loading")){var p,f=!!i||""===i,b=!!o,g=!!n,v=void 0;if(f){var y={props:r()({prefixCls:u+"-avatar"},M(b,g),j(i))};v=t("div",{class:u+"-header"},[t(x,y)])}var C=void 0;if(b||g){var w=void 0;if(b){var S={props:r()({prefixCls:u+"-title"},A(f,g),j(o))};w=t(k,S)}var L=void 0;if(g){var _={props:r()({prefixCls:u+"-paragraph"},E(f,b),j(n))};L=t(D,_)}C=t("div",{class:u+"-content"},[w,L])}var $=h()(u,(p={},l()(p,u+"-with-avatar",f),l()(p,u+"-active",c),p));return t("div",{class:$},[v,C])}var B=this.$slots["default"];return B&&1===B.length?B[0]:t("span",[B])},install:function(t){t.use(I["a"]),t.component(T.name,T)}},R=T,q=s("0814"),z=s("f85f"),U=s("d76a"),N=s("5d35"),P=s("ad4f"),V=s("b881"),J=s("9ea2"),H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Add new contacts","modal-style":"max-width: 500px;","hide-controls":"",visible:t.visible},on:{close:t.close}},[s("Block",{staticClass:"px-4"},[s("SelectContacts",{attrs:{"show-actions":"","exclude-labels":[t.labelId],"exclude-contacts":t.excludeContacts,"is-submitting":t.isSubmitting},on:{submit:t.onSubmit,close:t.close},model:{value:t.contacts,callback:function(e){t.contacts=e},expression:"contacts"}})],1)],1)},W=[],G=s("78b5"),K=s("b0e0"),Q={name:"AddContacts",components:{SelectContacts:K["a"],Block:q["a"],Modal:G["a"]},props:{labelId:{type:[Number,String],default:null},excludeContacts:{type:Array,default:()=>[]},visible:{type:Boolean,default:!1}},data(){return{error:{},contacts:[],isLoading:!1,isSubmitting:!1,isUserFormShown:!0}},methods:{onSubmit(){const{contacts:t}=this;t.length?(this.isSubmitting=!0,Object(z["a"])(this.labelId,t.map(t=>t.id)).then(()=>{this.$emit("success"),this.close()}).catch(t=>{const e=t||"Couldn't add contacts.";this.$toast.error(e)}).finally(()=>{this.isSubmitting=!1})):this.$toast.error("Please select contacts to continue")},close(){this.contacts=[],this.$emit("close")}}},X=Q,Y=s("2877"),Z=Object(Y["a"])(X,H,W,!1,null,"44f3add7",null),tt=Z.exports,et=s("9559"),st=s("7228"),at=s("c2cd"),it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Import contacts "+(t.label.name?"to "+t.label.name:""),visible:t.visible,"modal-style":"max-width: min-content;"},on:{closed:t.reset,close:t.close}},[s("Block",{staticClass:"px-4"},[s("CardLoader",{attrs:{"is-loading":t.isLoading}},[s("Block",{style:{height:"180px",width:"450px "}},[s("FileUploader",{attrs:{info:"Drop your excel or csv file here",mimes:[".xls",".xlsx",".csv"]},on:{upload:t.onFileUpload}})],1)],1)],1),s("template",{slot:"footer"},[s("Button",{attrs:{color:"secondary"},on:{click:t.close}},[t._v(" Cancel ")])],1),s("ResultContacts",{attrs:{"label-id":t.label.id,visible:t.isResultModalShown},on:{success:t.onSuccess,close:function(e){t.isResultModalShown=!1}},model:{value:t.contacts,callback:function(e){t.contacts=e},expression:"contacts"}})],2)},ot=[],lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Form",{staticClass:"file-upload m-auto d-flex justify-content-center",class:{dragging:t.isDragging},on:{dragenter:function(e){t.isDragging=!0},dragover:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),t.onFileDrop(e)},dragleave:function(e){t.isDragging=!1}}},[s("Block",{staticClass:"d-flex flex-column justify-content-center align-items-center",class:{"disable-pointer-event":t.isDragging}},[s("Icon",{staticClass:"fa-4x",attrs:{type:"si",name:"cloud-download"}}),s("span",{staticClass:"mt-2"},[t._v(" "+t._s(t.info)+". Or, ")]),s("Button",{staticClass:"mt-2",attrs:{size:"sm",color:"primary",bordered:""},on:{click:t.openFileExplorer}},[t._v(" Select from your device ")]),s("input",{ref:"inputFile",staticClass:"d-none",attrs:{type:"file",accept:t.accept},on:{change:t.onFileSelect}})],1)],1)},nt=[],rt=(s("ddb0"),s("6436")),ct={name:"FileUploader",components:{Icon:N["a"],Form:rt["a"],Block:q["a"],Button:P["a"]},props:{info:{type:String,default:"Drop your files here"},mimes:{type:[String,Array],default:""}},data(){return{isDragging:!1}},computed:{accept(){const{mimes:t}=this;return"string"===typeof t?t:t.join(",")}},methods:{getFiles(t){const e=[];if(t.items.length)for(const s of t.items){const t=s.getAsFile();e.push(t)}else if(t.files.length)for(const s of t.files)e.push(s);return e},openFileExplorer(){this.$refs.inputFile.click()},onUpload(t){this.$emit("upload",t),this.$refs.inputFile.value=""},onFileDrop(t){this.isDragging=!1;const e=this.getFiles(t.dataTransfer);e.length&&this.onUpload(e)},onFileSelect({target:t}){this.isDragging=!1;const{files:e}=t;e.length&&this.onUpload(e)}}},dt=ct,ut=(s("243a"),Object(Y["a"])(dt,lt,nt,!1,null,"7a663418",null)),ht=ut.exports,pt=s("0e85"),mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Result contacts ("+t.contacts.length+")",visible:t.visible,"hide-controls":"","modal-style":"max-width: max-content;"},on:{close:t.close}},[s("Block",{staticClass:"px-4"},[s("p",{staticClass:"mb-2"},[t._v(" Select appropriate column fields ("),s("span",{class:t.checkRequired?"":"text-danger"},[t._v("fields with '*' are required")]),t._v(" and "),s("span",{class:t.checkDuplicates?"":"text-danger"},[t._v("duplicate fields are not allowed")]),t._v("): "),s("br"),t._v(" Also make sure to edit all the invalid records. ")]),s("Block",{staticClass:"conf-table-wrapper"},[s("table",{staticClass:"table table-borderless table-striped m-0 border"},[s("thead",{staticClass:"w-100 border-bottom"},[s("tr",[s("th",{staticStyle:{width:"60px"}},[t._v(" # ")]),t._l(t.columns,(function(e){return s("th",{key:e,staticClass:"text-nowrap"},[s("InputSelect",{staticClass:"mb-0",attrs:{options:t.fields,"option-text":"name","option-value":"id"},model:{value:t.selected[e-1],callback:function(s){t.$set(t.selected,e-1,s)},expression:"selected[index - 1]"}})],1)})),s("th"),s("th",{staticStyle:{width:"60px"}})],2)]),t.contacts.length?s("tbody",t._l(t.contacts,(function(e,a){return s("tr",{key:a},[s("td",{staticStyle:{width:"60px"}},[t._v(" "+t._s(a+1)+" ")]),t._l(Object.keys(e),(function(i,o){return s("td",{key:o,style:"message"===i?"width: 0;":""},["status"===i?[s("FlexBox",{class:e.status?"text-success":"text-danger cursor-help",attrs:{"align-items":"center",title:e.message}},[s("span",{staticClass:"mr-2"},[t._v(t._s(e.status?"Looks good":"Error"))]),"status"===i&&e.message?s("Icon",{attrs:{type:"si",name:"info",color:"danger"}}):t._e()],1)]:"message"===i?[s("Block",{staticStyle:{width:"0"}})]:[e.status?s("span",{staticClass:"text-wrap-break-word"},[t._v(" "+t._s(e[i])+" ")]):s("InputText",{staticClass:"m-0 p-0",attrs:{material:!0},model:{value:t.contacts[a][i],callback:function(e){t.$set(t.contacts[a],i,e)},expression:"contacts[index][key]"}})]],2)})),s("td",{staticStyle:{width:"60px"}},[t.contacts.length>1?s("Button",{staticClass:"p-2 mx-1 text-danger",attrs:{color:"light",title:"delete contact"},on:{click:function(e){return t.deleteRecord(a)}}},[s("Icon",{attrs:{type:"fa",name:"trash",size:"regular"}})],1):t._e()],1)],2)})),0):s("tbody",[s("tr",[s("td",{attrs:{colspan:t.columns.length}})])])])])],1),s("FlexBox",{staticClass:"py-3 px-4",attrs:{"align-items":"start",justify:"between"}},[s("span",{staticClass:"link select-none",on:{click:t.loadContacts}},[t._v(" Reset records ")]),s("Block",[s("Button",{staticClass:"mr-2",attrs:{color:"primary",disabled:!t.validated||t.isLoading,loading:t.isLoading},on:{click:t.createContacts}},[t._v(" Confirm ")]),s("Button",{attrs:{color:"secondary"},on:{click:t.close}},[t._v(" Cancel ")])],1)],1)],1)},ft=[],bt=s("e9b6"),gt=s("0af5"),vt=s("dc4c"),xt=s("7fb4"),yt={name:"ResultContacts",components:{InputText:xt["a"],FlexBox:et["a"],Block:q["a"],Modal:G["a"],Icon:N["a"],InputSelect:gt["a"],Button:P["a"]},props:{value:{type:Array,default:()=>[]},labelId:{type:Number,default:null},visible:{type:Boolean,default:!1}},data(){return{contacts:[],selected:[],isLoading:!1,isValidated:!1,isDeleteContactModalShown:!1}},computed:{fields(){return[{id:null,name:"Select field",selected:!0,disabled:!0,hidden:!0},{id:null,name:"--none--"},...bt]},columns(){const{contacts:t}=this;return t.length?Object.keys(t[0]).length-2:[]},checkDuplicates(){const{selected:t}=this,e=t.filter(t=>t);return!e.length||new Set(e).size===e.length},checkRequired(){const{fields:t,selected:e}=this,s=e.filter(t=>t);if(s.length){const s=t.filter(t=>t.required).map(t=>t.id);return s.filter(t=>e.includes(t)).length===s.length}return!0},validated(){const{fields:t,selected:e,contacts:s,checkRequired:a}=this;if(!a)return!1;const i=e.filter(t=>t);if(s.length&&new Set(i).size===i.length){const s=t.filter(t=>t.required).map(t=>t.id);if(s.filter(t=>e.includes(t)).length===s.length)return!0}return!1}},watch:{value:{handler(t){Array.isArray(t)&&this.loadContacts()},immediate:!0}},methods:{ValidateContacts(t=!0){return Object(vt["a"])(this.selected,this.contacts).then(e=>{const s=e.filter(t=>!t.status);if(this.contacts=e,0!==s.length)throw this.isValidated=!1,new Error("Please edit/delete the invalid contacts.").message;this.isValidated=!0,t&&this.$toast.success("Contacts are validated")})},createContacts(){this.isLoading=!0,this.ValidateContacts(!1).then(()=>{if(this.isValidated){const t=this.getFormattedContacts();return Object(z["b"])(this.labelId,t)}}).then(({message:t})=>{this.$toast.success(t||"Contacts imported successfully"),this.$store.dispatch("listLabels",{force:!0}),this.$emit("success"),this.close()}).catch(t=>{const e=t||"There was an error while importing contacts.";this.$toast.error(e)}).finally(()=>{this.isLoading=!1})},getFormattedContacts(){const{selected:t,contacts:e}=this;return e.map(e=>{const s={},a=Object.keys(e);return a.forEach((a,i)=>{s[t[i]]=e[a]}),Object.keys(s).forEach(t=>this.isEmpty(t)&&delete s[t]),s})},loadContacts(){const{value:t}=this,e=[];t.forEach(t=>{e.push({...t})}),this.contacts=e,this.isValidated=!1},deleteRecord(t){this.contacts.splice(t,1)},close(){this.$emit("close"),this.contacts=[],this.selected=[]}}},Ct=yt,wt=(s("cf2c"),Object(Y["a"])(Ct,mt,ft,!1,null,"494c91e5",null)),kt=wt.exports,St={name:"ImportContact",components:{ResultContacts:kt,Button:P["a"],FileUploader:ht,CardLoader:at["a"],Block:q["a"],Modal:G["a"]},props:{label:{type:Object,default(){return{}}},visible:{type:Boolean,default:!1}},data(){return{contacts:[],isLoading:!1,isResultModalShown:!1}},methods:{onFileUpload(t){this.isLoading=!0;const e=t[0];e?Object(pt["a"])(e).then(t=>{if(!t.length)return this.$toast.error("contacts not found");this.contacts=t,this.isResultModalShown=!0}).catch(t=>{const e=t||"Couldn't parse contacts  from the file.";this.$toast.error(e)}).finally(()=>{this.isLoading=!1}):this.$toast.error("Please select a file to continue")},onSuccess(){this.$emit("success"),this.close()},close(){this.isLoading||this.$emit("close")},reset(){this.contact={},this.isLoading=!1,this.isResultModalShown=!1}}},Lt=St,_t=Object(Y["a"])(Lt,it,ot,!1,null,"50959a84",null),$t=_t.exports,Bt={name:"LabelDetail",components:{CardLoader:at["a"],FlexBox:et["a"],AddContacts:tt,DeleteLabel:J["a"],EditLabel:V["a"],Button:P["a"],Icon:N["a"],ContactsTable:U["a"],Block:q["a"],Skeleton:R,ImportContact:$t},data(){return{targetContact:{},isLoading:!1,isFiltering:!1,isComposing:!1,isEditModalShown:!1,isImportFormShown:!1,isDeleteModalShown:!1,isAddContactsModalShown:!1,isRemoveLabelContactModalShown:!1,label:{},contacts:[],errorMsg:"Hello world",pagination:{pages:1,current:1,perPage:15},filters:{keyword:""}}},watch:{"$route.params.id":{handler(){this.fetchData()}}},created(){this.$bus.on("reload-contacts-table",this.fetchData),this.fetchData()},beforeDestroy(){this.$bus.removeAllListeners("reload-contacts-table")},methods:{fetchData(t=!1,e){const{id:s}=this.$route.params;t?this.isFiltering=!0:this.isLoading=!0,Object(z["g"])(s).then(t=>(this.label=t,Object(z["f"])(s,{keyword:this.filters.keyword||null,page:e||this.pagination.current||null,per_page:this.pagination.perPage,labels:1}))).then(({data:t,meta:e})=>{this.contacts=t,this.pagination=Object(st["b"])(e)}).catch(t=>{this.$toast.error(t)}).finally(()=>{this.isLoading=!1,this.isFiltering=!1})},onImportSuccess(){this.fetchData()},onCompose(){this.isComposing=!0,Object(z["f"])(this.$route.params.id,{per_page:0}).then(({data:t})=>{this.$bus.emit("compose",{action:"New",recipients:t})}).catch(t=>{this.$toast.error(t)}).finally(()=>{this.isComposing=!1})},onDeleteLabel(){this.$router.go(-1),this.isDeleteModalShown=!1}}},Ft=Bt,Dt=(s("f674"),Object(Y["a"])(Ft,a,i,!1,null,null,null));e["default"]=Dt.exports},"8bd0":function(t,e,s){},"9ea2":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{staticClass:"delete-label-modal",attrs:{title:"Delete this label permanently?",visible:t.visible,loading:t.isLoading,"modal-style":"max-width: 550px;"},on:{close:t.close,success:t.deleteLabel}},[s("Block",{staticClass:"px-4"},[s("p",{staticClass:"mb-3"},[s("span",[t._v("The contacts will be released from the label and won't be affected.")])]),s("Block",{staticClass:"label-details"},[s("table",{staticClass:"w-100"},[s("tbody",[s("tr",[s("th",{staticStyle:{width:"100px"}},[t._v(" Label name: ")]),s("td",[t._v(" "+t._s(t.label.name||" N/A")+" ")])]),s("tr",[s("th",{staticStyle:{width:"70px"}},[t._v(" Contacts: ")]),s("td",[t._v(" "+t._s(t.label.total_contacts||" N/A")+" ")])]),s("tr",[s("th",{staticStyle:{width:"70px"}},[t._v(" Description: ")]),s("td",[s("Block",{staticClass:"description-block mb-3"},[s("read-more",{staticClass:"description-text",attrs:{text:t.label.description||"","max-chars":100,"more-str":"Show More"}})],1)],1)])])])])],1)],1)},i=[],o=s("78b5"),l=s("f85f"),n=s("0814"),r={name:"DeleteLabel",components:{Block:n["a"],Modal:o["a"]},props:{visible:{type:Boolean,default:!1},label:{type:Object,default(){return{}}}},data(){return{isLoading:!1}},methods:{deleteLabel(){this.isLoading=!0,Object(l["e"])(this.label.id).then(()=>{this.$emit("success"),this.$store.dispatch("listLabels",{force:!0}),this.$toast.success("Label deleted successfully!"),this.close()}).catch(t=>{const e=t||"Couldn't delete label.";this.$toast.error(e)}).finally(()=>{this.isLoading=!1,this.close()})},close(){this.isLoading||this.$emit("close")}}},c=r,d=(s("05ce"),s("2877")),u=Object(d["a"])(c,a,i,!1,null,null,null);e["a"]=u.exports},b881:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Update label","hide-controls":"","modal-style":"max-width: 500px;","modal-class":"pr-2",visible:t.visible},on:{closed:t.reset,close:t.close}},[s("CardLoader",{attrs:{"is-loading":t.isLoading}},[s("LabelForm",{attrs:{error:t.error,"is-loading":t.isSubmitting},on:{submit:t.updateLabel,cancel:t.close},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}})],1)],1)},i=[],o=s("f85f"),l=s("78b5"),n=s("f669"),r=s("c2cd"),c={name:"EditLabel",components:{CardLoader:r["a"],LabelForm:n["a"],Modal:l["a"]},props:{labelId:{type:[Number,String],default:null},visible:{type:Boolean,default:!1}},data(){return{label:{},error:{},isLoading:!1,isSubmitting:!1,isUserFormShown:!0}},watch:{visible(t){t&&this.fetchData()}},methods:{fetchData(){this.isLoading=!0,Object(o["g"])(this.labelId).then(t=>{this.label=t}).catch(()=>{this.close(),this.$toast.error("There was an error while fetching label data!")}).finally(()=>{this.isLoading=!1})},updateLabel(t){this.isSubmitting=!0;const{name:e,description:s}=t;Object(o["k"])(this.labelId,{name:e,description:s}).then(t=>{this.error={},this.close(),this.$emit("success",t),this.$store.dispatch("listLabels",{force:!0}),this.$toast.success("Label updated successfully"),this.close()}).catch(t=>{"object"===typeof t?this.error=t:this.$toast.error(t)}).finally(()=>{this.isSubmitting=!1})},close(){this.isLoading&&this.isSubmitting||this.$emit("close")},reset(){this.label={},this.isLoading=!1,this.isUserFormShown=!0}}},d=c,u=s("2877"),h=Object(u["a"])(d,a,i,!1,null,"7dfea746",null);e["a"]=h.exports},be95:function(t,e,s){t.exports={primary:"#FF6C37",inverse:"#343a40",secondary:"#343a40",success:"#9ccc65",info:"#26c6da",warning:"#ffca28",danger:"#ef5350"}},cf2c:function(t,e,s){"use strict";s("10db3")},dd70:function(t,e,s){},e7ba:function(t,e,s){t.exports={primary:"#FF6C37",inverse:"#343a40",secondary:"#343a40",success:"#9ccc65",info:"#26c6da",warning:"#ffca28",danger:"#ef5350"}},e9b6:function(t){t.exports=JSON.parse('[{"id":"name","name":"Full Name","dataType":"string","required":false},{"id":"phone","name":"Mobile Number *","dataType":"string","required":true},{"id":"email","name":"Email","dataType":"string","required":false},{"id":"address","name":"Address","dataType":"string","required":false}]')},f669:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("CardLoader",{attrs:{"is-loading":t.isFetchingData}},[s("Form",{staticClass:"px-2 pb-2",on:{submit:t.onSubmit}},[s("table",{staticClass:"table-borderless w-100"},[s("tr",[s("th",{staticStyle:{width:"60px"},attrs:{scope:"row"}},[s("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[s("Icon",{attrs:{name:"user",size:"large",color:"muted"}})],1)],1),s("td",{attrs:{colspan:"2"}},[s("InputText",{attrs:{required:"",type:"text",title:"Label Name",error:t.error.name},model:{value:t.label.name,callback:function(e){t.$set(t.label,"name",e)},expression:"label.name"}})],1)]),s("tr",[s("th",{attrs:{scope:"row"}},[s("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[s("Icon",{staticClass:"fa-rotate-90",attrs:{name:"file",size:"regular",color:"muted"}})],1)],1),s("td",{attrs:{colspan:"2"}},[s("InputTextArea",{attrs:{title:"Description",rows:"3",error:t.error.description},model:{value:t.label.description,callback:function(e){t.$set(t.label,"description",e)},expression:"label.description"}})],1)])]),s("FlexBox",{staticClass:"px-2",attrs:{justify:"end"}},[s("Button",{staticClass:"mr-2",attrs:{type:"submit",color:"primary",disabled:t.isLoading,loading:t.isLoading}},[t._v(" Save ")]),s("Button",{attrs:{color:"secondary"},on:{click:function(e){return t.$emit("cancel")}}},[t._v(" Cancel ")])],1)],1)],1)},i=[],o=s("6436"),l=s("7fb4"),n=s("5d35"),r=s("9559"),c=s("c6b1"),d=s("ad4f"),u=s("c2cd"),h={name:"LabelForm",components:{CardLoader:u["a"],Button:d["a"],InputTextArea:c["a"],FlexBox:r["a"],Icon:n["a"],InputText:l["a"],Form:o["a"]},props:{value:{type:Object,default(){return{}}},error:{type:Object,default(){return{}}},isLoading:{type:Boolean}},data(){return{isFetchingData:!1,label:{name:"",description:""}}},computed:{},watch:{value:{handler(){const{value:t,label:e}=this;this.label={...e,...t}},immediate:!0}},methods:{onSubmit(){this.$emit("submit",this.label)}}},p=h,m=(s("fc7d"),s("2877")),f=Object(m["a"])(p,a,i,!1,null,"756a1623",null);e["a"]=f.exports},f674:function(t,e,s){"use strict";s("be95")},fc7d:function(t,e,s){"use strict";s("8bd0")}}]);