(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Revenue"],{"00dc":function(t,e,a){"use strict";a("7b23")},"020b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{staticClass:"card-base block custom-box-shadow"},[t._t("default")],2)},s=[],i=a("0814"),r={name:"CardBase",components:{Block:i["a"]}},o=r,l=a("2877"),c=Object(l["a"])(o,n,s,!1,null,"64f32f13",null);e["a"]=c.exports},"0af5":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("InputBase",{attrs:{title:t.title,required:t.required,info:t.info,error:t.error},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.id,s=e.isInvalid;return[a("select",{ref:"input",staticClass:"form-control",class:{"is-invalid":s},attrs:{id:n,required:t.required,placeholder:t.placeholder,disabled:t.disabled},domProps:{value:t.value},on:{input:t.updateInput}},t._l(t.options,(function(e,n){return a("option",{key:n,attrs:{disabled:e.disabled,hidden:e.hidden},domProps:{selected:e.selected,value:t.getOptionValue(e)}},[t._v(" "+t._s(t.getOptionText(e))+" ")])})),0)]}}])})},s=[],i=(a("a9e3"),a("850b")),r={name:"InputSelect",components:{InputBase:i["a"]},props:{title:{type:String,default:""},options:{type:Array,default:function(){return[]}},required:{type:Boolean,default:!1},value:{type:[String,Object,Number,Boolean],default:null},optionValue:{type:String,default:""},optionText:{type:String,default:""},error:{type:String,default:""},placeholder:{type:String,default:""},info:{type:String,default:""},disabled:{type:Boolean}},methods:{updateInput:function(){this.$emit("input",this.$refs.input.value),this.$emit("select",this.$refs.input.value)},getOptionValue:function(t){return this.optionValue?t[this.optionValue]:t},getOptionText:function(t){return this.optionText?t[this.optionText]:t}}},o=r,l=a("2877"),c=Object(l["a"])(o,n,s,!1,null,null,null);e["a"]=c.exports},"0f8e":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column-reverse",justify:"between","align-items":"end"}},[a("Block",{staticClass:"p-2"},[t._v(" "+t._s(t.pagination.message)+" ")]),a("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column",justify:"between","align-items":"end"}},[a("InputSelect",{staticClass:"my-2 my-lg-0",attrs:{options:t.perPages},on:{select:function(e){return t.$emit("change")}},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}}),a("nav",{staticClass:"ml-3"},[a("ul",{staticClass:"pagination disable-user-select mb-0"},[a("li",{staticClass:"page-item",class:{disabled:!t.isPreviousable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current-1)}}},[a("span",{staticClass:"page-link"},[t._v("Previous")])]),t._l(t.pages,(function(e,n){return a("li",{key:n,staticClass:"page-item",class:{active:t.current===e}},[a("a",{staticClass:"page-link btn-primary",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCurrent(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!t.isNextable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current+1)}}},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)])],1)],1)},s=[],i=(a("a9e3"),a("2ef0")),r=a("9559"),o=a("0814"),l=a("0af5"),c={name:"Pagination",components:{InputSelect:l["a"],Block:o["a"],FlexBox:r["a"]},props:{visibleLength:{type:Number,default:5},pagination:{type:Object,default:function(){return{}}}},data:function(){return{offset:0,perPages:[5,15,25,50,100],pages:[]}},computed:{current:function(){return this.pagination.current||1},length:function(){return this.pagination.pages||1},isNextable:function(){return this.length>this.current},isPreviousable:function(){return this.current>1}},watch:{length:{handler:function(){this.unWatchCurrentPageValue();var t=this.visibleLength,e=Math.ceil(t/2)+(t%2?0:1);this.offset=t-(t-e+1),this.generatePagination(),this.length>this.visibleLength&&(this.unWatchCurrentPageValue=this.$watch("current",this.generatePagination))},immediate:!0}},methods:{unWatchCurrentPageValue:function(){},generatePagination:function(){var t=this.current,e=this.offset,a=this.length,n=this.visibleLength,s=t-e;s<1&&(s=1);var r=s+n;r>a&&(r=a+1,s=r-n,s<1&&(s=1)),this.pages=Object(i["range"])(s,r)},setCurrent:function(t){var e=t;t<=1?e=1:t>=this.length&&(e=this.length),e!==this.current&&this.$emit("change",e)}}},u=c,d=(a("5148"),a("2877")),p=Object(d["a"])(u,n,s,!1,null,"64c09d8e",null);e["a"]=p.exports},"1a1f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{staticClass:"mt-xl-n4 mb-4"},[a("Column",{attrs:{md:"6"}},[a("h5",{staticClass:"m-0 text-muted"},[t._t("default")],2)]),a("Column",{attrs:{md:"6"}},[a("FlexBox",{attrs:{justify:"end"}},[t._t("extra")],2)],1)],1)},s=[],i=a("1b32"),r=a("9559"),o=a("27dc"),l={name:"ContentHeader",components:{Row:o["a"],FlexBox:r["a"],Column:i["a"]}},c=l,u=a("2877"),d=Object(u["a"])(c,n,s,!1,null,"a5aed03a",null);e["a"]=d.exports},"311b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Credit Balance",visible:t.visible,loading:t.isSubmitting,disabled:!t.validated},on:{success:t.submit,close:t.close,closed:t.reset}},[a("Block",{staticClass:"px-4"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("ForeShadow",{attrs:{visible:t.isLoading}},[a("table",{staticClass:"table-borderless w-100"},[a("tr",[a("th",{attrs:{scope:"row"}},[a("Icon",{attrs:{name:"building-o",size:"large",color:"muted"}})],1),a("td",[a("InputSelect",{attrs:{options:t.userOptions,"option-value":"id","option-text":"info",title:"User",disabled:t.disableUserInput,required:""},model:{value:t.credit.user,callback:function(e){t.$set(t.credit,"user",e)},expression:"credit.user"}})],1)]),a("tr",[a("th",{staticStyle:{width:"40px"},attrs:{scope:"row"}},[a("Icon",{attrs:{name:"database",size:"large",color:"muted"}})],1),a("td",[a("InputNumber",{attrs:{required:"",type:"text",title:"Amount",error:t.error.amount},model:{value:t.credit.amount,callback:function(e){t.$set(t.credit,"amount",e)},expression:"credit.amount"}})],1)]),a("tr",[a("th",{attrs:{scope:"row"}},[a("Icon",{attrs:{name:"cc-mastercard",size:"medium",color:"muted"}})],1),a("td",[a("InputSelect",{staticClass:"flex-auto",attrs:{title:"Method",options:["API","BANK","CARD","CASH","TRIAL","QR","WALLET"],required:"",type:"text",error:t.error.credit_method},model:{value:t.credit.method,callback:function(e){t.$set(t.credit,"method",e)},expression:"credit.method"}})],1)]),a("tr",[a("th",{attrs:{scope:"row"}},[a("Icon",{staticClass:"fa-rotate-90",attrs:{name:"file",size:"large",color:"muted"}})],1),a("td",{attrs:{colspan:"2"}},[a("InputTextArea",{staticClass:"mb-2",attrs:{rows:"2",title:"Description"},model:{value:t.credit.description,callback:function(e){t.$set(t.credit,"description",e)},expression:"credit.description"}})],1)])])])],1)])],1)},s=[],i=(a("a4d3"),a("e01a"),a("99af"),a("d3b7"),a("2909")),r=a("78b5"),o=a("d855"),l=a("5d35"),c=a("e1778"),u=a("0af5"),d=a("c6b1"),p=a("0814"),f=a("c652"),m={name:"CreditBalance",components:{InputNumber:f["a"],Block:p["a"],InputTextArea:d["a"],InputSelect:u["a"],Icon:l["a"],Modal:r["a"],ForeShadow:o["a"]},props:{users:{type:Array,default:function(){return[]}},user:{type:Object,default:function(){return{}}},disableUserInput:{type:Boolean},visible:{type:Boolean},isLoading:{type:Boolean}},data:function(){return{credit:{amount:null,method:"CASH",user:null,description:""},error:{},isSubmitting:!1}},computed:{userOptions:function(){return[{id:null,info:"~ Select User ~",selected:!0}].concat(Object(i["a"])(this.users))},validated:function(){var t=this.credit,e=t.amount,a=t.user,n=t.method;return a&&n&&e}},watch:{visible:{handler:function(t){t&&(this.credit.user=this.user.id)},immediate:!0,deep:!0}},methods:{submit:function(){var t=this;this.isSubmitting=!0;var e=this.credit,a=e.amount,n=e.method,s=e.user,i=e.description;Object(c["a"])({user_id:parseInt(s,0),payment_method:n,amount:parseFloat(a),description:i}).then((function(){t.$toast.success("Amount credited successfully."),t.$emit("success"),t.close()})).catch((function(e){"string"===typeof e?t.$toast.error(e):t.error=e})).finally((function(){t.isSubmitting=!1}))},close:function(){this.$emit("close"),this.reset()},reset:function(){this.credit={amount:0,method:"CASH",user:null,description:""},this.isSubmitting=!1}}},h=m,g=a("2877"),b=Object(g["a"])(h,n,s,!1,null,null,null);e["a"]=b.exports},5148:function(t,e,a){"use strict";a("b994")},"7b23":function(t,e,a){},9197:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{staticClass:"mb-4"},[a("h5",[t._v("Deposits History")]),a("CardBase",{class:t.isLoading?"":"with-table"},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("Block",{staticClass:"table-responsive collapsible"},[t.deposits.length?a("table",{staticClass:"table m-0"},[a("thead",{staticClass:"bg-gray-lighter"},[a("tr",[a("th",{staticStyle:{width:"70px"}},[t._v(" # ")]),t.showUser?a("th",{staticClass:"pl-4 wrappable"},[t._v(" User ")]):t._e(),a("th",{staticStyle:{"min-width":"120px"}},[t._v(" Amount ")]),a("th",{staticStyle:{"min-width":"100px"}},[t._v(" Method ")]),a("th",{staticClass:"wrapable",staticStyle:{width:"20%"}},[t._v(" Description ")]),a("th",{staticStyle:{width:"100px"}},[t._v(" Status ")]),a("th",{staticClass:"text-right px-4",staticStyle:{"min-width":"120px"}},[t._v(" Date ")]),a("th",{staticClass:"text-right px-4",staticStyle:{"min-width":"120px"}},[t._v(" Created ")])])]),a("tbody",t._l(t.deposits,(function(e){return a("tr",{key:e.id,on:{click:function(a){return t.$emit("view",e.id)}}},[a("td",[a("span",{staticClass:"hidden-info"},[t._v("#")]),a("span",[t._v(t._s(e.id))])]),t.showUser?a("td",{staticClass:"pl-4"},[a("span",{staticClass:"hidden-info"},[t._v("User")]),a("span",{staticClass:"wrappable"},[t._v(t._s(e.display_name||"N/A"))])]):t._e(),a("td",[a("span",{staticClass:"hidden-info"},[t._v("Amount")]),a("span",{staticClass:"text-currency"},[t._v(t._s(t.currencyFormat(e.amount)))])]),a("td",[a("span",{staticClass:"hidden-info"},[t._v("Method")]),a("span",[t._v(t._s(e.payment_method))])]),a("td",{staticClass:"wrapable pr-5",staticStyle:{"max-width":"30%"}},[a("span",{staticClass:"hidden-info"},[t._v("Description")]),a("span",{staticClass:"description",attrs:{title:"CREATED"===e.status?e.description:e.remark}},[t._v(" "+t._s(("CREATED"===e.status?e.description:e.remark)||" N/A")+" ")])]),a("td",[a("span",{staticClass:"hidden-info"},[t._v("Status")]),a("span",{class:"VERIFIED"===e.status?"text-success":"CANCELLED"===e.status?"text-danger":""},[t._v(" "+t._s("CREATED"===e.status?"-":e.status)+" ")])]),a("td",{staticClass:"text-right px-4"},[a("span",{staticClass:"hidden-info"},[t._v("Date:")]),a("span",[t._v(t._s("CREATED"===e.status?"-":t.duration(e.status_date)))])]),a("td",{staticClass:"text-right px-4"},[a("span",{staticClass:"hidden-info"},[t._v("Created:")]),a("span",[t._v(t._s(t.duration(e.created_at)))])])])})),0)]):a("Block",{staticClass:"min-height-300 d-flex flex-row justify-content-center align-items-center"},[a("h4",{staticClass:"text-gray-dark font-w300"},[t._v(" Deposits not Found ")])])],1)],1)],1),a("Pagination",{staticClass:"my-2 my-lg-0",attrs:{pagination:t.pagination},on:{change:t.changePagination}})],1)},s=[],i=a("020b"),r=a("0f8e"),o=a("c2cd"),l=a("0814"),c={name:"DepositsTable",components:{Block:l["a"],CardBase:i["a"],Pagination:r["a"],CardLoader:o["a"]},props:{deposits:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{}}},isLoading:{type:Boolean},showUser:{type:Boolean}},data:function(){return{}},methods:{changePagination:function(t){this.pagination.current=t,this.$emit("reload",t)}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,s,!1,null,null,null);e["a"]=p.exports},b994:function(t,e,a){},c652:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("InputBase",{attrs:{title:t.title,required:t.required,error:t.error,"label-class":t.labelClass},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.id,s=e.isInvalid;return[a("input",{ref:"input",staticClass:"form-control",class:{"is-invalid":s,"input-lg":"lg"===t.size},attrs:{id:n,type:"number",min:t.min,max:t.max,step:t.step,required:!!t.required,placeholder:t.placeholder,disabled:t.disabled,autofocus:t.autofocus},domProps:{value:t.value},on:{input:t.updateInput}})]}}])})},s=[],i=(a("a9e3"),a("850b")),r={name:"InputNumber",components:{InputBase:i["a"]},props:{title:{type:String,default:""},value:{type:[Number,String],default:0},required:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},error:{type:String,default:""},size:{type:String,default:""},min:{type:Number,default:null},max:{type:Number,default:null},step:{type:Number,default:null},labelClass:{type:String,default:""}},methods:{updateInput:function(){var t=this.$refs.input.value;this.$emit("input",t),this.$emit("change",t)}}},o=r,l=a("2877"),c=Object(l["a"])(o,n,s,!1,null,null,null);e["a"]=c.exports},d855:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{class:{"position-relative":t.visible}},[t._t("default"),t.visible?a("Block",{staticClass:"drop-shadow"}):t._e()],2)},s=[],i=a("0814"),r={name:"ForeShadow",components:{Block:i["a"]},props:{visible:{type:Boolean,default:!1}}},o=r,l=(a("00dc"),a("2877")),c=Object(l["a"])(o,n,s,!1,null,"d9579a32",null);e["a"]=c.exports},d9e1:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("InputBase",{attrs:{title:t.title},scopedSlots:t._u([{key:"default",fn:function(e){return[a("RangePicker",{staticClass:"w-100",attrs:{ranges:{Today:[t.moment(),t.moment()],"This Month":[t.moment(),t.moment().endOf("month")]}},on:{change:t.onChange}})]}}])})},s=[],i=(a("9980"),a("0bb7")),r=a("c1df"),o=a.n(r),l=a("2ef0"),c=a("850b"),u={name:"DateRangePicker",components:{InputBase:c["a"],RangePicker:i["a"].RangePicker},props:{title:{type:String,default:""},value:{type:Object,default:function(){return{type:"period",from:"",to:""}}}},data:function(){return{from:null,to:null}},watch:{value:{handler:function(t){var e=t.from,a=t.to;this.from=e?o()(e,"YYYY-MM-DD"):this.from,this.to=e?o()(a,"YYYY-MM-DD"):this.to},immediate:!0,deep:!0}},created:function(){this.debounce&&(this.onChange=Object(l["debounce"])(this.onChange,this.debounce))},methods:{moment:o.a,onChange:function(t,e){this.$emit("input",{from:e[0],to:e[1]}),this.$emit("change")}}},d=u,p=a("2877"),f=Object(p["a"])(d,n,s,!1,null,"2d659a7f",null);e["a"]=f.exports},dbba:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CardBase",{staticClass:"p-4 block-sticky-options"},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("div",{staticClass:"block-options"},[a("div",{staticClass:"block-options-item"},[a("Icon",{staticClass:"fa-2x text-body-bg-dark",attrs:{type:t.iconType,name:t.icon}})],1)]),a("h5",{staticClass:"m-0"},[t._v(" "+t._s(t.title)+" ")]),t._t("default",[a("h1",{staticClass:"text-3xl m-0"},[t._v(" "+t._s(t.content)+" ")])]),a("span",[t._v(t._s(t.remark))])],2)],1)},s=[],i=(a("a9e3"),a("020b")),r=a("5d35"),o=a("c2cd"),l={name:"DashCard",components:{CardLoader:o["a"],Icon:r["a"],CardBase:i["a"]},props:{title:{type:String,default:""},content:{type:[String,Number],default:""},remark:{type:String,default:""},color:{type:String,default:"primary"},icon:{type:String,default:""},iconType:{type:String,default:"fa"},isLoading:{type:Boolean}}},c=l,u=a("2877"),d=Object(u["a"])(c,n,s,!1,null,null,null);e["a"]=d.exports},e1778:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return o}));var n=a("9819");function s(t){var e=t.cancelPrevious,a=void 0===e||e;return Object(n["a"])({url:"deposits",method:"get",params:t,cancelPrevious:a})}function i(t){return Object(n["a"])({url:"deposits/balance",method:"get",params:t})}function r(t){return Object(n["a"])({url:"deposits",method:"post",data:t})}function o(t){return Object(n["a"])({url:"deposits/aggregate",method:"get",params:t})}},fd4a:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",[a("ContentHeader",[a("template",{slot:"extra"},[a("Button",{staticClass:"ml-2 btn-noborder",attrs:{color:"primary"},on:{click:function(e){t.isCreditFormShown=!0}}},[a("FlexBox",{attrs:{"align-items":"center"}},[a("Icon",{attrs:{type:"si",name:"plus",size:"medium"}}),a("span",{staticClass:"ml-2"},[t._v("Credit Balance")])],1)],1)],1)],2),a("Block",[a("Row",[a("Column",{attrs:{xl:"3",md:"6"}},[a("DashCard",{staticClass:"px-lg-5",attrs:{title:"Daily","icon-type":"si",icon:"clock","is-loading":t.isFetchingRevenue}},[a("h1",{staticClass:"text-currency text-2xl m-0"},[t._v(" "+t._s(t.currencyFormat(t.revenue.daily))+" ")])])],1),a("Column",{attrs:{xl:"3",md:"6"}},[a("DashCard",{staticClass:"px-lg-5",attrs:{title:"Weekly","icon-type":"si",icon:"calendar","is-loading":t.isFetchingRevenue}},[a("h1",{staticClass:"text-currency text-2xl m-0"},[t._v(" "+t._s(t.currencyFormat(t.revenue.weekly))+" ")])])],1),a("Column",{attrs:{xl:"3",md:"6"}},[a("DashCard",{staticClass:"px-lg-5",attrs:{title:"Monthly",icon:"calendar","is-loading":t.isFetchingRevenue}},[a("h1",{staticClass:"text-currency text-2xl m-0"},[t._v(" "+t._s(t.currencyFormat(t.revenue.monthly))+" ")])])],1),a("Column",{attrs:{xl:"3",md:"6"}},[a("DashCard",{staticClass:"px-lg-5",attrs:{title:"Yearly","icon-type":"si",icon:"globe","is-loading":t.isFetchingRevenue}},[a("h1",{staticClass:"text-currency text-2xl m-0"},[t._v(" "+t._s(t.currencyFormat(t.revenue.yearly))+" ")])])],1)],1)],1),a("Filters",{attrs:{users:t.users,"data-filters":t.dataFilters},on:{reload:t.fetchDeposits}}),a("DepositsTable",{attrs:{deposits:t.deposits,"is-loading":t.isFetchingDeposits||t.isLoading,pagination:t.pagination,"show-user":!0},on:{reload:t.fetchDeposits}}),a("CreditBalance",{attrs:{users:t.users,visible:t.isCreditFormShown,"is-loading":t.isLoading},on:{success:t.fetchData,close:function(e){t.isCreditFormShown=!1}}})],1)},s=[],i=(a("d3b7"),a("3ca3"),a("ddb0"),a("5530")),r=a("2f62"),o=a("e1778"),l=a("7228"),c=a("0814"),u=a("1a1f"),d=a("27dc"),p=a("1b32"),f=a("5d35"),m=a("9197"),h=a("9559"),g=a("ad4f"),b=a("dbba"),v=a("311b"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CardBase",{staticClass:"p-4 mb-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("InputSelect",{attrs:{options:t.userList,"option-value":"id","option-text":"info",title:"User"},on:{select:function(e){return t.$emit("reload")}},model:{value:t.dataFilters.user,callback:function(e){t.$set(t.dataFilters,"user",e)},expression:"dataFilters.user"}})],1),a("div",{staticClass:"col-md-4"},[a("InputSelect",{attrs:{title:"Method",options:t.paymentMethods,"option-text":"name","option-value":"value"},on:{select:function(e){return t.$emit("reload")}},model:{value:t.dataFilters.method,callback:function(e){t.$set(t.dataFilters,"method",e)},expression:"dataFilters.method"}})],1),a("div",{staticClass:"col-md-4"},[a("DateRangePicker",{attrs:{title:"Date Range"},on:{change:function(e){return t.$emit("reload")}},model:{value:t.dataFilters.dateRange,callback:function(e){t.$set(t.dataFilters,"dateRange",e)},expression:"dataFilters.dateRange"}})],1)])])},C=[],x=(a("99af"),a("2909")),_=a("020b"),k=a("0af5"),w=a("d9e1"),B={name:"Filters",components:{DateRangePicker:w["a"],InputSelect:k["a"],CardBase:_["a"]},props:{dataFilters:{type:Object,default:function(){return{}}},users:{type:Array,default:function(){return[]}}},data:function(){return{paymentMethods:[{name:"All",value:""},{name:"API",value:"API"},{name:"BANK",value:"BANK"},{name:"CARD",value:"CARD"},{name:"CASH",value:"CASH"},{name:"TRIAL",value:"TRIAL"},{name:"QR",value:"QR"},{name:"WALLET",value:"WALLET"}]}},computed:{userList:function(){return[{id:null,info:"All",selected:!0}].concat(Object(x["a"])(this.users))}}},S=B,D=a("2877"),F=Object(D["a"])(S,y,C,!1,null,"68f1278c",null),I=F.exports,O={name:"Balance",components:{Filters:I,CreditBalance:v["a"],DashCard:b["a"],Button:g["a"],FlexBox:h["a"],DepositsTable:m["a"],Icon:f["a"],Column:p["a"],Row:d["a"],ContentHeader:u["a"],Block:c["a"]},data:function(){return{isLoading:!1,isFetchingRevenue:!1,isFetchingDeposits:!1,isCreditFormShown:!1,revenue:{daily:0,weekly:0,monthly:0,yearly:0},deposits:[],dataFilters:{dateRange:{from:"",to:""},user:null,method:""},pagination:{pages:1,current:1,perPage:15}}},computed:Object(i["a"])(Object(i["a"])({},Object(r["c"])(["users"])),{},{filters:function(){var t=this.dataFilters,e=t.user,a=t.method,n=t.dateRange,s=this.pagination,r=s.current,o=s.perPage,l={user_id:parseInt(e,0)||null,payment_method:a||null,page:r,per_page:o},c=n.from,u=n.to;return(c||u)&&(l=Object(i["a"])(Object(i["a"])({},l),{},{start_date:c||null,end_date:u||null})),l}}),created:function(){this.fetchData()},mounted:function(){var t=this;this.$bus.on("router-link-clicked",(function(){t.isLoading||t.fetchData()}))},beforeDestroy:function(){this.$bus.removeAllListeners("router-link-clicked")},methods:Object(i["a"])(Object(i["a"])({},Object(r["b"])(["listUsers"])),{},{fetchRevenues:function(){var t=this;return this.isFetchingRevenue=!0,Object(o["b"])().then((function(e){var a=e.yearly,n=e.monthly,s=e.weekly,i=e.daily;t.revenue={yearly:a,monthly:n,weekly:s,daily:i}})).catch((function(e){t.$toast.error(e||"There was an error while fetching data.")})).finally((function(){t.isFetchingRevenue=!1}))},fetchDeposits:function(){var t=this;this.isFetchingDeposits=!0,Object(o["d"])(this.filters).then((function(e){var a=e.data,n=e.meta;t.deposits=a,t.pagination=Object(l["b"])(n),t.isLoading=!1})).catch((function(e){"request-cancel"!==e&&t.$toast.error("There was an error while fetching data.")})).finally((function(){t.isFetchingDeposits=!1}))},fetchData:function(){var t=this;this.isLoading=!0,Promise.all([this.listUsers(),this.fetchRevenues(),this.fetchDeposits()]).finally((function(){t.isLoading=!1}))},onBalanceDeposited:function(){this.fetchData()}})},$=O,j=Object(D["a"])($,n,s,!1,null,"52bbc0ca",null);e["default"]=j.exports}}]);