(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Labels"],{"020b":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{staticClass:"card-base block custom-box-shadow"},[t._t("default")],2)},n=[],i=a("0814"),l={name:"CardBase",components:{Block:i["a"]}},o=l,r=a("2877"),c=Object(r["a"])(o,s,n,!1,null,"64f32f13",null);e["a"]=c.exports},"05ce":function(t,e,a){"use strict";a("e7ba")},"0af5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("InputBase",{attrs:{title:t.title,required:t.required,info:t.info,error:t.error},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.id,n=e.isInvalid;return[a("select",{ref:"input",staticClass:"form-control",class:{"is-invalid":n},attrs:{id:s,required:t.required,placeholder:t.placeholder,disabled:t.disabled},domProps:{value:t.value},on:{input:t.updateInput}},t._l(t.options,(function(e,s){return a("option",{key:s,attrs:{disabled:e.disabled,hidden:e.hidden},domProps:{selected:e.selected,value:t.getOptionValue(e)}},[t._v(" "+t._s(t.getOptionText(e))+" ")])})),0)]}}])})},n=[],i=(a("a9e3"),a("850b")),l={name:"InputSelect",components:{InputBase:i["a"]},props:{title:{type:String,default:""},options:{type:Array,default:function(){return[]}},required:{type:Boolean,default:!1},value:{type:[String,Object,Number,Boolean],default:null},optionValue:{type:String,default:""},optionText:{type:String,default:""},error:{type:String,default:""},placeholder:{type:String,default:""},info:{type:String,default:""},disabled:{type:Boolean}},methods:{updateInput:function(){this.$emit("input",this.$refs.input.value),this.$emit("select",this.$refs.input.value)},getOptionValue:function(t){return this.optionValue?t[this.optionValue]:t},getOptionText:function(t){return this.optionText?t[this.optionText]:t}}},o=l,r=a("2877"),c=Object(r["a"])(o,s,n,!1,null,null,null);e["a"]=c.exports},"0f8e":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column-reverse",justify:"between","align-items":"end"}},[a("Block",{staticClass:"p-2"},[t._v(" "+t._s(t.pagination.message)+" ")]),a("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column",justify:"between","align-items":"end"}},[a("InputSelect",{staticClass:"my-2 my-lg-0",attrs:{options:t.perPages},on:{select:function(e){return t.$emit("change")}},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}}),a("nav",{staticClass:"ml-3"},[a("ul",{staticClass:"pagination disable-user-select mb-0"},[a("li",{staticClass:"page-item",class:{disabled:!t.isPreviousable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current-1)}}},[a("span",{staticClass:"page-link"},[t._v("Previous")])]),t._l(t.pages,(function(e,s){return a("li",{key:s,staticClass:"page-item",class:{active:t.current===e}},[a("a",{staticClass:"page-link btn-primary",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCurrent(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!t.isNextable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current+1)}}},[a("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)])],1)],1)},n=[],i=(a("a9e3"),a("2ef0")),l=a("9559"),o=a("0814"),r=a("0af5"),c={name:"Pagination",components:{InputSelect:r["a"],Block:o["a"],FlexBox:l["a"]},props:{visibleLength:{type:Number,default:5},pagination:{type:Object,default:function(){return{}}}},data:function(){return{offset:0,perPages:[5,15,25,50,100],pages:[]}},computed:{current:function(){return this.pagination.current||1},length:function(){return this.pagination.pages||1},isNextable:function(){return this.length>this.current},isPreviousable:function(){return this.current>1}},watch:{length:{handler:function(){this.unWatchCurrentPageValue();var t=this.visibleLength,e=Math.ceil(t/2)+(t%2?0:1);this.offset=t-(t-e+1),this.generatePagination(),this.length>this.visibleLength&&(this.unWatchCurrentPageValue=this.$watch("current",this.generatePagination))},immediate:!0}},methods:{unWatchCurrentPageValue:function(){},generatePagination:function(){var t=this.current,e=this.offset,a=this.length,s=this.visibleLength,n=t-e;n<1&&(n=1);var l=n+s;l>a&&(l=a+1,n=l-s,n<1&&(n=1)),this.pages=Object(i["range"])(n,l)},setCurrent:function(t){var e=t;t<=1?e=1:t>=this.length&&(e=this.length),e!==this.current&&this.$emit("change",e)}}},u=c,d=(a("5148"),a("2877")),p=Object(d["a"])(u,s,n,!1,null,"64c09d8e",null);e["a"]=p.exports},1824:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Confirmation",visible:t.visible,loading:t.loading,"modal-style":"max-width: 450px;"},on:{success:t.onSuccess,close:t.close}},[a("p",{staticClass:"px-4"},[t._v(" Are you sure you want to "+t._s(t.getState)+" "),a("span",[t._v(t._s(t.field))]),t._v("? ")])])},n=[],i=(a("d3b7"),a("78b5")),l={name:"UpdateStatus",components:{Modal:i["a"]},props:{field:{type:void 0,default:""},visible:{type:Boolean,default:!1},status:{type:Boolean,default:!1},state:{type:String,default:null},submission:{type:Function,default:function(){return Promise.reject(new Error("Unknown error occured"))}}},data:function(){return{loading:!1}},computed:{getState:function(){var t=this.state;return t||(this.status?"activate":"deactivate")}},methods:{onSuccess:function(){var t=this;this.loading=!0,this.submission().then((function(){t.$toast.success("Status updated successfully."),t.$emit("success"),t.close(!0)})).catch((function(e){t.$toast.error(e.message||e||"There was an error while updating status.")})).finally((function(){t.loading=!1}))},close:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading&&!t||this.$emit("close")}}},o=l,r=a("2877"),c=Object(r["a"])(o,s,n,!1,null,null,null);e["a"]=c.exports},"1a1f":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{staticClass:"mt-xl-n4 mb-4"},[a("Column",{attrs:{md:"6"}},[a("h5",{staticClass:"m-0 text-muted"},[t._t("default")],2)]),a("Column",{attrs:{md:"6"}},[a("FlexBox",{attrs:{justify:"end"}},[t._t("extra")],2)],1)],1)},n=[],i=a("1b32"),l=a("9559"),o=a("27dc"),r={name:"ContentHeader",components:{Row:o["a"],FlexBox:l["a"],Column:i["a"]}},c=r,u=a("2877"),d=Object(u["a"])(c,s,n,!1,null,"a5aed03a",null);e["a"]=d.exports},5148:function(t,e,a){"use strict";a("b994")},7462:function(t,e,a){"use strict";a("ef64")},"8bd0":function(t,e,a){},"9ea2":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"delete-label-modal",attrs:{title:"Delete this label permanently?",visible:t.visible,loading:t.isLoading,"modal-style":"max-width: 550px;"},on:{close:t.close,success:t.deleteLabel}},[a("Block",{staticClass:"px-4"},[a("p",{staticClass:"mb-3"},[a("span",[t._v("The contacts will be released from the label and won't be affected.")])]),a("Block",{staticClass:"label-details"},[a("table",{staticClass:"w-100"},[a("tbody",[a("tr",[a("th",{staticStyle:{width:"100px"}},[t._v(" Label name: ")]),a("td",[t._v(" "+t._s(t.label.name||" N/A")+" ")])]),a("tr",[a("th",{staticStyle:{width:"70px"}},[t._v(" Contacts: ")]),a("td",[t._v(" "+t._s(t.label.total_contacts||" N/A")+" ")])]),a("tr",[a("th",{staticStyle:{width:"70px"}},[t._v(" Description: ")]),a("td",[a("Block",{staticClass:"description-block mb-3"},[a("read-more",{staticClass:"description-text",attrs:{text:t.label.description||"","max-chars":100,"more-str":"Show More"}})],1)],1)])])])])],1)],1)},n=[],i=(a("d3b7"),a("78b5")),l=a("f85f"),o=a("0814"),r={name:"DeleteLabel",components:{Block:o["a"],Modal:i["a"]},props:{visible:{type:Boolean,default:!1},label:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1}},methods:{deleteLabel:function(){var t=this;this.isLoading=!0,Object(l["e"])(this.label.id).then((function(){t.$emit("success"),t.$store.dispatch("listLabels",{force:!0}),t.$toast.success("Label deleted successfully!"),t.close()})).catch((function(e){var a=e||"Couldn't delete label.";t.$toast.error(a)})).finally((function(){t.isLoading=!1,t.close()}))},close:function(){this.isLoading||this.$emit("close")}}},c=r,u=(a("05ce"),a("2877")),d=Object(u["a"])(c,s,n,!1,null,null,null);e["a"]=d.exports},ac13:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{class:t.spanClass,attrs:{title:t.textStatus},on:{click:function(e){return e.stopPropagation(),t.$emit("click")}}},[a("InputSwitch",{attrs:{color:"success"},on:{change:t.onChange},model:{value:t.inputStatus,callback:function(e){t.inputStatus=e},expression:"inputStatus"}})],1)},n=[],i=(a("a9e3"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"css-control css-control-sm css-switch",class:t.spanClass},[a("input",{ref:"input",staticClass:"css-control-input",attrs:{type:"checkbox"},domProps:{checked:t.value},on:{input:t.onInput}}),a("span",{staticClass:"css-control-indicator"}),t._v(" "+t._s(t.title)+" ")])}),l=[],o={name:"InputSwitch",props:{title:{type:String,default:""},value:{type:Boolean,default:!0},color:{type:String,default:"primary"}},computed:{spanClass:function(){return this.color?"css-control-".concat(this.color):""}},methods:{onInput:function(){var t=this.$refs.input.checked;this.$emit("input",t),this.$emit("change",t)}}},r=o,c=a("2877"),u=Object(c["a"])(r,i,l,!1,null,null,null),d=u.exports,p={name:"StatusColumn",components:{InputSwitch:d},props:{status:{type:Number,default:0}},data:function(){return{inputStatus:!1}},computed:{spanClass:function(){return this.status?"text-success":"text-danger"},textStatus:function(){return this.status?"active":"inactive"}},watch:{status:{handler:function(){this.inputStatus=!!this.status},immediate:!0}},methods:{onChange:function(t){var e=this;setTimeout((function(){e.inputStatus=!t,e.$emit("change",t)}))}}},f=p,h=Object(c["a"])(f,s,n,!1,null,null,null);e["a"]=h.exports},b881:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Update label","hide-controls":"","modal-style":"max-width: 500px;","modal-class":"pr-2",visible:t.visible},on:{closed:t.reset,close:t.close}},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("LabelForm",{attrs:{error:t.error,"is-loading":t.isSubmitting},on:{submit:t.updateLabel,cancel:t.close},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}})],1)],1)},n=[],i=(a("a4d3"),a("e01a"),a("b0c0"),a("a9e3"),a("d3b7"),a("53ca")),l=a("f85f"),o=a("78b5"),r=a("f669"),c=a("c2cd"),u={name:"EditLabel",components:{CardLoader:c["a"],LabelForm:r["a"],Modal:o["a"]},props:{labelId:{type:[Number,String],default:null},visible:{type:Boolean,default:!1}},data:function(){return{label:{},error:{},isLoading:!1,isSubmitting:!1,isUserFormShown:!0}},watch:{visible:function(t){t&&this.fetchData()}},methods:{fetchData:function(){var t=this;this.isLoading=!0,Object(l["g"])(this.labelId).then((function(e){t.label=e})).catch((function(){t.close(),t.$toast.error("There was an error while fetching label data!")})).finally((function(){t.isLoading=!1}))},updateLabel:function(t){var e=this;this.isSubmitting=!0;var a=t.name,s=t.description;Object(l["k"])(this.labelId,{name:a,description:s}).then((function(t){e.error={},e.close(),e.$emit("success",t),e.$store.dispatch("listLabels",{force:!0}),e.$toast.success("Label updated successfully"),e.close()})).catch((function(t){"object"===Object(i["a"])(t)?e.error=t:e.$toast.error(t)})).finally((function(){e.isSubmitting=!1}))},close:function(){this.isLoading&&this.isSubmitting||this.$emit("close")},reset:function(){this.label={},this.isLoading=!1,this.isUserFormShown=!0}}},d=u,p=a("2877"),f=Object(p["a"])(d,s,n,!1,null,"7dfea746",null);e["a"]=f.exports},b994:function(t,e,a){},dd08:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group"},[a("input",{ref:"searchInp",staticClass:"form-control",attrs:{type:"search",placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.setValue}}),t._m(0)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("i",{staticClass:"fa fa-search"})])])}],i=(a("a9e3"),a("2ef0")),l={name:"Search",props:{placeholder:{type:String,default:"Search"},value:{type:String,default:""},debounce:{type:Number,default:0}},created:function(){this.debounce&&(this.onChange=Object(i["debounce"])(this.onChange,this.debounce))},methods:{setValue:function(){var t=this.$refs.searchInp.value;this.$emit("input",t),this.onChange(t)},onChange:function(t){this.$emit("change",t)}}},o=l,r=a("2877"),c=Object(r["a"])(o,s,n,!1,null,"6ec74c60",null);e["a"]=c.exports},e7ba:function(t,e,a){t.exports={primary:"#FF6C37",inverse:"#343a40",secondary:"#343a40",success:"#9ccc65",info:"#26c6da",warning:"#ffca28",danger:"#ef5350"}},ef64:function(t,e,a){},f55b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",[a("ContentHeader",[a("template",{slot:"extra"},[a("Button",{staticClass:"ml-2 btn-noborder",attrs:{color:"primary"},on:{click:function(e){t.isCreateFormShown=!0}}},[a("FlexBox",{attrs:{"align-items":"center"}},[a("Icon",{attrs:{type:"si",name:"plus",size:"medium"}}),a("span",{staticClass:"ml-2"},[t._v("Create")])],1)],1)],1)],2),a("LabelsTable",{attrs:{"is-loading":t.isLoading,labels:t.labels,"data-filters":t.dataFilters,pagination:t.pagination},on:{reload:t.fetchData,view:t.onViewLabel,merge:t.onMergeLabel,delete:t.onDeleteLabel,edit:t.onEditLabel,compose:function(e){var a=e.label,s=e.index;return t.onCompose(a,s)}}}),a("CreateLabel",{attrs:{visible:t.isCreateFormShown},on:{success:t.onLabelCreated,close:function(e){t.isCreateFormShown=!1}}}),a("MergeLabel",{attrs:{visible:t.isMergeFormShown,label:t.targetLabel},on:{success:t.fetchData,close:function(e){t.isMergeFormShown=!1}}}),a("EditLabel",{attrs:{"label-id":t.targetLabel.id,visible:t.isEditModalShown},on:{success:t.fetchData,close:function(e){t.isEditModalShown=!1}}}),a("DeleteLabel",{attrs:{visible:t.isDeleteModalShown,label:t.targetLabel},on:{success:t.fetchData,close:function(e){t.isDeleteModalShown=!1}}})],1)},n=[],i=(a("d81d"),a("d3b7"),a("5530")),l=a("1a1f"),o=a("9ea2"),r=a("5d35"),c=a("9559"),u=a("ad4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Create label","hide-controls":"","modal-style":"max-width: 500px;","modal-class":"pr-2",visible:t.visible,loading:t.isLoading},on:{closed:t.reset,close:t.close}},[a("LabelForm",{attrs:{error:t.error,"is-loading":t.isLoading},on:{submit:t.createLabel,cancel:t.close}})],1)},p=[],f=(a("a4d3"),a("e01a"),a("b0c0"),a("53ca")),h=a("78b5"),b=a("f85f"),m=a("f669"),g={name:"CreateLabel",components:{LabelForm:m["a"],Modal:h["a"]},props:{visible:{type:Boolean,default:!1}},data:function(){return{error:{},isLoading:!1,isUserFormShown:!0}},methods:{createLabel:function(t){var e=this;this.isLoading=!0;var a=t.name,s=t.description;Object(b["c"])({name:a,description:s}).then((function(t){e.error={},e.$emit("success",t),e.$store.dispatch("listLabels",{force:!0}),e.$toast.success("Label added successfully"),e.$emit("close")})).catch((function(t){"object"===Object(f["a"])(t)?e.error=t:e.$toast.error(t)})).finally((function(){e.isLoading=!1}))},close:function(){this.isLoading||this.$emit("close")},reset:function(){this.label={},this.isLoading=!1,this.isUserFormShown=!0}}},v=g,C=a("2877"),x=Object(C["a"])(v,d,p,!1,null,"08ef5ca0",null),y=x.exports,S=a("7228"),L=a("0814"),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"Select a source label to merge "+t.label.name+".","hide-controls":"","modal-style":"max-width: 500px;","modal-class":"pr-2",visible:t.visible,loading:t.isLoading},on:{closed:t.reset,close:t.close}},[a("Block",{staticClass:"px-4"},[a("p",{staticClass:"text-primary mb-3"},[t._v(" After this process, "),a("span",{staticStyle:{"white-space":"nowrap"}},[t._v("label "),a("b",[t._v(t._s(t.label.name))])]),t._v(" will be removed automatically. ")]),a("InputSelect",{attrs:{title:"Target Label","option-value":"id","option-text":"name",options:t.whitelistLabels},on:{select:function(e){return t.$emit("reload")}},model:{value:t.targetId,callback:function(e){t.targetId=e},expression:"targetId"}}),a("FlexBox",{staticClass:"pb-2",attrs:{justify:"end"}},[a("Button",{staticClass:"mr-2",attrs:{color:"primary",disabled:t.isEmpty(t.targetId)||t.isSubmitting,loading:t.isSubmitting},on:{click:t.onSubmit}},[t._v(" Confirm ")]),a("Button",{attrs:{color:"secondary"},on:{click:t.close}},[t._v(" Cancel ")])],1)],1)],1)},_=[],$=(a("99af"),a("4de4"),a("2909")),k=a("2f62"),j=a("0af5"),B={name:"MergeLabel",components:{Button:u["a"],FlexBox:c["a"],InputSelect:j["a"],Block:L["a"],Modal:h["a"]},props:{visible:{type:Boolean,default:!1},label:{type:Object,default:function(){return{}}}},data:function(){return{error:{},isLoading:!1,isSubmitting:!1,targetId:null}},computed:Object(i["a"])(Object(i["a"])({},Object(k["c"])(["labels"])),{},{whitelistLabels:function(){var t=this.labels,e=void 0===t?[]:t,a=this.label,s=e.filter((function(t){var e=t.id;return e!==a.id}));return[{name:"Select a target label",value:"",disabled:!0}].concat(Object($["a"])(s))}}),created:function(){var t=this;this.isLoading=!0,this.listLabels({is_active:1}).catch((function(e){return t.$toast.error(e.message||e)})).finally((function(){t.isLoading=!1}))},methods:Object(i["a"])(Object(i["a"])({},Object(k["b"])(["listLabels"])),{},{onSubmit:function(){var t=this;this.isSubmitting=!0,Object(b["j"])(this.label.id,this.targetId).then((function(){t.error={},t.$emit("success"),t.$store.dispatch("listLabels",{force:!0}),t.$toast.success("Label merged successfully"),t.$emit("close")})).catch((function(e){"object"===Object(f["a"])(e)?t.error=e:t.$toast.error(e)})).finally((function(){t.isSubmitting=!1}))},close:function(){this.isLoading||this.$emit("close")},reset:function(){this.label={},this.isLoading=!1,this.isUserFormShown=!0}})},O=B,F=Object(C["a"])(O,w,_,!1,null,"3158e130",null),I=F.exports,M=a("b881"),D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Block",{staticClass:"mb-4"},[a("UpdateStatus",{attrs:{visible:t.isStatusModalShown,field:"label:<b>"+t.targetContact.name+"</b>",status:t.targetContact.status,submission:t.updateStatus},on:{success:t.setStatus,close:function(e){t.isStatusModalShown=!1}}}),a("CardBase",{staticClass:"p-4 mb-3"},[a("Row",[a("Block",{staticClass:"col-md-3"},[a("InputSelect",{attrs:{title:"Status","option-value":"value","option-text":"name",options:t.statuses},on:{select:function(e){return t.$emit("reload")}},model:{value:t.dataFilters.status,callback:function(e){t.$set(t.dataFilters,"status",e)},expression:"dataFilters.status"}})],1),a("Block",{staticClass:"col-md-6 offset-md-3"},[a("Search",{staticClass:"mt-4 pt-1",attrs:{debounce:500},on:{change:t.onSearch},model:{value:t.dataFilters.keyword,callback:function(e){t.$set(t.dataFilters,"keyword",e)},expression:"dataFilters.keyword"}})],1)],1)],1),a("CardBase",{class:t.isLoading?"":"with-table"},[a("CardLoader",{attrs:{"is-loading":t.isLoading}},[a("Block",{staticClass:"table-responsive collapsible"},[t.labels.length?a("table",{staticClass:"table table-hover m-0"},[a("thead",{staticClass:"bg-gray-lighter"},[a("tr",[a("th",{staticClass:"text-center",staticStyle:{width:"60px"}},[t._v(" # ")]),a("th",{staticClass:"pl-4",staticStyle:{width:"30%"}},[a("span",{staticClass:"d-none d-sm-inline"},[t._v("Label Name")])]),a("th",{staticStyle:{width:"100px"}},[t._v(" Contacts ")]),a("th",[t._v(" Description ")]),a("th",{staticClass:"text-center",staticStyle:{width:"100px"}},[t._v(" Status ")]),a("th",{staticStyle:{width:"170px"}})])]),a("tbody",t._l(t.labels,(function(e,s){return a("tr",{key:e.id,staticClass:"cursor-pointer",attrs:{title:"view label in detail"},on:{click:function(a){return t.$emit("view",e.id)}}},[a("td",{staticClass:"text-center"},[a("span",{staticClass:"hidden-info"},[t._v("#")]),a("span",[t._v(t._s(s+1))])]),a("td",{staticClass:"pl-4 ml-4"},[a("span",{staticClass:"hidden-info"},[t._v("Name")]),a("span",{staticClass:"field-data"},[t._v(t._s(e.name))])]),a("td",{staticClass:"px-3 px-lg-4"},[a("span",{staticClass:"hidden-info"},[t._v("Total Contacts:")]),a("span",[t._v(t._s(e.total_contacts||0))])]),a("td",{staticClass:"pr-5"},[a("span",{staticClass:"hidden-info"},[t._v("Description:")]),a("span",{staticClass:"description"},[t._v(t._s(e.description||" N/A"))])]),a("td",{staticClass:"text-center"},[a("span",{staticClass:"hidden-info"},[t._v("Status:")]),a("StatusColumn",{attrs:{status:e.is_active},on:{change:function(a){return t.onStatusUpdate(e,a)}}})],1),a("td",[a("span",{staticClass:"hidden-info"}),a("FlexBox",{attrs:{"align-items":"center",justify:"end"}},[a("Button",{staticClass:"view-button mr-2 p-2 d-none text-gray-800",attrs:{color:"secondary",title:"View label"},on:{click:function(a){return t.$emit("view",e.id)}}},[a("Icon",{attrs:{name:"file-text-o",size:"regular"}})],1),a("Button",{staticClass:"p-2 mx-1 text-dark",attrs:{color:"light",title:"compose message for all contacts of "+e.name},on:{click:function(a){return t.$emit("compose",{label:e,index:s})}}},[a("CardLoader",{attrs:{opacity:"0","is-loading":e.isComposing,"loader-size":"20"}},[a("Icon",{class:{invisible:e.isComposing},attrs:{type:"si",name:"envelope-letter",size:"medium"}})],1)],1),a("Button",{staticClass:"p-2 mx-1 text-dark",attrs:{color:"secondary",title:"merge Label"},on:{click:function(a){return t.$emit("merge",e)}}},[a("Icon",{attrs:{name:"compress",size:"regular"}})],1),a("Button",{staticClass:"p-2 mx-1 text-dark",attrs:{color:"light",title:"edit label"},on:{click:function(a){return t.$emit("edit",e)}}},[a("Icon",{attrs:{type:"fa",name:"pencil",size:"regular"}})],1),a("Button",{staticClass:"p-2 mx-1 text-danger",attrs:{color:"light",title:"delete label"},on:{click:function(a){return t.$emit("delete",e)}}},[a("Icon",{attrs:{type:"fa",name:"trash",size:"regular"}})],1)],1)],1)])})),0)]):a("Block",{staticClass:"min-height-300 d-flex flex-row justify-content-center align-items-center"},[a("h4",{staticClass:"text-gray-dark font-w300"},[t._v(" Labels not Found ")])])],1)],1)],1),a("Pagination",{staticClass:"my-2 my-lg-0",attrs:{pagination:t.pagination},on:{change:t.changePagination}})],1)},E=[],P=a("2ef0"),T=a("020b"),N=a("ac13"),V=a("0f8e"),A=a("c2cd"),U=a("1824"),z=a("dd08"),q=a("27dc"),R={name:"LabelsTable",components:{Block:L["a"],FlexBox:c["a"],Button:u["a"],Row:q["a"],Search:z["a"],UpdateStatus:U["a"],Icon:r["a"],InputSelect:j["a"],CardBase:T["a"],Pagination:V["a"],CardLoader:A["a"],StatusColumn:N["a"]},props:{labels:{type:Array,default:function(){return[]}},dataFilters:{type:Object,default:function(){return{}}},pagination:{type:Object,default:function(){return{}}},isLoading:{type:Boolean}},data:function(){return{targetContact:{},isStatusModalShown:!1,statuses:[{name:"All",value:null},{name:"Active",value:1},{name:"Inactive",value:0}]}},methods:{updateStatus:function(){var t=this.targetContact,e=t.id,a=t.status;return Object(b["l"])(e,a)},setStatus:function(){var t=this.targetContact,e=Object(P["findIndex"])(this.labels,["id",t.id]);this.labels[e].is_active=t.status?1:0},onStatusUpdate:function(t,e){this.targetContact=Object(i["a"])(Object(i["a"])({},t),{},{status:e}),this.isStatusModalShown=!0},onSearch:function(){this.pagination.current=1,this.$emit("reload")},changePagination:function(t){this.pagination.current=t,this.$emit("reload",t)}}},H=R,W=(a("7462"),Object(C["a"])(H,D,E,!1,null,"518ec928",null)),J=W.exports,G={name:"Labels",components:{MergeLabel:I,Block:L["a"],CreateLabel:y,Button:u["a"],FlexBox:c["a"],Icon:r["a"],DeleteLabel:o["a"],EditLabel:M["a"],LabelsTable:J,ContentHeader:l["a"]},data:function(){return{isLoading:!1,isCreateFormShown:!1,isMergeFormShown:!1,isViewModalShown:!1,isEditModalShown:!1,isDeleteModalShown:!1,targetLabel:{},labels:[],dataFilters:{status:1,keyword:""},pagination:{pages:1,current:1,perPage:15}}},created:function(){this.fetchData()},mounted:function(){var t=this;this.$bus.on("router-link-clicked",(function(){t.isLoading||t.fetchData()}))},beforeDestroy:function(){this.$bus.removeAllListeners("router-link-clicked")},methods:{fetchData:function(t){var e=this,a=this.dataFilters,s=a.status,n=a.keyword;this.isLoading=!0,Object(b["i"])({is_active:s||null,keyword:n||null,page:t||null,per_page:this.pagination.perPage}).then((function(t){var a=t.data,s=t.meta;e.labels=a.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{isComposing:!1})})),e.pagination=Object(S["b"])(s),e.isLoading=!1})).catch((function(t){"request-cancel"!==t&&(e.$toast.error("There was an error while fetching data."),e.isLoading=!1)}))},onLabelCreated:function(t){var e=t.id;this.$router.push("/labels/".concat(e))},onViewLabel:function(t){this.$router.push("/labels/".concat(t))},onMergeLabel:function(t){this.targetLabel=t,this.isMergeFormShown=!0},onEditLabel:function(t){this.targetLabel=t,this.isEditModalShown=!0},onDeleteLabel:function(t){this.targetLabel=t,this.isDeleteModalShown=!0},onCompose:function(t,e){var a=this;this.labels[e].isComposing=!0,Object(b["f"])(t.id,{per_page:0}).then((function(t){var e=t.data;a.$bus.emit("compose",{action:"New",recipients:e})})).catch((function(t){a.$toast.error(t)})).finally((function(){a.labels[e].isComposing=!1}))}}},K=G,Q=Object(C["a"])(K,s,n,!1,null,null,null);e["default"]=Q.exports},f669:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("CardLoader",{attrs:{"is-loading":t.isFetchingData}},[a("Form",{staticClass:"px-2 pb-2",on:{submit:t.onSubmit}},[a("table",{staticClass:"table-borderless w-100"},[a("tr",[a("th",{staticStyle:{width:"60px"},attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{attrs:{name:"user",size:"large",color:"muted"}})],1)],1),a("td",{attrs:{colspan:"2"}},[a("InputText",{attrs:{required:"",type:"text",title:"Label Name",error:t.error.name},model:{value:t.label.name,callback:function(e){t.$set(t.label,"name",e)},expression:"label.name"}})],1)]),a("tr",[a("th",{attrs:{scope:"row"}},[a("FlexBox",{staticClass:"h-100 w-100",attrs:{"align-items":"center",justify:"center"}},[a("Icon",{staticClass:"fa-rotate-90",attrs:{name:"file",size:"regular",color:"muted"}})],1)],1),a("td",{attrs:{colspan:"2"}},[a("InputTextArea",{attrs:{title:"Description",rows:"3",error:t.error.description},model:{value:t.label.description,callback:function(e){t.$set(t.label,"description",e)},expression:"label.description"}})],1)])]),a("FlexBox",{staticClass:"px-2",attrs:{justify:"end"}},[a("Button",{staticClass:"mr-2",attrs:{type:"submit",color:"primary",disabled:t.isLoading,loading:t.isLoading}},[t._v(" Save ")]),a("Button",{attrs:{color:"secondary"},on:{click:function(e){return t.$emit("cancel")}}},[t._v(" Cancel ")])],1)],1)],1)},n=[],i=a("5530"),l=a("6436"),o=a("7fb4"),r=a("5d35"),c=a("9559"),u=a("c6b1"),d=a("ad4f"),p=a("c2cd"),f={name:"LabelForm",components:{CardLoader:p["a"],Button:d["a"],InputTextArea:u["a"],FlexBox:c["a"],Icon:r["a"],InputText:o["a"],Form:l["a"]},props:{value:{type:Object,default:function(){return{}}},error:{type:Object,default:function(){return{}}},isLoading:{type:Boolean}},data:function(){return{isFetchingData:!1,label:{name:"",description:""}}},computed:{},watch:{value:{handler:function(){var t=this.value,e=this.label;this.label=Object(i["a"])(Object(i["a"])({},e),t)},immediate:!0}},methods:{onSubmit:function(){this.$emit("submit",this.label)}}},h=f,b=(a("fc7d"),a("2877")),m=Object(b["a"])(h,s,n,!1,null,"756a1623",null);e["a"]=m.exports},fc7d:function(t,e,a){"use strict";a("8bd0")}}]);