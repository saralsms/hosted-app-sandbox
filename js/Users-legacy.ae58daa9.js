(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Users"],{"00dc":function(t,e,s){"use strict";s("7b23")},"0f8e":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column-reverse",justify:"between","align-items":"end"}},[s("Block",{staticClass:"p-2"},[t._v(" "+t._s(t.pagination.message)+" ")]),s("FlexBox",{staticClass:"flex-lg-row flex-wrap align-items-lg-center",attrs:{direction:"column",justify:"between","align-items":"end"}},[s("InputSelect",{staticClass:"my-2 my-lg-0",attrs:{options:t.perPages},on:{select:function(e){return t.$emit("change")}},model:{value:t.pagination.perPage,callback:function(e){t.$set(t.pagination,"perPage",e)},expression:"pagination.perPage"}}),s("nav",{staticClass:"ml-3"},[s("ul",{staticClass:"pagination disable-user-select mb-0"},[s("li",{staticClass:"page-item",class:{disabled:!t.isPreviousable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current-1)}}},[s("span",{staticClass:"page-link"},[t._v("Previous")])]),t._l(t.pages,(function(e,a){return s("li",{key:a,staticClass:"page-item",class:{active:t.current===e}},[s("a",{staticClass:"page-link btn-primary",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.setCurrent(e)}}},[t._v(t._s(e))])])})),s("li",{staticClass:"page-item",class:{disabled:!t.isNextable},on:{click:function(e){return e.preventDefault(),t.setCurrent(t.current+1)}}},[s("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)])],1)],1)},i=[],n=(s("a9e3"),s("2ef0")),r=s("9559"),o=s("0814"),l=s("0af5"),c={name:"Pagination",components:{InputSelect:l["a"],Block:o["a"],FlexBox:r["a"]},props:{visibleLength:{type:Number,default:5},pagination:{type:Object,default:function(){return{}}}},data:function(){return{offset:0,perPages:[5,15,25,50,100],pages:[]}},computed:{current:function(){return this.pagination.current||1},length:function(){return this.pagination.pages||1},isNextable:function(){return this.length>this.current},isPreviousable:function(){return this.current>1}},watch:{length:{handler:function(){this.unWatchCurrentPageValue();var t=this.visibleLength,e=Math.ceil(t/2)+(t%2?0:1);this.offset=t-(t-e+1),this.generatePagination(),this.length>this.visibleLength&&(this.unWatchCurrentPageValue=this.$watch("current",this.generatePagination))},immediate:!0}},methods:{unWatchCurrentPageValue:function(){},generatePagination:function(){var t=this.current,e=this.offset,s=this.length,a=this.visibleLength,i=t-e;i<1&&(i=1);var r=i+a;r>s&&(r=s+1,i=r-a,i<1&&(i=1)),this.pages=Object(n["range"])(i,r)},setCurrent:function(t){var e=t;t<=1?e=1:t>=this.length&&(e=this.length),e!==this.current&&this.$emit("change",e)}}},u=c,d=(s("5148"),s("2877")),m=Object(d["a"])(u,a,i,!1,null,"64c09d8e",null);e["a"]=m.exports},"311b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Credit Balance",visible:t.visible,loading:t.isSubmitting,disabled:!t.validated},on:{success:t.submit,close:t.close,closed:t.reset}},[s("Block",{staticClass:"px-4"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("ForeShadow",{attrs:{visible:t.isLoading}},[s("table",{staticClass:"table-borderless w-100"},[s("tr",[s("th",{attrs:{scope:"row"}},[s("Icon",{attrs:{name:"building-o",size:"large",color:"muted"}})],1),s("td",[s("InputSelect",{attrs:{options:t.userOptions,"option-value":"id","option-text":"info",title:"User",disabled:t.disableUserInput,required:""},model:{value:t.credit.user,callback:function(e){t.$set(t.credit,"user",e)},expression:"credit.user"}})],1)]),s("tr",[s("th",{staticStyle:{width:"40px"},attrs:{scope:"row"}},[s("Icon",{attrs:{name:"database",size:"large",color:"muted"}})],1),s("td",[s("InputNumber",{attrs:{required:"",type:"text",title:"Amount",error:t.error.amount},model:{value:t.credit.amount,callback:function(e){t.$set(t.credit,"amount",e)},expression:"credit.amount"}})],1)]),s("tr",[s("th",{attrs:{scope:"row"}},[s("Icon",{attrs:{name:"cc-mastercard",size:"medium",color:"muted"}})],1),s("td",[s("InputSelect",{staticClass:"flex-auto",attrs:{title:"Method",options:["API","BANK","CARD","CASH","TRIAL","QR","WALLET"],required:"",type:"text",error:t.error.credit_method},model:{value:t.credit.method,callback:function(e){t.$set(t.credit,"method",e)},expression:"credit.method"}})],1)]),s("tr",[s("th",{attrs:{scope:"row"}},[s("Icon",{staticClass:"fa-rotate-90",attrs:{name:"file",size:"large",color:"muted"}})],1),s("td",{attrs:{colspan:"2"}},[s("InputTextArea",{staticClass:"mb-2",attrs:{rows:"2",title:"Description"},model:{value:t.credit.description,callback:function(e){t.$set(t.credit,"description",e)},expression:"credit.description"}})],1)])])])],1)])],1)},i=[],n=(s("a4d3"),s("e01a"),s("99af"),s("d3b7"),s("2909")),r=s("78b5"),o=s("d855"),l=s("5d35"),c=s("e1778"),u=s("0af5"),d=s("c6b1"),m=s("0814"),p=s("c652"),h={name:"CreditBalance",components:{InputNumber:p["a"],Block:m["a"],InputTextArea:d["a"],InputSelect:u["a"],Icon:l["a"],Modal:r["a"],ForeShadow:o["a"]},props:{users:{type:Array,default:function(){return[]}},user:{type:Object,default:function(){return{}}},disableUserInput:{type:Boolean},visible:{type:Boolean},isLoading:{type:Boolean}},data:function(){return{credit:{amount:null,method:"CASH",user:null,description:""},error:{},isSubmitting:!1}},computed:{userOptions:function(){return[{id:null,info:"~ Select User ~",selected:!0}].concat(Object(n["a"])(this.users))},validated:function(){var t=this.credit,e=t.amount,s=t.user,a=t.method;return s&&a&&e}},watch:{visible:{handler:function(t){t&&(this.credit.user=this.user.id)},immediate:!0,deep:!0}},methods:{submit:function(){var t=this;this.isSubmitting=!0;var e=this.credit,s=e.amount,a=e.method,i=e.user,n=e.description;Object(c["a"])({user_id:parseInt(i,0),payment_method:a,amount:parseFloat(s),description:n}).then((function(){t.$toast.success("Amount credited successfully."),t.$emit("success"),t.close()})).catch((function(e){"string"===typeof e?t.$toast.error(e):t.error=e})).finally((function(){t.isSubmitting=!1}))},close:function(){this.$emit("close"),this.reset()},reset:function(){this.credit={amount:0,method:"CASH",user:null,description:""},this.isSubmitting=!1}}},f=h,g=s("2877"),b=Object(g["a"])(f,a,i,!1,null,null,null);e["a"]=b.exports},"3d73":function(t,e,s){},"40b1":function(t,e,s){"use strict";s("c893")},5148:function(t,e,s){"use strict";s("b994")},"784e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Block",[s("UsersTable",{attrs:{"is-loading":t.isLoading,users:t.userList,"data-filters":t.dataFilters,pagination:t.pagination},on:{view:t.onViewOrganization,reload:t.fetchData,credit:t.onCreditBalance,editRate:t.onEditRate}}),s("ViewUser",{attrs:{visible:t.isViewModalShown,user:t.targetUser},on:{credit:t.onCreditBalance,editRate:t.onEditRate,editKyc:t.onEditKyc,editSenderId:t.onEditSenderId,getTempPass:t.onGetTempPass,close:function(e){t.isViewModalShown=!1}}}),s("CreditBalance",{attrs:{user:t.targetUser,users:t.users,"disable-user-input":"",visible:t.isCreditFormShown,"is-loading":t.isLoading},on:{success:t.fetchData,close:function(e){t.isCreditFormShown=!1}}}),s("EditRate",{attrs:{visible:t.isEditRateModalShown,user:t.targetUser},on:{success:t.fetchData,close:function(e){t.isEditRateModalShown=!1}}}),s("EditKycDetails",{attrs:{visible:t.isEditKycModalShown,user:t.targetUser},on:{success:function(e){return t.fetchData(t.pagination.current,e)},close:function(e){t.isEditKycModalShown=!1}}}),s("EditSenderID",{attrs:{visible:t.isEditSenderIdModalShown,user:t.targetUser},on:{success:function(e){return t.fetchData(t.pagination.current,e)},close:function(e){t.isEditSenderIdModalShown=!1}}}),s("GetTemporaryPassword",{attrs:{visible:t.isGetTempPasswordModalShown,user:t.targetUser},on:{success:function(e){return t.fetchData(t.pagination.current,e)},close:function(e){t.isGetTempPasswordModalShown=!1}}})],1)},i=[],n=s("5530"),r=s("2f62"),o=s("0814"),l=s("2612"),c=s("7228"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Edit credit rate for user",visible:t.visible,loading:t.isLoading,disabled:!t.validated,"modal-class":"","modal-style":"max-width: 400px;"},on:{close:t.close,success:t.submit}},[s("Block",{staticClass:"px-4"},[s("table",{staticClass:"w-100 mb-3"},[s("tbody",[s("tr",[s("th",{staticStyle:{width:"110px"}},[t._v(" Name: ")]),s("td",[t._v(" "+t._s(t.user.name||t.user.first_name+" "+t.user.last_name||" N/A")+" ")])]),s("tr",[s("th",{staticStyle:{width:"70px"}},[t._v(" Balance: ")]),s("td",[s("span",{staticClass:"text-currency"},[t._v(t._s(t.currencyFormat(t.user.amount||0)))])])]),s("tr",[s("th",{staticStyle:{width:"70px"}},[t._v(" Current Rate: ")]),s("td",[s("span",{staticClass:"text-currency"},[t._v(t._s(t.currencyFormat(t.user.rate||0)))])])]),s("tr",[s("th",{staticStyle:{width:"70px"}},[t._v(" New Rate: ")]),s("td",[s("InputNumber",{staticClass:"mb-0",attrs:{required:""},model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}})],1)])])])])],1)},d=[],m=(s("a9e3"),s("d3b7"),s("78b5")),p=s("c652"),h={name:"EditRate",components:{InputNumber:p["a"],Block:o["a"],Modal:m["a"]},props:{visible:{type:Boolean,default:!1},user:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1,rate:0}},computed:{validated:function(){var t=this.rate,e=this.user,s=Number(t),a=Number(e.rate);return s&&s!==a}},watch:{"user.rate":{handler:function(t){this.rate=t||0},immediate:!0}},methods:{onClose:function(){this.isLoading||this.$emit("close")},submit:function(){var t=this;this.isLoading=!0,Object(l["e"])(this.user.id,this.rate).then((function(){t.$toast.success("Rate edited successfully!"),t.$emit("success")})).catch((function(e){e?t.$toast.error(e):t.$toast.error("There was an error while editing rate!")})).finally((function(){t.isLoading=!1,t.close()}))},close:function(){this.isLoading||this.$emit("close")}}},f=h,g=(s("a123"),s("2877")),b=Object(g["a"])(f,u,d,!1,null,"e87a1e98",null),_=b.exports,v=s("311b"),y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Add a new user","hide-close-button":!1,"hide-controls":"","modal-style":"max-width: 700px;",visible:t.visible,loading:t.isLoading},on:{close:t.close}},[s("template",{slot:"header"},[s("FlexBox",{attrs:{"align-items":"center"}},[s("Block",[s("AvatarImage",{attrs:{path:t.user.photo_url,size:"medium"}})],1),s("FlexBox",{staticClass:"ml-4",attrs:{direction:"column"}},[s("h5",{staticClass:"mb-1"},[s("FlexBox",[s("Block",{staticClass:"mr-2"},[t.user.organization_name?s("span",[t._v(t._s(t.user.organization_name))]):s("i",[t._v("N/A")])]),t.user.is_kyc_verified?t._e():s("Block",[s("Icon",{attrs:{title:"Not verified",type:"si",name:"info",size:"regular",weight:"bold",color:"danger"}})],1)],1)],1),s("FlexBox",[s("Icon",{staticClass:"mr-2",attrs:{name:"map-marker",size:"small",color:"muted"}}),s("Block",[t.user.address?s("span",[t._v(t._s(t.user.address))]):s("i",[t._v("Address not set "),s("Icon",{attrs:{type:"si",name:"info",color:"danger",weight:"bold"}})],1)])],1),s("FlexBox",[s("Icon",{staticClass:"mr-1",attrs:{name:"phone",color:"muted",size:"small"}}),t.user.phone?s("span",[t._v(" "+t._s(t.user.phone)+" ")]):s("i",[t._v("Phone not set "),s("Icon",{attrs:{type:"si",name:"info",size:"small",color:"danger",weight:"bold"}})],1)],1)],1)],1)],1),s("FlexBox",{staticClass:"border",attrs:{"align-items":"stretch",justify:"center"}},[s("Block",[s("Button",{staticClass:"action-button border-right border-left user-menu",attrs:{title:"Credit balance",color:"light"},on:{click:function(e){return t.$emit("credit",Object.assign({},t.user))}}},[s("FlexBox",{attrs:{direction:"column","align-items":"center"}},[s("Icon",{attrs:{type:"si",name:"plus",size:"regular"}}),s("span",{staticClass:"mt-1"},[t._v("Credit")])],1)],1),s("Button",{staticClass:"action-button border-right user-menu",attrs:{title:"edit credit rate",color:"light"},on:{click:function(e){return t.$emit("editRate",Object.assign({},t.user))}}},[s("FlexBox",{attrs:{direction:"column","align-items":"center"}},[s("Icon",{attrs:{type:"fa",name:"sort-numeric-desc",size:"regular"}}),s("span",{staticClass:"mt-1"},[t._v("Rate")])],1)],1),s("Button",{staticClass:"action-button border-right user-menu",attrs:{title:"edit KYC details",color:"light"},on:{click:function(e){return t.$emit("editKyc",Object.assign({},t.user))}}},[s("FlexBox",{attrs:{direction:"column","align-items":"center"}},[s("Icon",{attrs:{name:"shield",size:"regular"}}),s("span",{staticClass:"mt-1"},[t._v("KYC")])],1)],1),s("Button",{staticClass:"action-button border-right user-menu",attrs:{title:"edit sender id",color:"light"},on:{click:function(e){return t.$emit("editSenderId",Object.assign({},t.user))}}},[s("FlexBox",{attrs:{direction:"column","align-items":"center"}},[s("Icon",{attrs:{name:"tty",size:"regular"}}),s("span",{staticClass:"mt-1"},[t._v("Sender")])],1)],1),s("Button",{staticClass:"action-button border-right user-menu",attrs:{title:"Generate Temporary password",color:"light"},on:{click:function(e){return t.$emit("getTempPass",Object.assign({},t.user))}}},[s("FlexBox",{attrs:{direction:"column","align-items":"center"}},[s("Icon",{attrs:{name:"key",size:"regular"}}),s("span",{staticClass:"mt-1"},[t._v("Password")])],1)],1)],1)],1),s("div",{staticClass:"scrollable bg-gray-lighter",staticStyle:{"max-height":"300px"}},[s("FlexBox",{staticClass:"mx-4 mb-3",attrs:{wrap:"wrap"}},[s("FlexBox",{staticClass:"m-2",attrs:{"align-items":"stretch",flex:"auto"}},[s("Block",{staticClass:"p-3"},[s("table",{staticClass:"table-borderless"},[s("tr",[s("th",{attrs:{scope:"row"}},[t._v(" Admin: ")]),s("td",[t._v(" "+t._s(t.user.first_name)+" "+t._s(t.user.last_name)+" ")])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v(" Email: ")]),s("td",[s("a",{staticClass:"link",attrs:{href:"mailto:"+t.user.email}},[t._v(" "+t._s(t.user.email)+" ")]),t.user.is_email_verified?s("Icon",{attrs:{type:"si",title:"Verified email",name:"check",color:"success",weight:"bold"}}):s("Icon",{attrs:{type:"si",title:"Email not verified",name:"info",color:"danger",weight:"bold"}})],1)]),s("tr",[s("th",[t._v(" Joined on: ")]),s("td",[t._v(" "+t._s(t.duration(t.user.created_at,!1))+" ")])]),s("tr",[s("th",[t._v(" KYC Status: ")]),s("td",[t.user.is_kyc_verified?s("span",[t._v(" Verified "),s("Icon",{attrs:{type:"si",name:"check",color:"success",weight:"bold"}})],1):s("span",[t._v(" Not verified "),s("Icon",{attrs:{type:"si",name:"info",color:"danger",weight:"bold"}})],1)])]),s("tr",[s("th",[t._v(" Registration number: ")]),s("td",[t._v(" "+t._s(t.user.registration_number||"N/A")+" ")])]),s("tr",[s("th",[t._v(" PAN number: ")]),s("td",[t._v(" "+t._s(t.user.pan_number||"N/A")+" ")])])])])],1),s("FlexBox",{staticClass:"m-2",attrs:{"align-items":"stretch",flex:"auto"}},[s("Block",{staticClass:"p-3 flex-auto"},[s("p",{staticClass:"font-weight-bold mb-2"},[t._v(" Sender IDs: ")]),s("table",{staticClass:"providers"},[s("tbody",[t.user.sender_id_ntc?s("tr",[s("th",{staticClass:"font-weight-normal text-uppercase",attrs:{scope:"row"}},[t._v(" Ntc: ")]),s("td",[t._v(t._s(t.user.sender_id_ntc))])]):t._e(),t.user.sender_id_ncell?s("tr",[s("th",{staticClass:"font-weight-normal text-uppercase",attrs:{scope:"row"}},[t._v(" Ncell: ")]),s("td",[t._v(t._s(t.user.sender_id_ncell))])]):t._e(),t.user.sender_id_smartcell?s("tr",[s("th",{staticClass:"font-weight-normal text-uppercase",staticStyle:{width:"110px"},attrs:{scope:"row"}},[t._v(" Smartcell: ")]),s("td",[t._v(t._s(t.user.sender_id_smartcell))])]):t._e()])])])],1)],1)],1)],2)},w=[],x=s("fce3"),C=s("9559"),S=s("5d35"),k=s("ad4f"),B={name:"ViewUser",components:{Button:k["a"],Icon:S["a"],Block:o["a"],FlexBox:C["a"],AvatarImage:x["a"],Modal:m["a"]},props:{user:{type:Object,default:function(){return{labels:[]}}},userId:{type:[Number,String],default:null},visible:{type:Boolean,default:!1}},data:function(){return{isLoading:!1}},methods:{close:function(){this.isLoading||this.$emit("close")}}},I=B,$=(s("d54c"),Object(g["a"])(I,y,w,!1,null,"830bc658",null)),j=$.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Edit Sender ID","hide-controls":"","modal-style":"max-width: 500px;",visible:t.visible},on:{close:t.close}},[s("Block",{staticClass:"px-4 pb-2"},[s("Form",{on:{submit:t.onSubmit}},[s("InputText",{attrs:{title:"NTC"},model:{value:t.sender_ids.sender_id_ntc,callback:function(e){t.$set(t.sender_ids,"sender_id_ntc",e)},expression:"sender_ids.sender_id_ntc"}}),s("InputText",{attrs:{title:"NCELL"},model:{value:t.sender_ids.sender_id_ncell,callback:function(e){t.$set(t.sender_ids,"sender_id_ncell",e)},expression:"sender_ids.sender_id_ncell"}}),s("InputText",{attrs:{title:"SMARTCELL"},model:{value:t.sender_ids.sender_id_smartcell,callback:function(e){t.$set(t.sender_ids,"sender_id_smartcell",e)},expression:"sender_ids.sender_id_smartcell"}}),s("FlexBox",{attrs:{justify:"end"}},[s("Button",{staticClass:"mr-2",attrs:{type:"submit",color:"primary",disabled:!t.canUpdate||t.isSubmitting,loading:t.isSubmitting}},[t._v(" Update ")]),s("Button",{attrs:{color:"secondary"},on:{click:t.close}},[t._v(" Cancel ")])],1)],1)],1)],1)},F=[],E=s("53ca"),L=s("7fb4"),U=s("6436"),P={name:"EditSenderID",components:{Block:o["a"],Form:U["a"],Button:k["a"],InputText:L["a"],FlexBox:C["a"],Modal:m["a"]},props:{user:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1}},data:function(){return{sender_ids:{sender_id_ncell:"",sender_id_ntc:"",sender_id_smartcell:""},error:{},isSubmitting:!1,isUserFormShown:!0}},computed:{canUpdate:function(){var t=this.user,e=this.sender_ids,s=e.sender_id_ncell,a=e.sender_id_ntc,i=e.sender_id_smartcell;return e.sender_id_ncell&&a&&i&&(t.sender_id_ncell!==s||t.sender_id_ntc!==a||t.sender_id_smartcell!==i)}},watch:{visible:{handler:function(t){if(t){var e=this.user,s=e.sender_id_ncell,a=e.sender_id_ntc,i=e.sender_id_smartcell;this.sender_ids={sender_id_ncell:s,sender_id_ntc:a,sender_id_smartcell:i}}},immediate:!0}},methods:{onSubmit:function(){var t=this;this.isSubmitting=!0;var e=this.user,s=this.sender_ids;Object(l["f"])(this.user.id,s).then((function(){t.error={},t.$emit("success",Object(n["a"])(Object(n["a"])({},e),s)),t.$toast.success("Sender IDs updated successfully."),t.close()})).catch((function(e){"object"===Object(E["a"])(e)?t.error=e:t.$toast.error(e)})).finally((function(){t.isSubmitting=!1}))},close:function(){this.$emit("close"),this.sender_ids={sender_id_ncell:"",sender_id_ntc:"",sender_id_smartcell:""}}}},M=P,z=Object(g["a"])(M,O,F,!1,null,"311f3d1e",null),T=z.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{title:"Edit KYC Details","hide-controls":"","modal-style":"max-width: 500px;",visible:t.visible},on:{close:t.close}},[s("Block",{staticClass:"px-4 pb-2"},[s("Form",{on:{submit:t.onSubmit}},[s("InputText",{attrs:{error:t.error.organization_name,title:"Organization name"},model:{value:t.kyc.organization_name,callback:function(e){t.$set(t.kyc,"organization_name",e)},expression:"kyc.organization_name"}}),s("InputText",{attrs:{error:t.error.registration_number,title:"Registration number"},model:{value:t.kyc.registration_number,callback:function(e){t.$set(t.kyc,"registration_number",e)},expression:"kyc.registration_number"}}),s("InputText",{attrs:{error:t.error.pan_number,title:"PAN number"},model:{value:t.kyc.pan_number,callback:function(e){t.$set(t.kyc,"pan_number",e)},expression:"kyc.pan_number"}}),s("FlexBox",{attrs:{justify:"end"}},[s("Button",{staticClass:"mr-2",attrs:{type:"submit",color:"primary",disabled:!t.canUpdate||t.isSubmitting,loading:t.isSubmitting}},[t._v(" Update ")]),s("Button",{attrs:{color:"secondary"},on:{click:t.close}},[t._v(" Cancel ")])],1)],1)],1)],1)},A=[],D={name:"EditKycDetails",components:{Block:o["a"],Form:U["a"],Button:k["a"],InputText:L["a"],FlexBox:C["a"],Modal:m["a"]},props:{user:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1}},data:function(){return{kyc:{organization_name:"",registration_number:"",pan_number:""},error:{},isSubmitting:!1,isUserFormShown:!0}},computed:{canUpdate:function(){var t=this.user,e=this.kyc,s=e.organization_name,a=e.registration_number,i=e.pan_number;return s&&a&&i&&(t.organization_name!==s||t.registration_number!==a||t.pan_number!==i)}},watch:{visible:{handler:function(t){if(t){var e=this.user,s=e.organization_name,a=e.registration_number,i=e.pan_number;this.kyc={organization_name:s,registration_number:a,pan_number:i}}},immediate:!0}},methods:{onSubmit:function(){var t=this;this.isSubmitting=!0,Object(l["c"])(this.user.id,this.kyc).then((function(e){t.error={},t.$emit("success",Object(n["a"])({},e)),t.$toast.success("KYC updated successfully."),t.close()})).catch((function(e){"object"===Object(E["a"])(e)?t.error=e:t.$toast.error(e)})).finally((function(){t.isSubmitting=!1}))},close:function(){this.$emit("close"),this.kyc={organization_name:"",registration_number:"",pan_number:""}}}},R=D,K=Object(g["a"])(R,N,A,!1,null,"0f458353",null),V=K.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Modal",{attrs:{visible:t.visible,title:"Generate temporary password","modal-style":"max-width: 450px","hide-controls":""}},[s("Block",{staticClass:"px-4 pb-2"},[s("CardLoader",{attrs:{"is-loading":t.isLoading}},[t.isLoading?s("p",{staticClass:"py-4"},[t._v(" Generating a temporary password... ")]):t.password?s("Block",[s("div",{staticClass:"input-group input-group-lg"},[s("input",{staticClass:"form-control border",attrs:{id:"token",readonly:""},domProps:{value:t.password}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-secondary",attrs:{id:"clip",type:"button","data-clipboard-target":"#token"}},[s("Icon",{attrs:{name:"clipboard"}})],1)])]),s("p",{staticClass:" mt-2 mb-3 text-primary"},[t._v(" Make sure to copy this password. It won't be shown again after you close this modal or leave this page. ")])]):s("p",{staticClass:"py-4"},[t._v(" There was an error while generating temporary password! ")])],1),s("FlexBox",{attrs:{justify:"end"}},[s("Button",{staticClass:"ml-2",attrs:{color:"secondary"},on:{click:t.close}},[t._v(" Close ")])],1)],1)],1)},q=[],Y=s("b311"),W=s.n(Y),H=s("c2cd"),J={name:"GetTemporaryPassword",components:{CardLoader:H["a"],Icon:S["a"],Button:k["a"],FlexBox:C["a"],Block:o["a"],Modal:m["a"]},props:{visible:{type:Boolean,default:!1},user:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1,password:""}},watch:{visible:{handler:function(t){t&&this.getTempPass()},immediate:!0}},mounted:function(){this.clipboard=new W.a("#clip")},methods:{getTempPass:function(){var t=this;this.isLoading=!0,Object(l["a"])(this.user.id).then((function(e){var s=e.mimic_password;t.password=s})).catch((function(e){e?t.$toast.error(e):t.$toast.error("There was an error while generating temporary password!")})).finally((function(){t.isLoading=!1}))},close:function(){this.isLoading||(this.password=null,this.$emit("close"))}}},Q=J,X=Object(g["a"])(Q,G,q,!1,null,"100dbde4",null),Z=X.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Column",{staticClass:"mb-4"},[s("UpdateStatus",{attrs:{field:t.targetUser.organization_name||t.targetUser.email,status:t.targetUser.status,visible:t.isStatusModalShown,submission:t.updateStatus},on:{success:t.setStatus,close:function(e){t.isStatusModalShown=!1}}}),s("CardBase",{staticClass:"p-4 mb-3"},[s("Row",[s("Column",{attrs:{md:"3"}},[s("InputSelect",{attrs:{title:"Status","option-value":"value","option-text":"name",options:t.statuses},on:{select:function(e){return t.$emit("reload")}},model:{value:t.dataFilters.status,callback:function(e){t.$set(t.dataFilters,"status",e)},expression:"dataFilters.status"}})],1),s("Column",{attrs:{md:"3"}}),s("Column",{attrs:{md:"6"}},[s("Search",{staticClass:"mt-4 pt-1",attrs:{debounce:500},on:{change:t.onSearch},model:{value:t.dataFilters.keyword,callback:function(e){t.$set(t.dataFilters,"keyword",e)},expression:"dataFilters.keyword"}})],1)],1)],1),s("CardBase",[s("CardLoader",{attrs:{"is-loading":t.isLoading}},[s("Block",{staticClass:"table-responsive"},[t.users.length?s("table",{staticClass:"table table-hover m-0"},[s("thead",{staticClass:"bg-gray-lighter"},[s("tr",[s("th",{staticStyle:{width:"60px"}},[t._v(" # ")]),s("th",{staticStyle:{width:"60px"}}),s("th",[t._v(" Admin ")]),s("th",[t._v(" Organization ")]),s("th",[t._v(" Email ")]),s("th",[t._v(" Phone ")]),s("th",[t._v(" Balance ")]),s("th",[t._v(" Rate ")]),s("th",[t._v(" Last online ")]),s("th",{staticClass:"text-center"},[t._v(" Status ")]),s("th",{staticStyle:{width:"100px"}})])]),s("tbody",t._l(t.users,(function(e){return s("tr",{key:e.id,staticClass:"cursor-pointer",on:{click:function(s){return t.$emit("view",e)}}},[s("td",[t._v(" "+t._s(e.id)+" ")]),s("td",[s("ImageColumn",{attrs:{url:e.photo_url,icon:"fa fa-building-o"}})],1),s("td",[t._v(" "+t._s(e.first_name+" "+e.last_name)+" ")]),s("td",{staticClass:"description",staticStyle:{"min-width":"200px"}},[s("FlexBox",[s("Block",{staticClass:"mr-2"},[e.organization_name?s("span",[t._v(t._s(e.organization_name))]):s("i",[t._v("N/A")])]),e.is_kyc_verified?t._e():s("Block",[s("Icon",{attrs:{title:"Not verified",type:"si",name:"info",size:"regular",weight:"bold",color:"danger"}})],1)],1)],1),s("td",[e.email?s("a",{staticClass:"link",attrs:{href:"mailto:"+e.email}},[t._v(" "+t._s(e.email)+" ")]):s("span",[t._v("N/A")])]),s("td",[e.phone?s("a",{staticClass:"link",attrs:{href:"tel:"+e.phone},on:{click:function(t){t.stopPropagation()}}},[t._v(" "+t._s(e.phone)+" ")]):s("span",[t._v("N/A")])]),s("td",[t._v(" "+t._s(t.currencyFormat(e.amount)||0)+" ")]),s("td",[t._v(" "+t._s(t.currencyFormat(e.rate)||0)+" ")]),s("td",[t._v(" "+t._s(e.last_online)+" ")]),s("td",{staticClass:"text-center"},[s("StatusColumn",{attrs:{status:e.is_active},on:{change:function(s){return t.onStatusUpdate(e,s)}}})],1),s("td",[s("FlexBox",{attrs:{"align-items":"center",justify:"center"}},[s("Button",{staticClass:"p-2 mx-1 text-primary",attrs:{color:"light",title:"credit balance"},on:{click:function(s){return t.$emit("credit",e)}}},[s("Icon",{attrs:{type:"si",name:"plus",size:"regular"}})],1),s("Button",{staticClass:"p-2 mx-1",attrs:{color:"light",title:"edit credit rate"},on:{click:function(s){return t.$emit("editRate",e)}}},[s("Icon",{attrs:{type:"fa",name:"sort-numeric-desc",size:"regular"}})],1)],1)],1)])})),0)]):s("Block",{staticClass:"min-height-300 d-flex flex-row justify-content-center align-items-center"},[s("h4",{staticClass:"text-gray-dark font-w300"},[t._v(" users not Found ")])])],1)],1)],1),s("Pagination",{staticClass:"my-2 my-lg-0",attrs:{pagination:t.pagination},on:{change:t.changePagination}})],1)},et=[],st=s("2ef0"),at=s("020b"),it=s("0af5"),nt=s("dd08"),rt=s("ac13"),ot=s("0f8e"),lt=s("b30d"),ct=s("27dc"),ut=s("1b32"),dt=s("1824"),mt={name:"UsersTable",components:{UpdateStatus:dt["a"],FlexBox:C["a"],Button:k["a"],Block:o["a"],Column:ut["a"],Row:ct["a"],Icon:S["a"],ImageColumn:lt["a"],CardBase:at["a"],InputSelect:it["a"],Search:nt["a"],CardLoader:H["a"],Pagination:ot["a"],StatusColumn:rt["a"]},props:{users:{type:Array,default:null},dataFilters:{type:Object,default:function(){return{}}},pagination:{type:Object,default:function(){return{}}},isLoading:{type:Boolean}},data:function(){return{targetUser:{},isStatusModalShown:!1,statuses:[{name:"All",value:""},{name:"Active",value:1},{name:"Inactive",value:0}]}},methods:{setStatus:function(){var t=this.targetUser,e=Object(st["findIndex"])(this.users,["id",t.id]);this.users[e].is_active=t.status?1:0},updateStatus:function(){var t=this.targetUser,e=t.id,s=t.status;return Object(l["g"])(e,s)},onStatusUpdate:function(t,e){this.targetUser=Object(n["a"])(Object(n["a"])({},t),{},{status:e}),this.isStatusModalShown=!0},onSearch:function(){this.pagination.current=1,this.$emit("reload")},changePagination:function(t){this.pagination.current=t,this.$emit("reload",t)}}},pt=mt,ht=Object(g["a"])(pt,tt,et,!1,null,null,null),ft=ht.exports,gt={name:"Users",components:{GetTemporaryPassword:Z,EditKycDetails:V,EditSenderID:T,ViewUser:j,CreditBalance:v["a"],EditRate:_,Block:o["a"],UsersTable:ft},data:function(){return{isViewModalShown:!1,isCreditFormShown:!1,isEditRateModalShown:!1,isEditSenderIdModalShown:!1,isEditKycModalShown:!1,isDeleteModalShown:!1,isGetTempPasswordModalShown:!1,targetUser:{},isLoading:!1,dataFilters:{status:1,keyword:""},pagination:{pages:1,current:1,perPage:15},userList:[]}},computed:Object(n["a"])({},Object(r["c"])(["users"])),created:function(){this.fetchData(),this.$store.dispatch("listUsers")},mounted:function(){var t=this;this.$bus.on("router-link-clicked",(function(){t.isLoading||t.fetchData()}))},beforeDestroy:function(){this.$bus.removeAllListeners("router-link-clicked")},methods:{fetchData:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isEmpty(s)||(this.targetUser=s),this.isLoading=!0;var a=this.dataFilters,i=a.status,n=a.keyword;Object(l["b"])({page:t,is_active:i||null,keyword:n||null,per_page:this.pagination.perPage}).then((function(t){var s=t.data,a=t.meta;e.userList=s,e.pagination=Object(c["b"])(a),e.isLoading=!1})).catch((function(t){"request-cancel"!==t&&(e.$toast.error("There was an error while fetching data."),e.isLoading=!1)}))},onViewOrganization:function(t){var e=Object.assign({},t);this.targetUser=e,this.isViewModalShown=!0},onCreditBalance:function(t){var e=Object.assign({},t);this.targetUser=e,this.isCreditFormShown=!0},onEditRate:function(t){var e=Object.assign({},t);this.targetUser=e,this.isEditRateModalShown=!0},onEditKyc:function(t){var e=Object.assign({},t);this.targetUser=e,this.isEditKycModalShown=!0},onEditSenderId:function(t){var e=Object.assign({},t);this.targetUser=e,this.isEditSenderIdModalShown=!0},onGetTempPass:function(t){var e=Object.assign({},t);this.targetUser=e,this.isGetTempPasswordModalShown=!0}}},bt=gt,_t=Object(g["a"])(bt,a,i,!1,null,null,null);e["default"]=_t.exports},"7b23":function(t,e,s){},a123:function(t,e,s){"use strict";s("a42b")},a42b:function(t,e,s){},b30d:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"image-wrapper bg-gray d-flex justify-content-center align-items-center rounded-circle"},[t.url&&t.showImage?s("img",{staticClass:"img-fluid rounded-circle",attrs:{alt:"",src:t.url},on:{error:function(e){t.showImage=!1}}}):s("Icon",{attrs:{type:t.iconType,name:t.icon}})],1)},i=[],n=s("5d35"),r={name:"ImageColumn",components:{Icon:n["a"]},props:{url:{type:String,default:""},iconType:{type:String,default:"si"},icon:{type:String,default:"user"}},data:function(){return{showImage:!0}},watch:{url:{handler:function(){this.showImage=!0}}}},o=r,l=(s("40b1"),s("2877")),c=Object(l["a"])(o,a,i,!1,null,"76c50589",null);e["a"]=c.exports},b994:function(t,e,s){},c652:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("InputBase",{attrs:{title:t.title,required:t.required,error:t.error,"label-class":t.labelClass},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.id,i=e.isInvalid;return[s("input",{ref:"input",staticClass:"form-control",class:{"is-invalid":i,"input-lg":"lg"===t.size},attrs:{id:a,type:"number",min:t.min,max:t.max,step:t.step,required:!!t.required,placeholder:t.placeholder,disabled:t.disabled,autofocus:t.autofocus},domProps:{value:t.value},on:{input:t.updateInput}})]}}])})},i=[],n=(s("a9e3"),s("850b")),r={name:"InputNumber",components:{InputBase:n["a"]},props:{title:{type:String,default:""},value:{type:[Number,String],default:0},required:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},error:{type:String,default:""},size:{type:String,default:""},min:{type:Number,default:null},max:{type:Number,default:null},step:{type:Number,default:null},labelClass:{type:String,default:""}},methods:{updateInput:function(){var t=this.$refs.input.value;this.$emit("input",t),this.$emit("change",t)}}},o=r,l=s("2877"),c=Object(l["a"])(o,a,i,!1,null,null,null);e["a"]=c.exports},c893:function(t,e,s){},d54c:function(t,e,s){"use strict";s("3d73")},d855:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Block",{class:{"position-relative":t.visible}},[t._t("default"),t.visible?s("Block",{staticClass:"drop-shadow"}):t._e()],2)},i=[],n=s("0814"),r={name:"ForeShadow",components:{Block:n["a"]},props:{visible:{type:Boolean,default:!1}}},o=r,l=(s("00dc"),s("2877")),c=Object(l["a"])(o,a,i,!1,null,"d9579a32",null);e["a"]=c.exports},e1778:function(t,e,s){"use strict";s.d(e,"d",(function(){return i})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return o}));var a=s("9819");function i(t){var e=t.cancelPrevious,s=void 0===e||e;return Object(a["a"])({url:"deposits",method:"get",params:t,cancelPrevious:s})}function n(t){return Object(a["a"])({url:"deposits/balance",method:"get",params:t})}function r(t){return Object(a["a"])({url:"deposits",method:"post",data:t})}function o(t){return Object(a["a"])({url:"deposits/aggregate",method:"get",params:t})}}}]);